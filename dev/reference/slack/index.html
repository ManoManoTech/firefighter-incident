<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="FireFighter is ManoMano's incident management tool, built on top of Slack and Jira, with Django and Python."><link href=https://manomanotech.github.io/firefighter-incident/latest/reference/slack/ rel=canonical><link href=../pagerduty/ rel=prev><link href=../jira_app/ rel=next><link rel=icon href=../../assets/FireFighterIcon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.6"><title>slack - FireFighter Docs</title><link rel=stylesheet href=../../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_markdown_exec_pyodide.css><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../css/style.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="slack - FireFighter Docs"><meta property=og:description content="FireFighter is ManoMano's incident management tool, built on top of Slack and Jira, with Django and Python."><meta property=og:image content=https://manomanotech.github.io/firefighter-incident/latest/assets/images/social/reference/slack.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://manomanotech.github.io/firefighter-incident/latest/reference/slack/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="slack - FireFighter Docs"><meta name=twitter:description content="FireFighter is ManoMano's incident management tool, built on top of Slack and Jira, with Django and Python."><meta name=twitter:image content=https://manomanotech.github.io/firefighter-incident/latest/assets/images/social/reference/slack.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#firefighter.slack class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="FireFighter Docs" class="md-header__button md-logo" aria-label="FireFighter Docs" data-md-component=logo> <img src=../../assets/FireFighterIcon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FireFighter Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> slack </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ManoManoTech/firefighter-incident title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ManoManoTech/firefighter-incident </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../usage/integrations/ class=md-tabs__link> Usage </a> </li> <li class=md-tabs__item> <a href=../../contributing/0000-README/ class=md-tabs__link> Development </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../api/ class=md-tabs__link> Reference </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="FireFighter Docs" class="md-nav__button md-logo" aria-label="FireFighter Docs" data-md-component=logo> <img src=../../assets/FireFighterIcon.png alt=logo> </a> FireFighter Docs </label> <div class=md-nav__source> <a href=https://github.com/ManoManoTech/firefighter-incident title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ManoManoTech/firefighter-incident </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../../CHANGELOG/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../CODE_OF_CONDUCT/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> <li class=md-nav__item> <a href=../../credits/ class=md-nav__link> <span class=md-ellipsis> Credits </span> </a> </li> <li class=md-nav__item> <a href=../../license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class=md-nav__item> <a href=../../FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/integrations/ class=md-nav__link> <span class=md-ellipsis> Integrations </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__container"> <a href=../../deploy/00-intro/ class="md-nav__link "> <span class=md-ellipsis> Deployment </span> </a> <label class="md-nav__link " for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_2_1> <div class="md-nav__link md-nav__container"> <a href=../../deploy/XX-settings/ class="md-nav__link "> <span class=md-ellipsis> Settings </span> </a> <label class="md-nav__link " for=__nav_2_2_1 id=__nav_2_2_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> Settings </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../deploy/XX-custom-settings/ class=md-nav__link> <span class=md-ellipsis> Custom settings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../deploy/XX-auth/ class=md-nav__link> <span class=md-ellipsis> Authentication and authorization </span> </a> </li> <li class=md-nav__item> <a href=../../deploy/XX-i18n-l10/ class=md-nav__link> <span class=md-ellipsis> Translation and timezone </span> </a> </li> <li class=md-nav__item> <a href=../../deploy/XX-logs-traces/ class=md-nav__link> <span class=md-ellipsis> FireFighter Telemetry </span> </a> </li> <li class=md-nav__item> <a href=../../deploy/XX-tasks/ class=md-nav__link> <span class=md-ellipsis> Celery tasks </span> </a> </li> <li class=md-nav__item> <a href=../../deploy/XX-support-policy/ class=md-nav__link> <span class=md-ellipsis> Compatibility and Support Policy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../contributing/0000-README/ class="md-nav__link "> <span class=md-ellipsis> Development </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Local Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Local Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/0000-prerequisites/ class=md-nav__link> <span class=md-ellipsis> 0. Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/0001-setup-environment/ class=md-nav__link> <span class=md-ellipsis> 1. Setup environment & app </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/0002-setup-slack-app/ class=md-nav__link> <span class=md-ellipsis> 2. Configure Slack </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../contributing/development/ class=md-nav__link> <span class=md-ellipsis> Developper Guide & Tools </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Architecture & Design </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Architecture & Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/0010-general_architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/ui/ class=md-nav__link> <span class=md-ellipsis> UI Guidelines </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/ux/ class=md-nav__link> <span class=md-ellipsis> UX Guidelines </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/documentation/ class=md-nav__link> <span class=md-ellipsis> Docs Guidelines </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../contributing/faq/ class=md-nav__link> <span class=md-ellipsis> Developper FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1 checked> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Django Apps </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=true> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Django Apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../api/ class=md-nav__link> <span class=md-ellipsis> api </span> </a> </li> <li class=md-nav__item> <a href=../confluence/ class=md-nav__link> <span class=md-ellipsis> confluence </span> </a> </li> <li class=md-nav__item> <a href=../firefighter/ class=md-nav__link> <span class=md-ellipsis> firefighter </span> </a> </li> <li class=md-nav__item> <a href=../incidents/ class=md-nav__link> <span class=md-ellipsis> incidents </span> </a> </li> <li class=md-nav__item> <a href=../pagerduty/ class=md-nav__link> <span class=md-ellipsis> pagerduty </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> slack </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> slack </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#firefighter.slack.admin class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;admin </span> </a> <nav class=md-nav aria-label= admin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.admin.ConversationAdmin class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConversationAdmin </span> </a> <nav class=md-nav aria-label= ConversationAdmin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.admin.ConversationAdmin.get_queryset class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_queryset </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.admin.ask_key_timestamps class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;ask_key_timestamps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.factories class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;factories </span> </a> <nav class=md-nav aria-label= factories> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.factories.SlackProvider class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackProvider </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.forms class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;forms </span> </a> <nav class=md-nav aria-label= forms> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.forms.sos_form class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;sos_form </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;messages </span> </a> <nav class=md-nav aria-label= messages> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.base class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;base </span> </a> <nav class=md-nav aria-label= base> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageStrategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageStrategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageSurface </span> </a> <nav class=md-nav aria-label= SlackMessageSurface> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.strategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;strategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_blocks class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_blocks </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_metadata class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_metadata </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_text class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_text </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.post_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;post_message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_messages </span> </a> <nav class=md-nav aria-label= slack_messages> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageIncidentDeclaredAnnouncementGeneral </span> </a> <nav class=md-nav aria-label= SlackMessageIncidentDeclaredAnnouncementGeneral> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.strategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;strategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.get_metadata class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_metadata </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.post_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;post_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageIncidentRolesUpdated </span> </a> <nav class=md-nav aria-label= SlackMessageIncidentRolesUpdated> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.strategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;strategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.post_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;post_message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;models </span> </a> <nav class=md-nav aria-label= models> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;conversation </span> </a> <nav class=md-nav aria-label= conversation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Conversation </span> </a> <nav class=md-nav aria-label= Conversation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.deep_link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;deep_link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.add_bookmark class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_bookmark </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.send_message_and_save class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_and_save </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.send_message_ephemeral class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_ephemeral </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;incident_channel </span> </a> <nav class=md-nav aria-label= incident_channel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;IncidentChannel </span> </a> <nav class=md-nav aria-label= IncidentChannel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.deep_link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;deep_link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.add_bookmark class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_bookmark </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.invite_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;invite_users </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message_and_save class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_and_save </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message_ephemeral class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_ephemeral </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;message </span> </a> <nav class=md-nav aria-label= message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.message.Message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.sos class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;sos </span> </a> <nav class=md-nav aria-label= sos> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.sos.Sos class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Sos </span> </a> <nav class=md-nav aria-label= Sos> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.sos.Sos.usergroup_slack_fmt class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;usergroup_slack_fmt </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;user </span> </a> <nav class=md-nav aria-label= user> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUser class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackUser </span> </a> <nav class=md-nav aria-label= SlackUser> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUser.url class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;url </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUser.send_private_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_private_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackUserManager </span> </a> <nav class=md-nav aria-label= SlackUserManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager.get_user_by_slack_id class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_user_by_slack_id </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager.unpack_user_info class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unpack_user_info </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager.upsert_by_email class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;upsert_by_email </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;user_group </span> </a> <nav class=md-nav aria-label= user_group> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroup class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;UserGroup </span> </a> <nav class=md-nav aria-label= UserGroup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroup.link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;link </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroupManager class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;UserGroupManager </span> </a> <nav class=md-nav aria-label= UserGroupManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroupManager.fetch_all_usergroups_data class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fetch_all_usergroups_data </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroupManager.fetch_usergroup class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fetch_usergroup </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.rules class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;rules </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;signals </span> </a> <nav class=md-nav aria-label= signals> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.create_incident_conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;create_incident_conversation </span> </a> <nav class=md-nav aria-label= create_incident_conversation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.create_incident_conversation.create_incident_slack_conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;create_incident_slack_conversation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.get_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;get_users </span> </a> <nav class=md-nav aria-label= get_users> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.get_users.get_invites_from_slack class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_invites_from_slack </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.handle_incident_channel_done class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;handle_incident_channel_done </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.incident_closed class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;incident_closed </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.incident_updated class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;incident_updated </span> </a> <nav class=md-nav aria-label= incident_updated> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.incident_updated.publish_status_update class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;publish_status_update </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.postmortem_created class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;postmortem_created </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.roles_reminders class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;roles_reminders </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_app class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_app </span> </a> <nav class=md-nav aria-label= slack_app> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.slack_app.SlackApp class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackApp </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_app.slack_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;slack_client </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_incident_context </span> </a> <nav class=md-nav aria-label= slack_incident_context> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_app_home_element class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_app_home_element </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_command class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_body_channel_id_in_command </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_message_shortcut class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_body_channel_id_in_message_shortcut </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_button_value class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_button_value </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_context class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_context </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_action class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_view_action </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_submission_metadata class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_view_submission_metadata </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_submission_selected class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_view_submission_selected </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_user_from_context class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_user_from_context </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_templating </span> </a> <nav class=md-nav aria-label= slack_templating> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.date_time class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;date_time </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.md_quote_filter class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;md_quote_filter </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.shorten_long class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;shorten_long </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.user_slack_handle_or_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;user_slack_handle_or_name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;tasks </span> </a> <nav class=md-nav aria-label= tasks> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.fetch_conversations_members class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;fetch_conversations_members </span> </a> <nav class=md-nav aria-label= fetch_conversations_members> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;fetch_conversations_members_from_slack </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack_celery class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;fetch_conversations_members_from_slack_celery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.reminder_postmortem class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;reminder_postmortem </span> </a> <nav class=md-nav aria-label= reminder_postmortem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.reminder_postmortem.publish_postmortem_reminder class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;publish_postmortem_reminder </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;send_message </span> </a> <nav class=md-nav aria-label= send_message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_message.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;send_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_reminders class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;send_reminders </span> </a> <nav class=md-nav aria-label= send_reminders> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_reminders.slack_save_reminder_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;slack_save_reminder_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.sync_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;sync_users </span> </a> <nav class=md-nav aria-label= sync_users> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.sync_users.sync_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;sync_users </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_usergroups_members class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_usergroups_members </span> </a> <nav class=md-nav aria-label= update_usergroups_members> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_usergroups_members.update_usergroups_members_from_slack_celery class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;update_usergroups_members_from_slack_celery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_users </span> </a> <nav class=md-nav aria-label= update_users> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_users.update_users_from_slack class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;update_users_from_slack </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.urls class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;urls </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.utils class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;utils </span> </a> <nav class=md-nav aria-label= utils> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.utils.channel_name_from_incident class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;channel_name_from_incident </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.utils.get_slack_user_id_from_body class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_slack_user_id_from_body </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.utils.respond class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;respond </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;views </span> </a> <nav class=md-nav aria-label= views> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;events </span> </a> <nav class=md-nav aria-label= events> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.handle_message_events_ignore class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;handle_message_events_ignore </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.actions_and_shortcuts class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;actions_and_shortcuts </span> </a> <nav class=md-nav aria-label= actions_and_shortcuts> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.actions_and_shortcuts.open_link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;open_link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.actions_and_shortcuts.update_update_modal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;update_update_modal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_archive class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_archive </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_id_changed class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_id_changed </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_rename class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_rename </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_shared class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_shared </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_unarchive class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_unarchive </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_unshared class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_unshared </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.commands class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;commands </span> </a> <nav class=md-nav aria-label= commands> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.commands.SLACK_BUILTIN_COMMANDS class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;SLACK_BUILTIN_COMMANDS </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.commands.register_commands class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;register_commands </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.home class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;home </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_joined_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;member_joined_channel </span> </a> <nav class=md-nav aria-label= member_joined_channel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_joined_channel.member_joined_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;member_joined_channel </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_left_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;member_left_channel </span> </a> <nav class=md-nav aria-label= member_left_channel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_left_channel.member_left_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;member_left_channel </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;message </span> </a> <nav class=md-nav aria-label= message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.message.handle_message_events_ignore class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;handle_message_events_ignore </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.message_deleted class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;message_deleted </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.reaction_added class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;reaction_added </span> </a> <nav class=md-nav aria-label= reaction_added> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.reaction_added.reaction_added_ignore class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;reaction_added_ignore </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;modals </span> </a> <nav class=md-nav aria-label= modals> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;base_modal </span> </a> <nav class=md-nav aria-label= base_modal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;base </span> </a> <nav class=md-nav aria-label= base> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base.MessageForm class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MessageForm </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base.ModalForm class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ModalForm </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base.SlackModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackModal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;form_utils </span> </a> <nav class=md-nav aria-label= form_utils> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SafeOption class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SafeOption </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackForm class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackForm </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackFormJSONEncoder class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackFormJSONEncoder </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.slack_view_submission_to_dict class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;slack_view_submission_to_dict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.mixins class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;mixins </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.modal_utils class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;modal_utils </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.close class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;close </span> </a> <nav class=md-nav aria-label= close> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.close.CloseModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CloseModal </span> </a> <nav class=md-nav aria-label= CloseModal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.close.CloseModal.handle_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.downgrade_workflow class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;downgrade_workflow </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;key_event_message </span> </a> <nav class=md-nav aria-label= key_event_message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KeyEvents </span> </a> <nav class=md-nav aria-label= KeyEvents> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents.open_shortcut class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;open_shortcut </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents.handle_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;open </span> </a> <nav class=md-nav aria-label= open> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open.OpenModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;OpenModal </span> </a> <nav class=md-nav aria-label= OpenModal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open.OpenModal.get_details_modal_form_class class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_details_modal_form_class </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open.OpenModal.handle_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;opening </span> </a> <nav class=md-nav aria-label= opening> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.check_current_incidents class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;check_current_incidents </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.details class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;details </span> </a> <nav class=md-nav aria-label= details> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.details.critical class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;critical </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.select_impact class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;select_impact </span> </a> <nav class=md-nav aria-label= select_impact> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.select_impact.SelectImpactModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SelectImpactModal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.set_details class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;set_details </span> </a> <nav class=md-nav aria-label= set_details> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.set_details.SetIncidentDetails class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SetIncidentDetails </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.types class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.postmortem class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;postmortem </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.select class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;select </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.send_sos class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;send_sos </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.status class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;status </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;trigger_oncall </span> </a> <nav class=md-nav aria-label= trigger_oncall> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;OnCallModal </span> </a> <nav class=md-nav aria-label= OnCallModal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal.open_shortcut class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;open_shortcut </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal.build_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;build_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.update class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.update_roles class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_roles </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.update_status class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_status </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.views class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;views </span> </a> <nav class=md-nav aria-label= views> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.views.SlackEventsHandler class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackEventsHandler </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../jira_app/ class=md-nav__link> <span class=md-ellipsis> jira_app </span> </a> </li> <li class=md-nav__item> <a href=../raid/ class=md-nav__link> <span class=md-ellipsis> raid </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../logging/ class=md-nav__link> <span class=md-ellipsis> logging </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#firefighter.slack.admin class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;admin </span> </a> <nav class=md-nav aria-label= admin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.admin.ConversationAdmin class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConversationAdmin </span> </a> <nav class=md-nav aria-label= ConversationAdmin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.admin.ConversationAdmin.get_queryset class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_queryset </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.admin.ask_key_timestamps class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;ask_key_timestamps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.factories class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;factories </span> </a> <nav class=md-nav aria-label= factories> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.factories.SlackProvider class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackProvider </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.forms class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;forms </span> </a> <nav class=md-nav aria-label= forms> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.forms.sos_form class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;sos_form </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;messages </span> </a> <nav class=md-nav aria-label= messages> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.base class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;base </span> </a> <nav class=md-nav aria-label= base> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageStrategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageStrategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageSurface </span> </a> <nav class=md-nav aria-label= SlackMessageSurface> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.strategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;strategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_blocks class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_blocks </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_metadata class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_metadata </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_text class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_text </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.base.SlackMessageSurface.post_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;post_message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_messages </span> </a> <nav class=md-nav aria-label= slack_messages> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageIncidentDeclaredAnnouncementGeneral </span> </a> <nav class=md-nav aria-label= SlackMessageIncidentDeclaredAnnouncementGeneral> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.strategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;strategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.get_metadata class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_metadata </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.post_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;post_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackMessageIncidentRolesUpdated </span> </a> <nav class=md-nav aria-label= SlackMessageIncidentRolesUpdated> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.strategy class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;strategy </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.post_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;post_message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;models </span> </a> <nav class=md-nav aria-label= models> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;conversation </span> </a> <nav class=md-nav aria-label= conversation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Conversation </span> </a> <nav class=md-nav aria-label= Conversation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.deep_link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;deep_link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.add_bookmark class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_bookmark </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.send_message_and_save class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_and_save </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.conversation.Conversation.send_message_ephemeral class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_ephemeral </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;incident_channel </span> </a> <nav class=md-nav aria-label= incident_channel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;IncidentChannel </span> </a> <nav class=md-nav aria-label= IncidentChannel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.deep_link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;deep_link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.add_bookmark class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_bookmark </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.invite_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;invite_users </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message_and_save class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_and_save </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message_ephemeral class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_message_ephemeral </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;message </span> </a> <nav class=md-nav aria-label= message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.message.Message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.sos class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;sos </span> </a> <nav class=md-nav aria-label= sos> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.sos.Sos class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Sos </span> </a> <nav class=md-nav aria-label= Sos> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.sos.Sos.usergroup_slack_fmt class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;usergroup_slack_fmt </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;user </span> </a> <nav class=md-nav aria-label= user> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUser class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackUser </span> </a> <nav class=md-nav aria-label= SlackUser> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUser.url class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;url </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUser.send_private_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;send_private_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackUserManager </span> </a> <nav class=md-nav aria-label= SlackUserManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager.get_user_by_slack_id class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_user_by_slack_id </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager.unpack_user_info class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unpack_user_info </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user.SlackUserManager.upsert_by_email class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;upsert_by_email </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;user_group </span> </a> <nav class=md-nav aria-label= user_group> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroup class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;UserGroup </span> </a> <nav class=md-nav aria-label= UserGroup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroup.link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;link </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroupManager class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;UserGroupManager </span> </a> <nav class=md-nav aria-label= UserGroupManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroupManager.fetch_all_usergroups_data class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fetch_all_usergroups_data </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.models.user_group.UserGroupManager.fetch_usergroup class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fetch_usergroup </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.rules class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;rules </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;signals </span> </a> <nav class=md-nav aria-label= signals> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.create_incident_conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;create_incident_conversation </span> </a> <nav class=md-nav aria-label= create_incident_conversation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.create_incident_conversation.create_incident_slack_conversation class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;create_incident_slack_conversation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.get_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;get_users </span> </a> <nav class=md-nav aria-label= get_users> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.get_users.get_invites_from_slack class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_invites_from_slack </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.handle_incident_channel_done class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;handle_incident_channel_done </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.incident_closed class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;incident_closed </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.incident_updated class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;incident_updated </span> </a> <nav class=md-nav aria-label= incident_updated> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.signals.incident_updated.publish_status_update class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;publish_status_update </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.postmortem_created class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;postmortem_created </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.signals.roles_reminders class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;roles_reminders </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_app class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_app </span> </a> <nav class=md-nav aria-label= slack_app> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.slack_app.SlackApp class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackApp </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_app.slack_client class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;slack_client </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_incident_context </span> </a> <nav class=md-nav aria-label= slack_incident_context> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_app_home_element class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_app_home_element </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_command class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_body_channel_id_in_command </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_message_shortcut class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_body_channel_id_in_message_shortcut </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_button_value class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_button_value </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_context class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_context </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_action class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_view_action </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_submission_metadata class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_view_submission_metadata </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_submission_selected class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_incident_from_view_submission_selected </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_incident_context.get_user_from_context class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_user_from_context </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;slack_templating </span> </a> <nav class=md-nav aria-label= slack_templating> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.date_time class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;date_time </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.md_quote_filter class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;md_quote_filter </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.shorten_long class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;shorten_long </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.slack_templating.user_slack_handle_or_name class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;user_slack_handle_or_name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;tasks </span> </a> <nav class=md-nav aria-label= tasks> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.fetch_conversations_members class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;fetch_conversations_members </span> </a> <nav class=md-nav aria-label= fetch_conversations_members> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;fetch_conversations_members_from_slack </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack_celery class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;fetch_conversations_members_from_slack_celery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.reminder_postmortem class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;reminder_postmortem </span> </a> <nav class=md-nav aria-label= reminder_postmortem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.reminder_postmortem.publish_postmortem_reminder class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;publish_postmortem_reminder </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;send_message </span> </a> <nav class=md-nav aria-label= send_message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_message.send_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;send_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_reminders class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;send_reminders </span> </a> <nav class=md-nav aria-label= send_reminders> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.send_reminders.slack_save_reminder_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;slack_save_reminder_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.sync_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;sync_users </span> </a> <nav class=md-nav aria-label= sync_users> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.sync_users.sync_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;sync_users </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_usergroups_members class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_usergroups_members </span> </a> <nav class=md-nav aria-label= update_usergroups_members> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_usergroups_members.update_usergroups_members_from_slack_celery class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;update_usergroups_members_from_slack_celery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_users class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_users </span> </a> <nav class=md-nav aria-label= update_users> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.tasks.update_users.update_users_from_slack class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;update_users_from_slack </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.urls class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;urls </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.utils class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;utils </span> </a> <nav class=md-nav aria-label= utils> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.utils.channel_name_from_incident class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;channel_name_from_incident </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.utils.get_slack_user_id_from_body class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_slack_user_id_from_body </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.utils.respond class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;respond </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;views </span> </a> <nav class=md-nav aria-label= views> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;events </span> </a> <nav class=md-nav aria-label= events> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.handle_message_events_ignore class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;handle_message_events_ignore </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.actions_and_shortcuts class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;actions_and_shortcuts </span> </a> <nav class=md-nav aria-label= actions_and_shortcuts> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.actions_and_shortcuts.open_link class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;open_link </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.actions_and_shortcuts.update_update_modal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;update_update_modal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_archive class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_archive </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_id_changed class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_id_changed </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_rename class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_rename </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_shared class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_shared </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_unarchive class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_unarchive </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.channel_unshared class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;channel_unshared </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.commands class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;commands </span> </a> <nav class=md-nav aria-label= commands> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.commands.SLACK_BUILTIN_COMMANDS class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;SLACK_BUILTIN_COMMANDS </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.commands.register_commands class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;register_commands </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.home class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;home </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_joined_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;member_joined_channel </span> </a> <nav class=md-nav aria-label= member_joined_channel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_joined_channel.member_joined_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;member_joined_channel </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_left_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;member_left_channel </span> </a> <nav class=md-nav aria-label= member_left_channel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.member_left_channel.member_left_channel class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;member_left_channel </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;message </span> </a> <nav class=md-nav aria-label= message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.message.handle_message_events_ignore class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;handle_message_events_ignore </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.message_deleted class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;message_deleted </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.events.reaction_added class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;reaction_added </span> </a> <nav class=md-nav aria-label= reaction_added> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.events.reaction_added.reaction_added_ignore class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;reaction_added_ignore </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;modals </span> </a> <nav class=md-nav aria-label= modals> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;base_modal </span> </a> <nav class=md-nav aria-label= base_modal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;base </span> </a> <nav class=md-nav aria-label= base> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base.MessageForm class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MessageForm </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base.ModalForm class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ModalForm </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.base.SlackModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackModal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;form_utils </span> </a> <nav class=md-nav aria-label= form_utils> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SafeOption class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SafeOption </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackForm class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackForm </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackFormJSONEncoder class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackFormJSONEncoder </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.form_utils.slack_view_submission_to_dict class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;slack_view_submission_to_dict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.mixins class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;mixins </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.base_modal.modal_utils class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;modal_utils </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.close class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;close </span> </a> <nav class=md-nav aria-label= close> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.close.CloseModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CloseModal </span> </a> <nav class=md-nav aria-label= CloseModal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.close.CloseModal.handle_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.downgrade_workflow class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;downgrade_workflow </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;key_event_message </span> </a> <nav class=md-nav aria-label= key_event_message> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KeyEvents </span> </a> <nav class=md-nav aria-label= KeyEvents> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents.open_shortcut class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;open_shortcut </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents.handle_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;open </span> </a> <nav class=md-nav aria-label= open> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open.OpenModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;OpenModal </span> </a> <nav class=md-nav aria-label= OpenModal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open.OpenModal.get_details_modal_form_class class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_details_modal_form_class </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.open.OpenModal.handle_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;opening </span> </a> <nav class=md-nav aria-label= opening> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.check_current_incidents class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;check_current_incidents </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.details class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;details </span> </a> <nav class=md-nav aria-label= details> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.details.critical class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;critical </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.select_impact class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;select_impact </span> </a> <nav class=md-nav aria-label= select_impact> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.select_impact.SelectImpactModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SelectImpactModal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.set_details class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;set_details </span> </a> <nav class=md-nav aria-label= set_details> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.set_details.SetIncidentDetails class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SetIncidentDetails </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.opening.types class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.postmortem class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;postmortem </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.select class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;select </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.send_sos class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;send_sos </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.status class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;status </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;trigger_oncall </span> </a> <nav class=md-nav aria-label= trigger_oncall> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;OnCallModal </span> </a> <nav class=md-nav aria-label= OnCallModal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal.open_shortcut class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;open_shortcut </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal.build_modal_fn class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;build_modal_fn </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.update class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.update_roles class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_roles </span> </a> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.modals.update_status class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;update_status </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firefighter.slack.views.views class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;views </span> </a> <nav class=md-nav aria-label= views> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firefighter.slack.views.views.SlackEventsHandler class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SlackEventsHandler </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ManoManoTech/firefighter-incident/edit/main/docs/reference/slack.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/ManoManoTech/firefighter-incident/raw/main/docs/reference/slack.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <div class="doc doc-object doc-module"> <h1 id=firefighter.slack class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">slack</span> <a href=#firefighter.slack class=headerlink title="Permanent link">¤</a></h1> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.admin class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">admin</span> <a href=#firefighter.slack.admin class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h3 id=firefighter.slack.admin.ConversationAdmin class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">ConversationAdmin</span> <a href=#firefighter.slack.admin.ConversationAdmin class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.contrib.admin.ModelAdmin href=https://docs.djangoproject.com/en/4.2/ref/contrib/admin/#django.contrib.admin.ModelAdmin>ModelAdmin</a>[<a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a>]</code></p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.admin.ConversationAdmin.get_queryset class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_queryset</span> <a href=#firefighter.slack.admin.ConversationAdmin.get_queryset class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_queryset</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n><span title=django.http.request.HttpRequest>HttpRequest</span></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" title=django.db.models.query.QuerySet href=https://docs.djangoproject.com/en/4.2/ref/models/querysets/#django.db.models.query.QuerySet>QuerySet</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Restrict the queryset to only include conversations that are not IncidentChannels. Incident channels are managed in the IncidentChannelAdmin.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/admin.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-86 name=__codelineno-0-86></a><span class=k>def</span> <span class=nf>get_queryset</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>HttpRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]:</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Restrict the queryset to only include conversations that are not IncidentChannels. Incident channels are managed in the IncidentChannelAdmin.&quot;&quot;&quot;</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=n>qs</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>get_queryset</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=k>return</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>not_incident_channel</span><span class=p>(</span><span class=n>qs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.admin.ask_key_timestamps class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">ask_key_timestamps</span> <a href=#firefighter.slack.admin.ask_key_timestamps class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>ask_key_timestamps</span><span class=p>(</span><span class=bp>self</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.admin.IncidentAdmin href=../incidents/#firefighter.incidents.admin.IncidentAdmin>IncidentAdmin</a></span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n><span title=django.http.request.HttpRequest>HttpRequest</span></span><span class=p>,</span> <span class=n>queryset</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=django.db.models.query.QuerySet href=https://docs.djangoproject.com/en/4.2/ref/models/querysets/#django.db.models.query.QuerySet>QuerySet</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Will send a message to the Incident conversation (if it exists) to ask for key events. TODO Error handling.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/admin.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-332>332</a></span>
<span class=normal><a href=#__codelineno-0-333>333</a></span>
<span class=normal><a href=#__codelineno-0-334>334</a></span>
<span class=normal><a href=#__codelineno-0-335>335</a></span>
<span class=normal><a href=#__codelineno-0-336>336</a></span>
<span class=normal><a href=#__codelineno-0-337>337</a></span>
<span class=normal><a href=#__codelineno-0-338>338</a></span>
<span class=normal><a href=#__codelineno-0-339>339</a></span>
<span class=normal><a href=#__codelineno-0-340>340</a></span>
<span class=normal><a href=#__codelineno-0-341>341</a></span>
<span class=normal><a href=#__codelineno-0-342>342</a></span>
<span class=normal><a href=#__codelineno-0-343>343</a></span>
<span class=normal><a href=#__codelineno-0-344>344</a></span>
<span class=normal><a href=#__codelineno-0-345>345</a></span>
<span class=normal><a href=#__codelineno-0-346>346</a></span>
<span class=normal><a href=#__codelineno-0-347>347</a></span>
<span class=normal><a href=#__codelineno-0-348>348</a></span>
<span class=normal><a href=#__codelineno-0-349>349</a></span>
<span class=normal><a href=#__codelineno-0-350>350</a></span>
<span class=normal><a href=#__codelineno-0-351>351</a></span>
<span class=normal><a href=#__codelineno-0-352>352</a></span>
<span class=normal><a href=#__codelineno-0-353>353</a></span>
<span class=normal><a href=#__codelineno-0-354>354</a></span>
<span class=normal><a href=#__codelineno-0-355>355</a></span>
<span class=normal><a href=#__codelineno-0-356>356</a></span>
<span class=normal><a href=#__codelineno-0-357>357</a></span>
<span class=normal><a href=#__codelineno-0-358>358</a></span>
<span class=normal><a href=#__codelineno-0-359>359</a></span>
<span class=normal><a href=#__codelineno-0-360>360</a></span>
<span class=normal><a href=#__codelineno-0-361>361</a></span>
<span class=normal><a href=#__codelineno-0-362>362</a></span>
<span class=normal><a href=#__codelineno-0-363>363</a></span>
<span class=normal><a href=#__codelineno-0-364>364</a></span>
<span class=normal><a href=#__codelineno-0-365>365</a></span>
<span class=normal><a href=#__codelineno-0-366>366</a></span>
<span class=normal><a href=#__codelineno-0-367>367</a></span>
<span class=normal><a href=#__codelineno-0-368>368</a></span>
<span class=normal><a href=#__codelineno-0-369>369</a></span>
<span class=normal><a href=#__codelineno-0-370>370</a></span>
<span class=normal><a href=#__codelineno-0-371>371</a></span>
<span class=normal><a href=#__codelineno-0-372>372</a></span>
<span class=normal><a href=#__codelineno-0-373>373</a></span>
<span class=normal><a href=#__codelineno-0-374>374</a></span>
<span class=normal><a href=#__codelineno-0-375>375</a></span>
<span class=normal><a href=#__codelineno-0-376>376</a></span>
<span class=normal><a href=#__codelineno-0-377>377</a></span>
<span class=normal><a href=#__codelineno-0-378>378</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-332 name=__codelineno-0-332></a><span class=nd>@action</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=n>_</span><span class=p>(</span><span class=s2>&quot;Send a message to ask for key timestamps&quot;</span><span class=p>))</span>
<a id=__codelineno-0-333 name=__codelineno-0-333></a><span class=k>def</span> <span class=nf>ask_key_timestamps</span><span class=p>(</span>
<a id=__codelineno-0-334 name=__codelineno-0-334></a>    <span class=bp>self</span><span class=p>:</span> <span class=n>firefighter</span><span class=o>.</span><span class=n>incidents</span><span class=o>.</span><span class=n>admin</span><span class=o>.</span><span class=n>IncidentAdmin</span><span class=p>,</span>
<a id=__codelineno-0-335 name=__codelineno-0-335></a>    <span class=n>request</span><span class=p>:</span> <span class=n>HttpRequest</span><span class=p>,</span>
<a id=__codelineno-0-336 name=__codelineno-0-336></a>    <span class=n>queryset</span><span class=p>:</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>Incident</span><span class=p>],</span>
<a id=__codelineno-0-337 name=__codelineno-0-337></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-338 name=__codelineno-0-338></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Will send a message to the Incident conversation (if it exists) to ask for key events.</span>
<a id=__codelineno-0-339 name=__codelineno-0-339></a><span class=sd>    TODO Error handling.</span>
<a id=__codelineno-0-340 name=__codelineno-0-340></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-341 name=__codelineno-0-341></a>    <span class=c1># ruff: noqa: PLC0415</span>
<a id=__codelineno-0-342 name=__codelineno-0-342></a>    <span class=kn>from</span> <span class=nn>firefighter.slack.views.modals.key_event_message</span> <span class=kn>import</span> <span class=n>SlackMessageKeyEvents</span>
<a id=__codelineno-0-343 name=__codelineno-0-343></a>
<a id=__codelineno-0-344 name=__codelineno-0-344></a>    <span class=n>success</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>bool</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-345 name=__codelineno-0-345></a>    <span class=n>errors</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>bool</span><span class=p>,</span> <span class=ne>Exception</span> <span class=o>|</span> <span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-346 name=__codelineno-0-346></a>    <span class=k>for</span> <span class=n>incident</span> <span class=ow>in</span> <span class=n>queryset</span><span class=p>:</span>
<a id=__codelineno-0-347 name=__codelineno-0-347></a>        <span class=k>if</span> <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=p>:</span>
<a id=__codelineno-0-348 name=__codelineno-0-348></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-349 name=__codelineno-0-349></a>                <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-350 name=__codelineno-0-350></a>                    <span class=n>SlackMessageKeyEvents</span><span class=p>(</span><span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>)</span>
<a id=__codelineno-0-351 name=__codelineno-0-351></a>                <span class=p>)</span>
<a id=__codelineno-0-352 name=__codelineno-0-352></a>                <span class=n>success</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=kc>True</span><span class=p>))</span>
<a id=__codelineno-0-353 name=__codelineno-0-353></a>            <span class=k>except</span> <span class=n>SlackApiError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-354 name=__codelineno-0-354></a>                <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-355 name=__codelineno-0-355></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-356 name=__codelineno-0-356></a>            <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&quot;No conversation&quot;</span><span class=p>))</span>
<a id=__codelineno-0-357 name=__codelineno-0-357></a>
<a id=__codelineno-0-358 name=__codelineno-0-358></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>success</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-359 name=__codelineno-0-359></a>        <span class=n>success_str</span> <span class=o>=</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;#</span><span class=si>{</span><span class=n>key</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>success</span><span class=p>)</span>
<a id=__codelineno-0-360 name=__codelineno-0-360></a>        <span class=bp>self</span><span class=o>.</span><span class=n>message_user</span><span class=p>(</span>
<a id=__codelineno-0-361 name=__codelineno-0-361></a>            <span class=n>request</span><span class=p>,</span>
<a id=__codelineno-0-362 name=__codelineno-0-362></a>            <span class=n>ngettext</span><span class=p>(</span>
<a id=__codelineno-0-363 name=__codelineno-0-363></a>                <span class=sa>f</span><span class=s2>&quot;Sent message metrics for %d incident (</span><span class=si>{</span><span class=n>success_str</span><span class=si>}</span><span class=s2>).&quot;</span><span class=p>,</span>  <span class=c1># noqa: INT001</span>
<a id=__codelineno-0-364 name=__codelineno-0-364></a>                <span class=sa>f</span><span class=s2>&quot;Sent messages metrics for %d incidents (</span><span class=si>{</span><span class=n>success_str</span><span class=si>}</span><span class=s2>).&quot;</span><span class=p>,</span>
<a id=__codelineno-0-365 name=__codelineno-0-365></a>                <span class=nb>len</span><span class=p>(</span><span class=n>success</span><span class=p>),</span>
<a id=__codelineno-0-366 name=__codelineno-0-366></a>            <span class=p>)</span>
<a id=__codelineno-0-367 name=__codelineno-0-367></a>            <span class=o>%</span> <span class=nb>len</span><span class=p>(</span><span class=n>success</span><span class=p>),</span>
<a id=__codelineno-0-368 name=__codelineno-0-368></a>            <span class=n>constants</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span>
<a id=__codelineno-0-369 name=__codelineno-0-369></a>        <span class=p>)</span>
<a id=__codelineno-0-370 name=__codelineno-0-370></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>errors</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-371 name=__codelineno-0-371></a>        <span class=bp>self</span><span class=o>.</span><span class=n>message_user</span><span class=p>(</span>
<a id=__codelineno-0-372 name=__codelineno-0-372></a>            <span class=n>request</span><span class=p>,</span>
<a id=__codelineno-0-373 name=__codelineno-0-373></a>            <span class=n>format_html</span><span class=p>(</span>
<a id=__codelineno-0-374 name=__codelineno-0-374></a>                <span class=s2>&quot;Error sending message: &lt;br/&gt;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=p>,</span>
<a id=__codelineno-0-375 name=__codelineno-0-375></a>                <span class=s2>&quot;&lt;br/&gt;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;#</span><span class=si>{</span><span class=n>key</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>key</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>errors</span><span class=p>),</span>
<a id=__codelineno-0-376 name=__codelineno-0-376></a>            <span class=p>),</span>
<a id=__codelineno-0-377 name=__codelineno-0-377></a>            <span class=n>constants</span><span class=o>.</span><span class=n>ERROR</span><span class=p>,</span>
<a id=__codelineno-0-378 name=__codelineno-0-378></a>        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.factories class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">factories</span> <a href=#firefighter.slack.factories class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h3 id=firefighter.slack.factories.SlackProvider class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackProvider</span> <a href=#firefighter.slack.factories.SlackProvider class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=faker.providers.BaseProvider>BaseProvider</span></code></p> <p>Custom Faker provider for generating Slack IDs.</p> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.forms class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">forms</span> <a href=#firefighter.slack.forms class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.forms.sos_form class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">sos_form</span> <a href=#firefighter.slack.forms.sos_form class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.messages class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">messages</span> <a href=#firefighter.slack.messages class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.messages.base class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">base</span> <a href=#firefighter.slack.messages.base class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.messages.base.SlackMessageStrategy class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackMessageStrategy</span> <a href=#firefighter.slack.messages.base.SlackMessageStrategy class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=enum.Enum href=https://docs.python.org/3.11/library/enum.html#enum.Enum>Enum</a></code></p> <p>Define how should the message be posted.</p> <ul> <li><code>append</code>: add the message to the channel, even if a message with the same type has already been posted.</li> <li><code>replace</code>: replace the last message with the same type (push new one, delete old one)</li> <li><code>update</code>: update in place the last message with the same type</li> </ul> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.messages.base.SlackMessageSurface class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackMessageSurface</span> <a href=#firefighter.slack.messages.base.SlackMessageSurface class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SlackMessageSurface</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=abc.ABC href=https://docs.python.org/3.11/library/abc.html#abc.ABC>ABC</a></code></p> <p>Base class for Slack messages, which are sent to a channel or a user.</p> <p>This provides a common interface to send messages with text, blocks and metadata.</p> <p>This is helpful to send messages but also to save them in DB.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=s2>&quot;&quot;</span><span class=p>:</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;No Slack message ID set for </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>    <span class=c1># Check the ID is well-formed to be a Slack event_type: alphanumeric string, starting with a letter, containing underscore</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>    <span class=k>elif</span> <span class=ow>not</span> <span class=n>VALID_ID_REGEX</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>):</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>            <span class=sa>f</span><span class=s2>&quot;Slack message ID </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> is not well formed for </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>.&quot;</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.messages.base.SlackMessageSurface.strategy class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">strategy</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.messages.base.SlackMessageSurface.strategy class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>strategy</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageStrategy href=#firefighter.slack.messages.base.SlackMessageStrategy>SlackMessageStrategy</a></span> <span class=o>=</span> <span class=n><span title=firefighter.slack.messages.base.SlackMessageStrategy.APPEND>APPEND</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Alphanumeric ID, starting with a letter, that may contain underscores.</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.base.SlackMessageSurface.get_blocks class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_blocks</span> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_blocks class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_blocks</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><span title=slack_sdk.models.blocks.blocks.Block>Block</span></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the blocks of the message.</p> <p>Returns:</p> <ul> <li class=field-body> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a>[<span title=slack_sdk.models.blocks.blocks.Block>Block</span>]</code> – <div class=doc-md-description> <p>list[Block]: List of Slack Blocks for the message. Default is the text as a SectionBlock.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=k>def</span> <span class=nf>get_blocks</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Block</span><span class=p>]:</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the blocks of the message.</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>
<a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=sd>        list[Block]: List of Slack Blocks for the message. Default is the text as a SectionBlock.</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>    <span class=k>return</span> <span class=p>[</span><span class=n>SectionBlock</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>get_text</span><span class=p>())]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.base.SlackMessageSurface.get_metadata class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_metadata</span> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_metadata class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_metadata</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.models.metadata.Metadata>Metadata</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>The value of <code>event_type</code> should be an alphanumeric string, and human-readable. The value of this field may appear in the UI to developers, so keep this in mind when choosing a value. Developers should make an effort to name with the pattern <resource_name_singular> and <action_in_past_tense> See more <a href=https://api.slack.com/reference/metadata>https://api.slack.com/reference/metadata</a>.</p> <p>Returns:</p> <ul> <li class=field-body> <b><code>Metadata</code></b> ( <code><span title=slack_sdk.models.metadata.Metadata>Metadata</span></code> ) – <div class=doc-md-description> <p>Slack Metadata for the message.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=k>def</span> <span class=nf>get_metadata</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Metadata</span><span class=p>:</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;The value of `event_type` should be an alphanumeric string, and human-readable. The value of this field may appear in the UI to developers, so keep this in mind when choosing a value. Developers should make an effort to name with the pattern &lt;resource_name_singular&gt; and &lt;action_in_past_tense&gt;</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=sd>    See more https://api.slack.com/reference/metadata.</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>
<a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>        Metadata: Slack Metadata for the message.</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>    <span class=k>return</span> <span class=n>Metadata</span><span class=p>(</span><span class=n>event_type</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>event_payload</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;ff_type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>})</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.base.SlackMessageSurface.get_text class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_text</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> <a href=#firefighter.slack.messages.base.SlackMessageSurface.get_text class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_text</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the text of the message.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-67 name=__codelineno-0-67></a><span class=nd>@abstractmethod</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=k>def</span> <span class=nf>get_text</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the text of the message.&quot;&quot;&quot;</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=k>raise</span> <span class=ne>NotImplementedError</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.base.SlackMessageSurface.post_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">post_message</span> <a href=#firefighter.slack.messages.base.SlackMessageSurface.post_message class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>post_message</span><span class=p>(</span><span class=n>conversation_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Never href=https://docs.python.org/3.11/library/typing.html#typing.Never>Never</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Deprecated. Only use for Global Channel, until the global channel is set in DB.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=k>def</span> <span class=nf>post_message</span><span class=p>(</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=n>conversation_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Never</span><span class=p>,</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SlackResponse</span><span class=p>:</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated. Only use for Global Channel, until the global channel is set in DB.&quot;&quot;&quot;</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=k>return</span> <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>        <span class=n>channel</span><span class=o>=</span><span class=n>conversation_id</span><span class=p>,</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>get_slack_message_params</span><span class=p>(),</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.messages.slack_messages class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">slack_messages</span> <a href=#firefighter.slack.messages.slack_messages class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackMessageIncidentDeclaredAnnouncementGeneral</span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SlackMessageIncidentDeclaredAnnouncementGeneral</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></code></p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>incident</code></b> (<code><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></code>) – <div class=doc-md-description> <p>Your incident</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/slack_messages.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-260 name=__codelineno-0-260></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-261 name=__codelineno-0-261></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;The message to post in general incident channel (tag=tech_incidents) when an incident is opened.</span>
<a id=__codelineno-0-262 name=__codelineno-0-262></a>
<a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=sd>    Args:</span>
<a id=__codelineno-0-264 name=__codelineno-0-264></a><span class=sd>        incident (Incident): Your incident</span>
<a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-266 name=__codelineno-0-266></a>    <span class=bp>self</span><span class=o>.</span><span class=n>incident</span> <span class=o>=</span> <span class=n>incident</span>
<a id=__codelineno-0-267 name=__codelineno-0-267></a>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.strategy class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">strategy</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.strategy class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>strategy</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageStrategy href=#firefighter.slack.messages.base.SlackMessageStrategy>SlackMessageStrategy</a></span> <span class=o>=</span> <span class=n><span title=firefighter.slack.messages.base.SlackMessageStrategy.APPEND>APPEND</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Alphanumeric ID, starting with a letter, that may contain underscores.</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.get_metadata class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_metadata</span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.get_metadata class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_metadata</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.models.metadata.Metadata>Metadata</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>The value of <code>event_type</code> should be an alphanumeric string, and human-readable. The value of this field may appear in the UI to developers, so keep this in mind when choosing a value. Developers should make an effort to name with the pattern <resource_name_singular> and <action_in_past_tense> See more <a href=https://api.slack.com/reference/metadata>https://api.slack.com/reference/metadata</a>.</p> <p>Returns:</p> <ul> <li class=field-body> <b><code>Metadata</code></b> ( <code><span title=slack_sdk.models.metadata.Metadata>Metadata</span></code> ) – <div class=doc-md-description> <p>Slack Metadata for the message.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=k>def</span> <span class=nf>get_metadata</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Metadata</span><span class=p>:</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;The value of `event_type` should be an alphanumeric string, and human-readable. The value of this field may appear in the UI to developers, so keep this in mind when choosing a value. Developers should make an effort to name with the pattern &lt;resource_name_singular&gt; and &lt;action_in_past_tense&gt;</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=sd>    See more https://api.slack.com/reference/metadata.</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>
<a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>        Metadata: Slack Metadata for the message.</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>    <span class=k>return</span> <span class=n>Metadata</span><span class=p>(</span><span class=n>event_type</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>event_payload</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;ff_type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>})</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.post_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">post_message</span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentDeclaredAnnouncementGeneral.post_message class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>post_message</span><span class=p>(</span><span class=n>conversation_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Never href=https://docs.python.org/3.11/library/typing.html#typing.Never>Never</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Deprecated. Only use for Global Channel, until the global channel is set in DB.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=k>def</span> <span class=nf>post_message</span><span class=p>(</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=n>conversation_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Never</span><span class=p>,</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SlackResponse</span><span class=p>:</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated. Only use for Global Channel, until the global channel is set in DB.&quot;&quot;&quot;</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=k>return</span> <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>        <span class=n>channel</span><span class=o>=</span><span class=n>conversation_id</span><span class=p>,</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>get_slack_message_params</span><span class=p>(),</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackMessageIncidentRolesUpdated</span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SlackMessageIncidentRolesUpdated</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=n>incident_update</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident_update.IncidentUpdate href=../incidents/#firefighter.incidents.models.incident_update.IncidentUpdate>IncidentUpdate</a></span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>first_update</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=n>updated_fields</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></code></p> <p>The message to post in the incident channel when the roles are updated.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>incident</code></b> (<code><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></code>) – <div class=doc-md-description> <p>Your incident.</p> </div> </li> <li class=field-body> <b><code>incident_update</code></b> (<code><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident_update.IncidentUpdate href=../incidents/#firefighter.incidents.models.incident_update.IncidentUpdate>IncidentUpdate</a></code>) – <div class=doc-md-description> <p>The opening incident update.</p> </div> </li> <li class=field-body> <b><code>first_update</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></code>, default: <code>False</code> ) – <div class=doc-md-description> <p>Whether this is the first update of the incident. Defaults to False.</p> </div> </li> <li class=field-body> <b><code>updated_fields</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a>[<a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a>]</code>, default: <code>None</code> ) – <div class=doc-md-description> <p>The fields that were updated. Defaults to None.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/slack_messages.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-314 name=__codelineno-0-314></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
<a id=__codelineno-0-315 name=__codelineno-0-315></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-316 name=__codelineno-0-316></a>    <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span>
<a id=__codelineno-0-317 name=__codelineno-0-317></a>    <span class=n>incident_update</span><span class=p>:</span> <span class=n>IncidentUpdate</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-318 name=__codelineno-0-318></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-319 name=__codelineno-0-319></a>    <span class=n>first_update</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-320 name=__codelineno-0-320></a>    <span class=n>updated_fields</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-321 name=__codelineno-0-321></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-322 name=__codelineno-0-322></a>    <span class=bp>self</span><span class=o>.</span><span class=n>incident</span> <span class=o>=</span> <span class=n>incident</span>
<a id=__codelineno-0-323 name=__codelineno-0-323></a>    <span class=bp>self</span><span class=o>.</span><span class=n>incident_update</span> <span class=o>=</span> <span class=n>incident_update</span>
<a id=__codelineno-0-324 name=__codelineno-0-324></a>    <span class=bp>self</span><span class=o>.</span><span class=n>first_update</span> <span class=o>=</span> <span class=n>first_update</span>
<a id=__codelineno-0-325 name=__codelineno-0-325></a>    <span class=bp>self</span><span class=o>.</span><span class=n>updated_fields</span> <span class=o>=</span> <span class=n>updated_fields</span>
<a id=__codelineno-0-326 name=__codelineno-0-326></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_new_roles</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_updated_roles</span><span class=p>()</span>
<a id=__codelineno-0-327 name=__codelineno-0-327></a>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.strategy class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">strategy</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.strategy class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>strategy</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageStrategy href=#firefighter.slack.messages.base.SlackMessageStrategy>SlackMessageStrategy</a></span> <span class=o>=</span> <span class=n><span title=firefighter.slack.messages.base.SlackMessageStrategy.APPEND>APPEND</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Alphanumeric ID, starting with a letter, that may contain underscores.</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.post_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">post_message</span> <a href=#firefighter.slack.messages.slack_messages.SlackMessageIncidentRolesUpdated.post_message class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>post_message</span><span class=p>(</span><span class=n>conversation_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Never href=https://docs.python.org/3.11/library/typing.html#typing.Never>Never</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Deprecated. Only use for Global Channel, until the global channel is set in DB.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/messages/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=k>def</span> <span class=nf>post_message</span><span class=p>(</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=n>conversation_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Never</span><span class=p>,</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SlackResponse</span><span class=p>:</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated. Only use for Global Channel, until the global channel is set in DB.&quot;&quot;&quot;</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=k>return</span> <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>        <span class=n>channel</span><span class=o>=</span><span class=n>conversation_id</span><span class=p>,</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>get_slack_message_params</span><span class=p>(),</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.models class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">models</span> <a href=#firefighter.slack.models class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.models.conversation class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">conversation</span> <a href=#firefighter.slack.models.conversation class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.conversation.Conversation class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">Conversation</span> <a href=#firefighter.slack.models.conversation.Conversation class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Model href=https://docs.djangoproject.com/en/4.2/ref/models/instances/#django.db.models.Model>Model</a></code></p> <p>Model a Slack API Conversation. A Slack Conversation can be a public channel, a private channel, a direct message, or a multi-person direct message. Reference: <a href=https://api.slack.com/types/conversation>https://api.slack.com/types/conversation</a>.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.conversation.Conversation.deep_link class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">deep_link</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.conversation.Conversation.deep_link class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>deep_link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Deep link (<code>slack://</code>) to the conversation in the Slack client.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.conversation.Conversation.link class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">link</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.conversation.Conversation.link class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Regular HTTPS link to the conversation through Slack.com.</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.conversation.Conversation.add_bookmark class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">add_bookmark</span> <a href=#firefighter.slack.models.conversation.Conversation.add_bookmark class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>add_bookmark</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>title</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>_type</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>=</span> <span class=s2>&quot;link&quot;</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>emoji</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>entity_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>parent_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to add a bookmark on this conversation.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-400>400</a></span>
<span class=normal><a href=#__codelineno-0-401>401</a></span>
<span class=normal><a href=#__codelineno-0-402>402</a></span>
<span class=normal><a href=#__codelineno-0-403>403</a></span>
<span class=normal><a href=#__codelineno-0-404>404</a></span>
<span class=normal><a href=#__codelineno-0-405>405</a></span>
<span class=normal><a href=#__codelineno-0-406>406</a></span>
<span class=normal><a href=#__codelineno-0-407>407</a></span>
<span class=normal><a href=#__codelineno-0-408>408</a></span>
<span class=normal><a href=#__codelineno-0-409>409</a></span>
<span class=normal><a href=#__codelineno-0-410>410</a></span>
<span class=normal><a href=#__codelineno-0-411>411</a></span>
<span class=normal><a href=#__codelineno-0-412>412</a></span>
<span class=normal><a href=#__codelineno-0-413>413</a></span>
<span class=normal><a href=#__codelineno-0-414>414</a></span>
<span class=normal><a href=#__codelineno-0-415>415</a></span>
<span class=normal><a href=#__codelineno-0-416>416</a></span>
<span class=normal><a href=#__codelineno-0-417>417</a></span>
<span class=normal><a href=#__codelineno-0-418>418</a></span>
<span class=normal><a href=#__codelineno-0-419>419</a></span>
<span class=normal><a href=#__codelineno-0-420>420</a></span>
<span class=normal><a href=#__codelineno-0-421>421</a></span>
<span class=normal><a href=#__codelineno-0-422>422</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-400 name=__codelineno-0-400></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-401 name=__codelineno-0-401></a><span class=k>def</span> <span class=nf>add_bookmark</span><span class=p>(</span>
<a id=__codelineno-0-402 name=__codelineno-0-402></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-403 name=__codelineno-0-403></a>    <span class=n>title</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-404 name=__codelineno-0-404></a>    <span class=n>_type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;link&quot;</span><span class=p>,</span>
<a id=__codelineno-0-405 name=__codelineno-0-405></a>    <span class=n>emoji</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-406 name=__codelineno-0-406></a>    <span class=n>entity_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-407 name=__codelineno-0-407></a>    <span class=n>link</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># include when type is &#39;link&#39;</span>
<a id=__codelineno-0-408 name=__codelineno-0-408></a>    <span class=n>parent_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-409 name=__codelineno-0-409></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-410 name=__codelineno-0-410></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-411 name=__codelineno-0-411></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-412 name=__codelineno-0-412></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to add a bookmark on this conversation.&quot;&quot;&quot;</span>
<a id=__codelineno-0-413 name=__codelineno-0-413></a>    <span class=n>client</span><span class=o>.</span><span class=n>bookmarks_add</span><span class=p>(</span>
<a id=__codelineno-0-414 name=__codelineno-0-414></a>        <span class=n>channel_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span>
<a id=__codelineno-0-415 name=__codelineno-0-415></a>        <span class=n>title</span><span class=o>=</span><span class=n>title</span><span class=p>,</span>
<a id=__codelineno-0-416 name=__codelineno-0-416></a>        <span class=n>link</span><span class=o>=</span><span class=n>link</span><span class=p>,</span>
<a id=__codelineno-0-417 name=__codelineno-0-417></a>        <span class=n>emoji</span><span class=o>=</span><span class=n>emoji</span><span class=p>,</span>
<a id=__codelineno-0-418 name=__codelineno-0-418></a>        <span class=nb>type</span><span class=o>=</span><span class=n>_type</span><span class=p>,</span>
<a id=__codelineno-0-419 name=__codelineno-0-419></a>        <span class=n>entity_id</span><span class=o>=</span><span class=n>entity_id</span><span class=p>,</span>
<a id=__codelineno-0-420 name=__codelineno-0-420></a>        <span class=n>parent_id</span><span class=o>=</span><span class=n>parent_id</span><span class=p>,</span>
<a id=__codelineno-0-421 name=__codelineno-0-421></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
<a id=__codelineno-0-422 name=__codelineno-0-422></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.conversation.Conversation.send_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_message</span> <a href=#firefighter.slack.models.conversation.Conversation.send_message class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>text</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>blocks</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=collections.abc.Sequence href=https://docs.python.org/3.11/library/collections.abc.html#collections.abc.Sequence>Sequence</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=n><span title=slack_sdk.models.blocks.blocks.Block>Block</span></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to send a message on this conversation.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-248 name=__codelineno-0-248></a><span class=k>def</span> <span class=nf>send_message</span><span class=p>(</span>
<a id=__codelineno-0-249 name=__codelineno-0-249></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-250 name=__codelineno-0-250></a>    <span class=n>text</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-251 name=__codelineno-0-251></a>    <span class=n>blocks</span><span class=p>:</span> <span class=n>Sequence</span><span class=p>[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=n>Block</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-252 name=__codelineno-0-252></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-253 name=__codelineno-0-253></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-254 name=__codelineno-0-254></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-255 name=__codelineno-0-255></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to send a message on this conversation.&quot;&quot;&quot;</span>
<a id=__codelineno-0-256 name=__codelineno-0-256></a>    <span class=k>if</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;channel&quot;</span><span class=p>):</span>
<a id=__codelineno-0-257 name=__codelineno-0-257></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-258 name=__codelineno-0-258></a>            <span class=s2>&quot;You can&#39;t set the channel when using send_message on a conversation!&quot;</span>
<a id=__codelineno-0-259 name=__codelineno-0-259></a>        <span class=p>)</span>
<a id=__codelineno-0-260 name=__codelineno-0-260></a>
<a id=__codelineno-0-261 name=__codelineno-0-261></a>    <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-262 name=__codelineno-0-262></a>        <span class=n>channel</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=n>text</span><span class=p>,</span> <span class=n>blocks</span><span class=o>=</span><span class=n>blocks</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
<a id=__codelineno-0-263 name=__codelineno-0-263></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.conversation.Conversation.send_message_and_save class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_message_and_save</span> <a href=#firefighter.slack.models.conversation.Conversation.send_message_and_save class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>message</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>strategy</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageStrategy href=#firefighter.slack.messages.base.SlackMessageStrategy>SlackMessageStrategy</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>strategy_args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>pin</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to send a message on this conversation.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-284 name=__codelineno-0-284></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-285 name=__codelineno-0-285></a><span class=k>def</span> <span class=nf>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-286 name=__codelineno-0-286></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-287 name=__codelineno-0-287></a>    <span class=n>message</span><span class=p>:</span> <span class=n>SlackMessageSurface</span><span class=p>,</span>
<a id=__codelineno-0-288 name=__codelineno-0-288></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-289 name=__codelineno-0-289></a>    <span class=n>strategy</span><span class=p>:</span> <span class=n>SlackMessageStrategy</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-290 name=__codelineno-0-290></a>    <span class=n>strategy_args</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-291 name=__codelineno-0-291></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-292 name=__codelineno-0-292></a>    <span class=n>pin</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-293 name=__codelineno-0-293></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SlackResponse</span><span class=p>:</span>
<a id=__codelineno-0-294 name=__codelineno-0-294></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to send a message on this conversation.&quot;&quot;&quot;</span>
<a id=__codelineno-0-295 name=__codelineno-0-295></a>    <span class=k>if</span> <span class=n>strategy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-296 name=__codelineno-0-296></a>        <span class=n>strategy</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>strategy</span>
<a id=__codelineno-0-297 name=__codelineno-0-297></a>
<a id=__codelineno-0-298 name=__codelineno-0-298></a>    <span class=n>kwargs</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-299 name=__codelineno-0-299></a>    <span class=c1># XXX Get save context?</span>
<a id=__codelineno-0-300 name=__codelineno-0-300></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=s2>&quot;incident&quot;</span><span class=p>):</span>
<a id=__codelineno-0-301 name=__codelineno-0-301></a>        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;incident&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>incident</span>
<a id=__codelineno-0-302 name=__codelineno-0-302></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=s2>&quot;incident_update&quot;</span><span class=p>):</span>
<a id=__codelineno-0-303 name=__codelineno-0-303></a>        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;incident_update&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>incident_update</span>
<a id=__codelineno-0-304 name=__codelineno-0-304></a>    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;ff_type&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>id</span>
<a id=__codelineno-0-305 name=__codelineno-0-305></a>    <span class=k>if</span> <span class=n>strategy</span> <span class=o>==</span> <span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>APPEND</span><span class=p>:</span>
<a id=__codelineno-0-306 name=__codelineno-0-306></a>        <span class=n>strategy_res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_message_strategy_append</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-0-307 name=__codelineno-0-307></a>    <span class=k>elif</span> <span class=n>strategy</span> <span class=o>==</span> <span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>UPDATE</span><span class=p>:</span>
<a id=__codelineno-0-308 name=__codelineno-0-308></a>        <span class=n>strategy_res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_message_strategy_update</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-0-309 name=__codelineno-0-309></a>    <span class=k>elif</span> <span class=n>strategy</span> <span class=o>==</span> <span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>REPLACE</span><span class=p>:</span>
<a id=__codelineno-0-310 name=__codelineno-0-310></a>        <span class=n>strategy_res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_message_strategy_replace</span><span class=p>(</span>
<a id=__codelineno-0-311 name=__codelineno-0-311></a>            <span class=n>message</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>strategy_args</span><span class=p>,</span> <span class=n>kwargs</span>
<a id=__codelineno-0-312 name=__codelineno-0-312></a>        <span class=p>)</span>
<a id=__codelineno-0-313 name=__codelineno-0-313></a>    <span class=k>if</span> <span class=n>pin</span><span class=p>:</span>
<a id=__codelineno-0-314 name=__codelineno-0-314></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_pin_message</span><span class=p>(</span>
<a id=__codelineno-0-315 name=__codelineno-0-315></a>            <span class=n>res</span><span class=o>=</span><span class=n>strategy_res</span><span class=p>,</span>
<a id=__codelineno-0-316 name=__codelineno-0-316></a>            <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span>
<a id=__codelineno-0-317 name=__codelineno-0-317></a>        <span class=p>)</span>
<a id=__codelineno-0-318 name=__codelineno-0-318></a>    <span class=k>return</span> <span class=n>strategy_res</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.conversation.Conversation.send_message_ephemeral class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_message_ephemeral</span> <a href=#firefighter.slack.models.conversation.Conversation.send_message_ephemeral class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message_ephemeral</span><span class=p>(</span><span class=n>message</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.user.SlackUser href=#firefighter.slack.models.user.SlackUser>SlackUser</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to send an ephemeral message on this conversation. <code>user</code>, <code>channel</code>, <code>blocks</code>, <code>text</code> and <code>metadata</code> should not be passed in kwargs.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=k>def</span> <span class=nf>send_message_ephemeral</span><span class=p>(</span>
<a id=__codelineno-0-267 name=__codelineno-0-267></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-268 name=__codelineno-0-268></a>    <span class=n>message</span><span class=p>:</span> <span class=n>SlackMessageSurface</span><span class=p>,</span>
<a id=__codelineno-0-269 name=__codelineno-0-269></a>    <span class=n>user</span><span class=p>:</span> <span class=n>SlackUser</span> <span class=o>|</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-270 name=__codelineno-0-270></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-271 name=__codelineno-0-271></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-272 name=__codelineno-0-272></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-273 name=__codelineno-0-273></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to send an ephemeral message on this conversation.</span>
<a id=__codelineno-0-274 name=__codelineno-0-274></a><span class=sd>    `user`, `channel`, `blocks`, `text` and `metadata` should not be passed in kwargs.</span>
<a id=__codelineno-0-275 name=__codelineno-0-275></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-276 name=__codelineno-0-276></a>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>user</span><span class=o>.</span><span class=n>slack_id</span> <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>user</span><span class=p>,</span> <span class=n>SlackUser</span><span class=p>)</span> <span class=k>else</span> <span class=n>user</span>
<a id=__codelineno-0-277 name=__codelineno-0-277></a>
<a id=__codelineno-0-278 name=__codelineno-0-278></a>    <span class=n>client</span><span class=o>.</span><span class=n>chat_postEphemeral</span><span class=p>(</span>
<a id=__codelineno-0-279 name=__codelineno-0-279></a>        <span class=n>user</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
<a id=__codelineno-0-280 name=__codelineno-0-280></a>        <span class=n>channel</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span>
<a id=__codelineno-0-281 name=__codelineno-0-281></a>        <span class=o>**</span><span class=p>(</span><span class=n>kwargs</span> <span class=o>|</span> <span class=n>message</span><span class=o>.</span><span class=n>get_slack_message_params</span><span class=p>()),</span>
<a id=__codelineno-0-282 name=__codelineno-0-282></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.models.incident_channel class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">incident_channel</span> <a href=#firefighter.slack.models.incident_channel class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.incident_channel.IncidentChannel class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">IncidentChannel</span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a></code></p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.deep_link class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">deep_link</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.deep_link class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>deep_link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Deep link (<code>slack://</code>) to the conversation in the Slack client.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.link class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">link</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.link class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Regular HTTPS link to the conversation through Slack.com.</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.add_bookmark class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">add_bookmark</span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.add_bookmark class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>add_bookmark</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>title</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>_type</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>=</span> <span class=s2>&quot;link&quot;</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>emoji</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>entity_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>parent_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to add a bookmark on this conversation.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-400>400</a></span>
<span class=normal><a href=#__codelineno-0-401>401</a></span>
<span class=normal><a href=#__codelineno-0-402>402</a></span>
<span class=normal><a href=#__codelineno-0-403>403</a></span>
<span class=normal><a href=#__codelineno-0-404>404</a></span>
<span class=normal><a href=#__codelineno-0-405>405</a></span>
<span class=normal><a href=#__codelineno-0-406>406</a></span>
<span class=normal><a href=#__codelineno-0-407>407</a></span>
<span class=normal><a href=#__codelineno-0-408>408</a></span>
<span class=normal><a href=#__codelineno-0-409>409</a></span>
<span class=normal><a href=#__codelineno-0-410>410</a></span>
<span class=normal><a href=#__codelineno-0-411>411</a></span>
<span class=normal><a href=#__codelineno-0-412>412</a></span>
<span class=normal><a href=#__codelineno-0-413>413</a></span>
<span class=normal><a href=#__codelineno-0-414>414</a></span>
<span class=normal><a href=#__codelineno-0-415>415</a></span>
<span class=normal><a href=#__codelineno-0-416>416</a></span>
<span class=normal><a href=#__codelineno-0-417>417</a></span>
<span class=normal><a href=#__codelineno-0-418>418</a></span>
<span class=normal><a href=#__codelineno-0-419>419</a></span>
<span class=normal><a href=#__codelineno-0-420>420</a></span>
<span class=normal><a href=#__codelineno-0-421>421</a></span>
<span class=normal><a href=#__codelineno-0-422>422</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-400 name=__codelineno-0-400></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-401 name=__codelineno-0-401></a><span class=k>def</span> <span class=nf>add_bookmark</span><span class=p>(</span>
<a id=__codelineno-0-402 name=__codelineno-0-402></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-403 name=__codelineno-0-403></a>    <span class=n>title</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-404 name=__codelineno-0-404></a>    <span class=n>_type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;link&quot;</span><span class=p>,</span>
<a id=__codelineno-0-405 name=__codelineno-0-405></a>    <span class=n>emoji</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-406 name=__codelineno-0-406></a>    <span class=n>entity_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-407 name=__codelineno-0-407></a>    <span class=n>link</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># include when type is &#39;link&#39;</span>
<a id=__codelineno-0-408 name=__codelineno-0-408></a>    <span class=n>parent_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-409 name=__codelineno-0-409></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-410 name=__codelineno-0-410></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-411 name=__codelineno-0-411></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-412 name=__codelineno-0-412></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to add a bookmark on this conversation.&quot;&quot;&quot;</span>
<a id=__codelineno-0-413 name=__codelineno-0-413></a>    <span class=n>client</span><span class=o>.</span><span class=n>bookmarks_add</span><span class=p>(</span>
<a id=__codelineno-0-414 name=__codelineno-0-414></a>        <span class=n>channel_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span>
<a id=__codelineno-0-415 name=__codelineno-0-415></a>        <span class=n>title</span><span class=o>=</span><span class=n>title</span><span class=p>,</span>
<a id=__codelineno-0-416 name=__codelineno-0-416></a>        <span class=n>link</span><span class=o>=</span><span class=n>link</span><span class=p>,</span>
<a id=__codelineno-0-417 name=__codelineno-0-417></a>        <span class=n>emoji</span><span class=o>=</span><span class=n>emoji</span><span class=p>,</span>
<a id=__codelineno-0-418 name=__codelineno-0-418></a>        <span class=nb>type</span><span class=o>=</span><span class=n>_type</span><span class=p>,</span>
<a id=__codelineno-0-419 name=__codelineno-0-419></a>        <span class=n>entity_id</span><span class=o>=</span><span class=n>entity_id</span><span class=p>,</span>
<a id=__codelineno-0-420 name=__codelineno-0-420></a>        <span class=n>parent_id</span><span class=o>=</span><span class=n>parent_id</span><span class=p>,</span>
<a id=__codelineno-0-421 name=__codelineno-0-421></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
<a id=__codelineno-0-422 name=__codelineno-0-422></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.invite_users class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">invite_users</span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.invite_users class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>invite_users</span><span class=p>(</span><span class=n>users_mapped</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span><span class=p>],</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Invite users to the conversation, if they have a Slack user linked and are active.</p> <p>Try to invite all users as batch, but if some fail, continue individually.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/incident_channel.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=k>def</span> <span class=nf>invite_users</span><span class=p>(</span>
<a id=__codelineno-0-115 name=__codelineno-0-115></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>users_mapped</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>User</span><span class=p>],</span> <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span>
<a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Invite users to the conversation, if they have a Slack user linked and are active.</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a>
<a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=sd>    Try to invite all users as batch, but if some fail, continue individually.</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=n>users_with_slack</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>User</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_active_slack_users</span><span class=p>(</span><span class=n>users_mapped</span><span class=p>)</span>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>    <span class=n>users_with_slack</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>users_with_slack</span><span class=p>))</span>  <span class=c1># Remove duplicates</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=n>user_id_list</span><span class=p>:</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_slack_id_list</span><span class=p>(</span><span class=n>users_with_slack</span><span class=p>)</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>user_id_list</span><span class=p>:</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;No users to invite to the conversation </span><span class=si>{</span><span class=bp>self</span><span class=si>}</span><span class=s2>.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=k>return</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Inviting users with SlackIDs: </span><span class=si>{</span><span class=n>user_id_list</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>    <span class=n>invited_slack_user_ids</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_invite_users_to_conversation</span><span class=p>(</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=n>user_id_list</span><span class=p>,</span> <span class=n>client</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>    <span class=p>)</span>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=n>invited_users</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>        <span class=n>u</span>
<a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=k>for</span> <span class=n>u</span> <span class=ow>in</span> <span class=n>users_with_slack</span>
<a id=__codelineno-0-137 name=__codelineno-0-137></a>        <span class=k>if</span> <span class=n>u</span><span class=o>.</span><span class=n>slack_user</span> <span class=ow>and</span> <span class=n>u</span><span class=o>.</span><span class=n>slack_user</span><span class=o>.</span><span class=n>slack_id</span> <span class=ow>in</span> <span class=n>invited_slack_user_ids</span>
<a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=p>}</span>
<a id=__codelineno-0-139 name=__codelineno-0-139></a>
<a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=k>if</span> <span class=n>invited_slack_user_ids</span> <span class=o>!=</span> <span class=nb>set</span><span class=p>(</span><span class=n>user_id_list</span><span class=p>):</span>
<a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-142 name=__codelineno-0-142></a>            <span class=sa>f</span><span class=s2>&quot;Could not invite all users to the conversation </span><span class=si>{</span><span class=bp>self</span><span class=si>}</span><span class=s2>. Missing users: </span><span class=si>{</span><span class=n>user_id_list</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>invited_slack_user_ids</span><span class=w> </span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=p>)</span>
<a id=__codelineno-0-144 name=__codelineno-0-144></a>
<a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=bp>self</span><span class=o>.</span><span class=n>incident</span><span class=o>.</span><span class=n>members</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=o>*</span><span class=n>invited_users</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.send_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_message</span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>text</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>blocks</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=collections.abc.Sequence href=https://docs.python.org/3.11/library/collections.abc.html#collections.abc.Sequence>Sequence</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=n><span title=slack_sdk.models.blocks.blocks.Block>Block</span></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to send a message on this conversation.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-248 name=__codelineno-0-248></a><span class=k>def</span> <span class=nf>send_message</span><span class=p>(</span>
<a id=__codelineno-0-249 name=__codelineno-0-249></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-250 name=__codelineno-0-250></a>    <span class=n>text</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-251 name=__codelineno-0-251></a>    <span class=n>blocks</span><span class=p>:</span> <span class=n>Sequence</span><span class=p>[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=n>Block</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-252 name=__codelineno-0-252></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-253 name=__codelineno-0-253></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-254 name=__codelineno-0-254></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-255 name=__codelineno-0-255></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to send a message on this conversation.&quot;&quot;&quot;</span>
<a id=__codelineno-0-256 name=__codelineno-0-256></a>    <span class=k>if</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;channel&quot;</span><span class=p>):</span>
<a id=__codelineno-0-257 name=__codelineno-0-257></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-258 name=__codelineno-0-258></a>            <span class=s2>&quot;You can&#39;t set the channel when using send_message on a conversation!&quot;</span>
<a id=__codelineno-0-259 name=__codelineno-0-259></a>        <span class=p>)</span>
<a id=__codelineno-0-260 name=__codelineno-0-260></a>
<a id=__codelineno-0-261 name=__codelineno-0-261></a>    <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-262 name=__codelineno-0-262></a>        <span class=n>channel</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=n>text</span><span class=p>,</span> <span class=n>blocks</span><span class=o>=</span><span class=n>blocks</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
<a id=__codelineno-0-263 name=__codelineno-0-263></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.send_message_and_save class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_message_and_save</span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message_and_save class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>message</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>strategy</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageStrategy href=#firefighter.slack.messages.base.SlackMessageStrategy>SlackMessageStrategy</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>strategy_args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>pin</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to send a message on this conversation.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-284 name=__codelineno-0-284></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-285 name=__codelineno-0-285></a><span class=k>def</span> <span class=nf>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-286 name=__codelineno-0-286></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-287 name=__codelineno-0-287></a>    <span class=n>message</span><span class=p>:</span> <span class=n>SlackMessageSurface</span><span class=p>,</span>
<a id=__codelineno-0-288 name=__codelineno-0-288></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-289 name=__codelineno-0-289></a>    <span class=n>strategy</span><span class=p>:</span> <span class=n>SlackMessageStrategy</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-290 name=__codelineno-0-290></a>    <span class=n>strategy_args</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-291 name=__codelineno-0-291></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-292 name=__codelineno-0-292></a>    <span class=n>pin</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-293 name=__codelineno-0-293></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SlackResponse</span><span class=p>:</span>
<a id=__codelineno-0-294 name=__codelineno-0-294></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to send a message on this conversation.&quot;&quot;&quot;</span>
<a id=__codelineno-0-295 name=__codelineno-0-295></a>    <span class=k>if</span> <span class=n>strategy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-296 name=__codelineno-0-296></a>        <span class=n>strategy</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>strategy</span>
<a id=__codelineno-0-297 name=__codelineno-0-297></a>
<a id=__codelineno-0-298 name=__codelineno-0-298></a>    <span class=n>kwargs</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-299 name=__codelineno-0-299></a>    <span class=c1># XXX Get save context?</span>
<a id=__codelineno-0-300 name=__codelineno-0-300></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=s2>&quot;incident&quot;</span><span class=p>):</span>
<a id=__codelineno-0-301 name=__codelineno-0-301></a>        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;incident&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>incident</span>
<a id=__codelineno-0-302 name=__codelineno-0-302></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=s2>&quot;incident_update&quot;</span><span class=p>):</span>
<a id=__codelineno-0-303 name=__codelineno-0-303></a>        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;incident_update&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>incident_update</span>
<a id=__codelineno-0-304 name=__codelineno-0-304></a>    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;ff_type&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>id</span>
<a id=__codelineno-0-305 name=__codelineno-0-305></a>    <span class=k>if</span> <span class=n>strategy</span> <span class=o>==</span> <span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>APPEND</span><span class=p>:</span>
<a id=__codelineno-0-306 name=__codelineno-0-306></a>        <span class=n>strategy_res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_message_strategy_append</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-0-307 name=__codelineno-0-307></a>    <span class=k>elif</span> <span class=n>strategy</span> <span class=o>==</span> <span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>UPDATE</span><span class=p>:</span>
<a id=__codelineno-0-308 name=__codelineno-0-308></a>        <span class=n>strategy_res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_message_strategy_update</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-0-309 name=__codelineno-0-309></a>    <span class=k>elif</span> <span class=n>strategy</span> <span class=o>==</span> <span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>REPLACE</span><span class=p>:</span>
<a id=__codelineno-0-310 name=__codelineno-0-310></a>        <span class=n>strategy_res</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_message_strategy_replace</span><span class=p>(</span>
<a id=__codelineno-0-311 name=__codelineno-0-311></a>            <span class=n>message</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>strategy_args</span><span class=p>,</span> <span class=n>kwargs</span>
<a id=__codelineno-0-312 name=__codelineno-0-312></a>        <span class=p>)</span>
<a id=__codelineno-0-313 name=__codelineno-0-313></a>    <span class=k>if</span> <span class=n>pin</span><span class=p>:</span>
<a id=__codelineno-0-314 name=__codelineno-0-314></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_pin_message</span><span class=p>(</span>
<a id=__codelineno-0-315 name=__codelineno-0-315></a>            <span class=n>res</span><span class=o>=</span><span class=n>strategy_res</span><span class=p>,</span>
<a id=__codelineno-0-316 name=__codelineno-0-316></a>            <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span>
<a id=__codelineno-0-317 name=__codelineno-0-317></a>        <span class=p>)</span>
<a id=__codelineno-0-318 name=__codelineno-0-318></a>    <span class=k>return</span> <span class=n>strategy_res</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.incident_channel.IncidentChannel.send_message_ephemeral class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_message_ephemeral</span> <a href=#firefighter.slack.models.incident_channel.IncidentChannel.send_message_ephemeral class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message_ephemeral</span><span class=p>(</span><span class=n>message</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.user.SlackUser href=#firefighter.slack.models.user.SlackUser>SlackUser</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Convenience method to send an ephemeral message on this conversation. <code>user</code>, <code>channel</code>, <code>blocks</code>, <code>text</code> and <code>metadata</code> should not be passed in kwargs.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=k>def</span> <span class=nf>send_message_ephemeral</span><span class=p>(</span>
<a id=__codelineno-0-267 name=__codelineno-0-267></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-268 name=__codelineno-0-268></a>    <span class=n>message</span><span class=p>:</span> <span class=n>SlackMessageSurface</span><span class=p>,</span>
<a id=__codelineno-0-269 name=__codelineno-0-269></a>    <span class=n>user</span><span class=p>:</span> <span class=n>SlackUser</span> <span class=o>|</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-270 name=__codelineno-0-270></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-271 name=__codelineno-0-271></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-272 name=__codelineno-0-272></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-273 name=__codelineno-0-273></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method to send an ephemeral message on this conversation.</span>
<a id=__codelineno-0-274 name=__codelineno-0-274></a><span class=sd>    `user`, `channel`, `blocks`, `text` and `metadata` should not be passed in kwargs.</span>
<a id=__codelineno-0-275 name=__codelineno-0-275></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-276 name=__codelineno-0-276></a>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>user</span><span class=o>.</span><span class=n>slack_id</span> <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>user</span><span class=p>,</span> <span class=n>SlackUser</span><span class=p>)</span> <span class=k>else</span> <span class=n>user</span>
<a id=__codelineno-0-277 name=__codelineno-0-277></a>
<a id=__codelineno-0-278 name=__codelineno-0-278></a>    <span class=n>client</span><span class=o>.</span><span class=n>chat_postEphemeral</span><span class=p>(</span>
<a id=__codelineno-0-279 name=__codelineno-0-279></a>        <span class=n>user</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
<a id=__codelineno-0-280 name=__codelineno-0-280></a>        <span class=n>channel</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span>
<a id=__codelineno-0-281 name=__codelineno-0-281></a>        <span class=o>**</span><span class=p>(</span><span class=n>kwargs</span> <span class=o>|</span> <span class=n>message</span><span class=o>.</span><span class=n>get_slack_message_params</span><span class=p>()),</span>
<a id=__codelineno-0-282 name=__codelineno-0-282></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.models.message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">message</span> <a href=#firefighter.slack.models.message class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.message.Message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">Message</span> <a href=#firefighter.slack.models.message.Message class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Model href=https://docs.djangoproject.com/en/4.2/ref/models/instances/#django.db.models.Model>Model</a></code></p> <p>Model a Slack API Conversation. A Slack Conversation can be a public channel, a private channel, a direct message, or a multi-person direct message. Reference: <a href=https://api.slack.com/types/conversation>https://api.slack.com/types/conversation</a>.</p> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.models.sos class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">sos</span> <a href=#firefighter.slack.models.sos class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.sos.Sos class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">Sos</span> <a href=#firefighter.slack.models.sos.Sos class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Model href=https://docs.djangoproject.com/en/4.2/ref/models/instances/#django.db.models.Model>Model</a></code></p> <p>A SOS is a target with a name, a conversation, and optionally a user group.</p> <p>Incident responders can use it with <code>/incident sos</code> to ask for help to a specific group of people.</p> <p>Helpers will be notified in the selected conversation, and the user group will be mentioned (or <code>@here</code> if no user group is selected)</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.sos.Sos.usergroup_slack_fmt class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">usergroup_slack_fmt</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.sos.Sos.usergroup_slack_fmt class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>usergroup_slack_fmt</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns either <code>@usergroup</code> or <code>@here</code> depending on usergroup presence.</p> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.models.user class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">user</span> <a href=#firefighter.slack.models.user class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.user.SlackUser class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackUser</span> <a href=#firefighter.slack.models.user.SlackUser class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Model href=https://docs.djangoproject.com/en/4.2/ref/models/instances/#django.db.models.Model>Model</a></code></p> <p>Holds data about a Slack User, linked to an :model:<code>incidents.user</code>. slack_id field is not used as PK, as it is only guaranteed by Slack to be unique in pair with a team_id.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.user.SlackUser.url class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">url</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.user.SlackUser.url class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>url</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns an HTTPS ULR to the Slack user's profile. For deep linking, use <code>link</code> instead.</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.user.SlackUser.send_private_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">send_private_message</span> <a href=#firefighter.slack.models.user.SlackUser.send_private_message class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_private_message</span><span class=p>(</span><span class=n>message</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.messages.base.SlackMessageSurface href=#firefighter.slack.messages.base.SlackMessageSurface>SlackMessageSurface</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Send a private message to the user.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/user.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-446>446</a></span>
<span class=normal><a href=#__codelineno-0-447>447</a></span>
<span class=normal><a href=#__codelineno-0-448>448</a></span>
<span class=normal><a href=#__codelineno-0-449>449</a></span>
<span class=normal><a href=#__codelineno-0-450>450</a></span>
<span class=normal><a href=#__codelineno-0-451>451</a></span>
<span class=normal><a href=#__codelineno-0-452>452</a></span>
<span class=normal><a href=#__codelineno-0-453>453</a></span>
<span class=normal><a href=#__codelineno-0-454>454</a></span>
<span class=normal><a href=#__codelineno-0-455>455</a></span>
<span class=normal><a href=#__codelineno-0-456>456</a></span>
<span class=normal><a href=#__codelineno-0-457>457</a></span>
<span class=normal><a href=#__codelineno-0-458>458</a></span>
<span class=normal><a href=#__codelineno-0-459>459</a></span>
<span class=normal><a href=#__codelineno-0-460>460</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-446 name=__codelineno-0-446></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-447 name=__codelineno-0-447></a><span class=k>def</span> <span class=nf>send_private_message</span><span class=p>(</span>
<a id=__codelineno-0-448 name=__codelineno-0-448></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-449 name=__codelineno-0-449></a>    <span class=n>message</span><span class=p>:</span> <span class=n>SlackMessageSurface</span><span class=p>,</span>
<a id=__codelineno-0-450 name=__codelineno-0-450></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-451 name=__codelineno-0-451></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-452 name=__codelineno-0-452></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-453 name=__codelineno-0-453></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Send a private message to the user.&quot;&quot;&quot;</span>
<a id=__codelineno-0-454 name=__codelineno-0-454></a>    <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-455 name=__codelineno-0-455></a>        <span class=n>channel</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>slack_id</span><span class=p>,</span>
<a id=__codelineno-0-456 name=__codelineno-0-456></a>        <span class=n>text</span><span class=o>=</span><span class=n>message</span><span class=o>.</span><span class=n>get_text</span><span class=p>(),</span>
<a id=__codelineno-0-457 name=__codelineno-0-457></a>        <span class=n>metadata</span><span class=o>=</span><span class=n>message</span><span class=o>.</span><span class=n>get_metadata</span><span class=p>(),</span>
<a id=__codelineno-0-458 name=__codelineno-0-458></a>        <span class=n>blocks</span><span class=o>=</span><span class=n>message</span><span class=o>.</span><span class=n>get_blocks</span><span class=p>(),</span>
<a id=__codelineno-0-459 name=__codelineno-0-459></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
<a id=__codelineno-0-460 name=__codelineno-0-460></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.user.SlackUserManager class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackUserManager</span> <a href=#firefighter.slack.models.user.SlackUserManager class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Manager href=https://docs.djangoproject.com/en/4.2/topics/db/managers/#django.db.models.Manager>Manager</a>[&#39;SlackUser&#39;]</code></p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.user.SlackUserManager.get_user_by_slack_id class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_user_by_slack_id</span> <a href=#firefighter.slack.models.user.SlackUserManager.get_user_by_slack_id class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>slack_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>defaults</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns a User from DB if it exists, or fetch its info from Slack, save it to DB and returns it.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/user.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=k>def</span> <span class=nf>get_user_by_slack_id</span><span class=p>(</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=n>slack_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=n>defaults</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns a User from DB if it exists, or fetch its info from Slack, save it to DB and returns it.&quot;&quot;&quot;</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>slack_id</span><span class=p>:</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;slack_id cannot be empty&quot;</span><span class=p>)</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>    <span class=c1># Try fetching it from DB...</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=n>slack_user</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_related</span><span class=p>(</span><span class=s2>&quot;user&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>slack_id</span><span class=p>)</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>        <span class=k>return</span> <span class=n>slack_user</span><span class=o>.</span><span class=n>user</span>  <span class=c1># noqa: TRY300</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>    <span class=k>except</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>        <span class=n>slack_user</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>    <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>        <span class=n>defaults</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>        <span class=ow>and</span> <span class=s2>&quot;email&quot;</span> <span class=ow>in</span> <span class=n>defaults</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>        <span class=ow>and</span> <span class=s2>&quot;name&quot;</span> <span class=ow>in</span> <span class=n>defaults</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>        <span class=ow>and</span> <span class=n>defaults</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=ow>and</span> <span class=n>defaults</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>]</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=p>):</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=n>user</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_create</span><span class=p>(</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>            <span class=n>username</span><span class=o>=</span><span class=n>defaults</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;@&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>],</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>            <span class=n>email</span><span class=o>=</span><span class=n>defaults</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>],</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>            <span class=n>defaults</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>defaults</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]},</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>        <span class=p>)</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=n>slack_user</span><span class=p>,</span> <span class=n>_created</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_create</span><span class=p>(</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>            <span class=n>slack_id</span><span class=o>=</span><span class=n>slack_id</span><span class=p>,</span> <span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=p>,</span> <span class=n>defaults</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()}</span>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>        <span class=p>)</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=k>return</span> <span class=n>user</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>
<a id=__codelineno-0-72 name=__codelineno-0-72></a>    <span class=c1># If not in DB, fetch the user&#39;s info from firefighter.slack...</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Fetch user from Slack&quot;</span><span class=p>)</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=n>user_info</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>users_info</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=n>slack_id</span><span class=p>)</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>user_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ok&quot;</span><span class=p>):</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Could not fetch user from firefighter.slack.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>    <span class=k>except</span> <span class=n>slack_sdk</span><span class=o>.</span><span class=n>errors</span><span class=o>.</span><span class=n>SlackApiError</span><span class=p>:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Could not find Slack user with ID: </span><span class=si>{</span><span class=n>slack_id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=n>clean_user_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>unpack_user_info</span><span class=p>(</span><span class=n>user_info</span><span class=o>=</span><span class=n>user_info</span><span class=p>)</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>    <span class=k>if</span> <span class=s2>&quot;email&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>clean_user_info</span> <span class=ow>and</span> <span class=s2>&quot;display_name&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>clean_user_info</span><span class=p>:</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>            <span class=sa>f</span><span class=s2>&quot;Not enough info in Slack user.info response! user_info: </span><span class=si>{</span><span class=n>user_info</span><span class=si>}</span><span class=s2>, parsed: </span><span class=si>{</span><span class=n>clean_user_info</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>        <span class=p>)</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=n>user</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_create</span><span class=p>(</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>        <span class=n>username</span><span class=o>=</span><span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;@&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>],</span>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=n>email</span><span class=o>=</span><span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>],</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=n>defaults</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]},</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=p>)</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Could not create user from Slack info&quot;</span><span class=p>)</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=c1># TODO Handle case of user but with outdated email</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Creating Slack user&quot;</span><span class=p>)</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>user_info</span><span class=p>)</span>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=n>slack_user</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_or_create_from_slack</span><span class=p>(</span><span class=n>user_info</span><span class=o>=</span><span class=n>user_info</span><span class=p>,</span> <span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=p>)</span>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>slack_user</span><span class=p>:</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Could not upsert slack_user in DB WTF&quot;</span><span class=p>)</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=k>return</span> <span class=n>user</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.user.SlackUserManager.unpack_user_info class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">unpack_user_info</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> <a href=#firefighter.slack.models.user.SlackUserManager.unpack_user_info class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>unpack_user_info</span><span class=p>(</span><span class=n>user_info</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns a dict contains fields for the SlackUser, from a SlackResponse. email, name and id should always be returned.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/user.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span>
<span class=normal><a href=#__codelineno-0-328>328</a></span>
<span class=normal><a href=#__codelineno-0-329>329</a></span>
<span class=normal><a href=#__codelineno-0-330>330</a></span>
<span class=normal><a href=#__codelineno-0-331>331</a></span>
<span class=normal><a href=#__codelineno-0-332>332</a></span>
<span class=normal><a href=#__codelineno-0-333>333</a></span>
<span class=normal><a href=#__codelineno-0-334>334</a></span>
<span class=normal><a href=#__codelineno-0-335>335</a></span>
<span class=normal><a href=#__codelineno-0-336>336</a></span>
<span class=normal><a href=#__codelineno-0-337>337</a></span>
<span class=normal><a href=#__codelineno-0-338>338</a></span>
<span class=normal><a href=#__codelineno-0-339>339</a></span>
<span class=normal><a href=#__codelineno-0-340>340</a></span>
<span class=normal><a href=#__codelineno-0-341>341</a></span>
<span class=normal><a href=#__codelineno-0-342>342</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-299 name=__codelineno-0-299></a><span class=nd>@staticmethod</span>
<a id=__codelineno-0-300 name=__codelineno-0-300></a><span class=k>def</span> <span class=nf>unpack_user_info</span><span class=p>(</span><span class=n>user_info</span><span class=p>:</span> <span class=n>SlackResponse</span> <span class=o>|</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
<a id=__codelineno-0-301 name=__codelineno-0-301></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns a dict contains fields for the SlackUser, from a SlackResponse.</span>
<a id=__codelineno-0-302 name=__codelineno-0-302></a><span class=sd>    email, name and id should always be returned.</span>
<a id=__codelineno-0-303 name=__codelineno-0-303></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-304 name=__codelineno-0-304></a>    <span class=n>user_args</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-305 name=__codelineno-0-305></a>    <span class=k>if</span> <span class=n>user_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>user_info</span><span class=p>[</span><span class=s2>&quot;user&quot;</span><span class=p>]</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-306 name=__codelineno-0-306></a>        <span class=n>user_info</span> <span class=o>=</span> <span class=n>cast</span><span class=p>(</span><span class=s2>&quot;dict[str, Any]&quot;</span><span class=p>,</span> <span class=n>user_info</span><span class=p>[</span><span class=s2>&quot;user&quot;</span><span class=p>])</span>
<a id=__codelineno-0-307 name=__codelineno-0-307></a>
<a id=__codelineno-0-308 name=__codelineno-0-308></a>    <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;slack_id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>)</span>
<a id=__codelineno-0-309 name=__codelineno-0-309></a>    <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;first_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.first_name&quot;</span><span class=p>)</span>
<a id=__codelineno-0-310 name=__codelineno-0-310></a>    <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;last_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.last_name&quot;</span><span class=p>)</span>
<a id=__codelineno-0-311 name=__codelineno-0-311></a>    <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;deleted&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;deleted&quot;</span><span class=p>)</span>
<a id=__codelineno-0-312 name=__codelineno-0-312></a>
<a id=__codelineno-0-313 name=__codelineno-0-313></a>    <span class=c1># TODO Fix mess with name vs username</span>
<a id=__codelineno-0-314 name=__codelineno-0-314></a>    <span class=n>username</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>)</span>
<a id=__codelineno-0-315 name=__codelineno-0-315></a>    <span class=k>if</span> <span class=n>username</span><span class=p>:</span>
<a id=__codelineno-0-316 name=__codelineno-0-316></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;username&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>username</span>
<a id=__codelineno-0-317 name=__codelineno-0-317></a>
<a id=__codelineno-0-318 name=__codelineno-0-318></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;is_bot&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=s2>&quot;USLACKBOT&quot;</span><span class=p>:</span>
<a id=__codelineno-0-319 name=__codelineno-0-319></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.email&quot;</span><span class=p>)</span>
<a id=__codelineno-0-320 name=__codelineno-0-320></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.real_name&quot;</span><span class=p>)</span>
<a id=__codelineno-0-321 name=__codelineno-0-321></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-322 name=__codelineno-0-322></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;email&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>)</span>
<a id=__codelineno-0-323 name=__codelineno-0-323></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.real_name&quot;</span><span class=p>)</span>
<a id=__codelineno-0-324 name=__codelineno-0-324></a>
<a id=__codelineno-0-325 name=__codelineno-0-325></a>    <span class=k>if</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.image_512&quot;</span><span class=p>):</span>
<a id=__codelineno-0-326 name=__codelineno-0-326></a>        <span class=n>avatar</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.image_512&quot;</span><span class=p>)</span>
<a id=__codelineno-0-327 name=__codelineno-0-327></a>        <span class=k>if</span> <span class=n>avatar</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span>
<a id=__codelineno-0-328 name=__codelineno-0-328></a>            <span class=n>avatar</span>
<a id=__codelineno-0-329 name=__codelineno-0-329></a>        <span class=p>):</span>  <span class=c1># &lt;= SlackUser._meta.get_field(&#39;image&#39;).max_length:</span>
<a id=__codelineno-0-330 name=__codelineno-0-330></a>            <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;image&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>avatar</span>
<a id=__codelineno-0-331 name=__codelineno-0-331></a>    <span class=k>elif</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.image_192&quot;</span><span class=p>):</span>
<a id=__codelineno-0-332 name=__codelineno-0-332></a>        <span class=n>avatar</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>user_info</span><span class=p>,</span> <span class=s2>&quot;profile.image_192&quot;</span><span class=p>)</span>
<a id=__codelineno-0-333 name=__codelineno-0-333></a>        <span class=k>if</span> <span class=n>avatar</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span>
<a id=__codelineno-0-334 name=__codelineno-0-334></a>            <span class=n>avatar</span>
<a id=__codelineno-0-335 name=__codelineno-0-335></a>        <span class=p>):</span>  <span class=c1># &lt;= SlackUser._meta.get_field(&#39;image&#39;).max_length:</span>
<a id=__codelineno-0-336 name=__codelineno-0-336></a>            <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;image&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>avatar</span>
<a id=__codelineno-0-337 name=__codelineno-0-337></a>
<a id=__codelineno-0-338 name=__codelineno-0-338></a>    <span class=k>if</span> <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;first_name&quot;</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-339 name=__codelineno-0-339></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;first_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
<a id=__codelineno-0-340 name=__codelineno-0-340></a>    <span class=k>if</span> <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;last_name&quot;</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-341 name=__codelineno-0-341></a>        <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;last_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>user_args</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-0-342 name=__codelineno-0-342></a>    <span class=k>return</span> <span class=n>user_args</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.user.SlackUserManager.upsert_by_email class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">upsert_by_email</span> <a href=#firefighter.slack.models.user.SlackUserManager.upsert_by_email class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>upsert_by_email</span><span class=p>(</span><span class=n>email</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns a User from DB if it exists, or fetch its info from Slack, save it to DB and returns it.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/user.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=k>def</span> <span class=nf>upsert_by_email</span><span class=p>(</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns a User from DB if it exists, or fetch its info from Slack, save it to DB and returns it.&quot;&quot;&quot;</span>
<a id=__codelineno-0-115 name=__codelineno-0-115></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Looking for user by email: </span><span class=si>{</span><span class=n>email</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-116 name=__codelineno-0-116></a>    <span class=c1># Try fetching it from DB...</span>
<a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a>        <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>email</span><span class=o>=</span><span class=n>email</span><span class=p>)</span>
<a id=__codelineno-0-119 name=__codelineno-0-119></a>    <span class=k>except</span> <span class=n>User</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;No user in DB. Fetching it from Slack...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=k>return</span> <span class=n>user</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=c1># If not in DB, fetch the user&#39;s info from firefighter.slack...</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=n>user_info</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>users_lookupByEmail</span><span class=p>(</span><span class=n>email</span><span class=o>=</span><span class=n>email</span><span class=p>)</span>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>user_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ok&quot;</span><span class=p>):</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Could not fetch user from Slack. User: email=</span><span class=si>{</span><span class=n>email</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>            <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>    <span class=k>except</span> <span class=n>slack_sdk</span><span class=o>.</span><span class=n>errors</span><span class=o>.</span><span class=n>SlackApiError</span><span class=p>:</span>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Could not find Slack user with email: </span><span class=si>{</span><span class=n>email</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>user_info</span><span class=p>)</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>
<a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=n>clean_user_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>unpack_user_info</span><span class=p>(</span><span class=n>user_info</span><span class=o>=</span><span class=n>user_info</span><span class=p>)</span>
<a id=__codelineno-0-137 name=__codelineno-0-137></a>
<a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=n>slack_user</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_none</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;slack_id&quot;</span><span class=p>])</span>
<a id=__codelineno-0-139 name=__codelineno-0-139></a>
<a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=c1># If we have a SlackUser but not user with email =&gt; Update user email</span>
<a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=k>if</span> <span class=n>slack_user</span><span class=p>:</span>
<a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=n>user</span> <span class=o>=</span> <span class=n>slack_user</span><span class=o>.</span><span class=n>user</span>
<a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=n>user</span><span class=o>.</span><span class=n>email</span> <span class=o>=</span> <span class=n>email</span>
<a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=n>user</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=k>return</span> <span class=n>user</span>
<a id=__codelineno-0-146 name=__codelineno-0-146></a>
<a id=__codelineno-0-147 name=__codelineno-0-147></a>    <span class=c1># If we have no Slack User, let&#39;s go ahead and create a User and its associated SlackUser</span>
<a id=__codelineno-0-148 name=__codelineno-0-148></a>    <span class=n>user</span><span class=p>,</span> <span class=n>_created</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_create</span><span class=p>(</span>
<a id=__codelineno-0-149 name=__codelineno-0-149></a>        <span class=n>email</span><span class=o>=</span><span class=n>email</span><span class=p>,</span>
<a id=__codelineno-0-150 name=__codelineno-0-150></a>        <span class=n>username</span><span class=o>=</span><span class=n>email</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;@&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>],</span>
<a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=n>defaults</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-152 name=__codelineno-0-152></a>            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
<a id=__codelineno-0-153 name=__codelineno-0-153></a>        <span class=p>},</span>
<a id=__codelineno-0-154 name=__codelineno-0-154></a>    <span class=p>)</span>
<a id=__codelineno-0-155 name=__codelineno-0-155></a>
<a id=__codelineno-0-156 name=__codelineno-0-156></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-157 name=__codelineno-0-157></a>        <span class=n>slack_user</span><span class=p>,</span> <span class=n>_created</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_or_create_from_slack</span><span class=p>(</span>
<a id=__codelineno-0-158 name=__codelineno-0-158></a>            <span class=n>user_info</span><span class=o>=</span><span class=n>user_info</span><span class=p>,</span>
<a id=__codelineno-0-159 name=__codelineno-0-159></a>            <span class=n>slack_id</span><span class=o>=</span><span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;slack_id&quot;</span><span class=p>],</span>
<a id=__codelineno-0-160 name=__codelineno-0-160></a>            <span class=n>defaults</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()},</span>
<a id=__codelineno-0-161 name=__codelineno-0-161></a>        <span class=p>)</span>
<a id=__codelineno-0-162 name=__codelineno-0-162></a>        <span class=k>if</span> <span class=n>slack_user</span> <span class=ow>and</span> <span class=n>slack_user</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>email</span> <span class=o>==</span> <span class=n>email</span><span class=p>:</span>
<a id=__codelineno-0-163 name=__codelineno-0-163></a>            <span class=k>return</span> <span class=n>user</span>
<a id=__codelineno-0-164 name=__codelineno-0-164></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;1. Change of mail for user: </span><span class=si>{</span><span class=n>clean_user_info</span><span class=p>[</span><span class=s1>&#39;slack_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-165 name=__codelineno-0-165></a>
<a id=__codelineno-0-166 name=__codelineno-0-166></a>    <span class=k>except</span> <span class=n>IntegrityError</span><span class=p>:</span>
<a id=__codelineno-0-167 name=__codelineno-0-167></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-168 name=__codelineno-0-168></a>            <span class=sa>f</span><span class=s2>&quot;2. Change of mail for user: </span><span class=si>{</span><span class=n>clean_user_info</span><span class=p>[</span><span class=s1>&#39;slack_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
<a id=__codelineno-0-169 name=__codelineno-0-169></a>            <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-0-170 name=__codelineno-0-170></a>        <span class=p>)</span>
<a id=__codelineno-0-171 name=__codelineno-0-171></a>        <span class=n>slack_user</span><span class=p>,</span> <span class=n>_created</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_or_create_from_slack</span><span class=p>(</span>
<a id=__codelineno-0-172 name=__codelineno-0-172></a>            <span class=n>user_info</span><span class=o>=</span><span class=n>user_info</span><span class=p>,</span>
<a id=__codelineno-0-173 name=__codelineno-0-173></a>            <span class=n>user_id</span><span class=o>=</span><span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-0-174 name=__codelineno-0-174></a>            <span class=n>defaults</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;slack_id&quot;</span><span class=p>:</span> <span class=n>clean_user_info</span><span class=p>[</span><span class=s2>&quot;slack_id&quot;</span><span class=p>],</span> <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()},</span>
<a id=__codelineno-0-175 name=__codelineno-0-175></a>        <span class=p>)</span>
<a id=__codelineno-0-176 name=__codelineno-0-176></a>        <span class=k>return</span> <span class=n>user</span>
<a id=__codelineno-0-177 name=__codelineno-0-177></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.models.user_group class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">user_group</span> <a href=#firefighter.slack.models.user_group class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.user_group.UserGroup class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">UserGroup</span> <a href=#firefighter.slack.models.user_group.UserGroup class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Model href=https://docs.djangoproject.com/en/4.2/ref/models/instances/#django.db.models.Model>Model</a></code></p> <p>Model a Slack API UserGroup. Reference: <a href=https://api.slack.com/types/usergroup>https://api.slack.com/types/usergroup</a>.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.models.user_group.UserGroup.link class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">link</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> <a href=#firefighter.slack.models.user_group.UserGroup.link class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>link</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Regular HTTPS link to the conversation through Slack.com.</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.models.user_group.UserGroupManager class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">UserGroupManager</span> <a href=#firefighter.slack.models.user_group.UserGroupManager class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=django.db.models.Manager href=https://docs.djangoproject.com/en/4.2/topics/db/managers/#django.db.models.Manager>Manager</a>[&#39;UserGroup&#39;]</code></p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.user_group.UserGroupManager.fetch_all_usergroups_data class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">fetch_all_usergroups_data</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> <a href=#firefighter.slack.models.user_group.UserGroupManager.fetch_all_usergroups_data class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>fetch_all_usergroups_data</span><span class=p>(</span><span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>include_users</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span> <span class=o>=</span> <span class=kc>False</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Fetch all usergroups from firefighter.slack.</p> <p>Returns the list of usergroups</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/user_group.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span>
<span class=normal><a href=#__codelineno-0-93>93</a></span>
<span class=normal><a href=#__codelineno-0-94>94</a></span>
<span class=normal><a href=#__codelineno-0-95>95</a></span>
<span class=normal><a href=#__codelineno-0-96>96</a></span>
<span class=normal><a href=#__codelineno-0-97>97</a></span>
<span class=normal><a href=#__codelineno-0-98>98</a></span>
<span class=normal><a href=#__codelineno-0-99>99</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-80 name=__codelineno-0-80></a><span class=nd>@staticmethod</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=k>def</span> <span class=nf>fetch_all_usergroups_data</span><span class=p>(</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=n>include_users</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Fetch all usergroups from firefighter.slack.</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>
<a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=sd>    Returns the list of usergroups</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=n>slack_response_usergroups</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>usergroups_list</span><span class=p>(</span><span class=n>include_users</span><span class=o>=</span><span class=n>include_users</span><span class=p>)</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=n>ug_list</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>slack_response_usergroups</span><span class=p>,</span> <span class=s2>&quot;usergroups&quot;</span><span class=p>)</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>ug_list</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>        <span class=n>err_msg</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>            <span class=sa>f</span><span class=s2>&quot;Expected usergroups to be a list, but got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>ug_list</span><span class=p>)</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>ug_list</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>        <span class=p>)</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>        <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=n>err_msg</span><span class=p>)</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=k>return</span> <span class=n>ug_list</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.models.user_group.UserGroupManager.fetch_usergroup class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">fetch_usergroup</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> <a href=#firefighter.slack.models.user_group.UserGroupManager.fetch_usergroup class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>fetch_usergroup</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>group_slack_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>group_handle</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.user_group.UserGroup href=#firefighter.slack.models.user_group.UserGroup>UserGroup</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Import a "usergroup" from Slack and return its UserGroup model. Either group_slack_id or group_handle must be provided.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>group_slack_id</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a> | None</code>, default: <code>None</code> ) – <div class=doc-md-description> <p>The Slack usergroup id of the usergroup to import. Usually starts with <code>S</code>. Defaults to None.</p> </div> </li> <li class=field-body> <b><code>group_handle</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a> | None</code>, default: <code>None</code> ) – <div class=doc-md-description> <p>Handle (@xxx) of the usergroup to import. Defaults to None.</p> </div> </li> <li class=field-body> <b><code>client</code></b> (<code><span title=slack_sdk.web.client.WebClient>WebClient</span></code>, default: <code><span title=firefighter.slack.slack_app.DefaultWebClient>DefaultWebClient</span></code> ) – <div class=doc-md-description> <p>Slack client. Defaults to DefaultWebClient.</p> </div> </li> <li class=field-body> <b><code>**kwargs</code></b> (<code><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></code>, default: <code>{}</code> ) – <div class=doc-md-description> <p>Additional keyword arguments to pass to created UserGroup model.</p> </div> </li> </ul> <p>Returns:</p> <ul> <li class=field-body> <code><a class="autorefs autorefs-internal" title=firefighter.slack.models.user_group.UserGroup href=#firefighter.slack.models.user_group.UserGroup>UserGroup</a> | None</code> – <div class=doc-md-description> <p>UserGroup | None: UserGroup model or None if not found</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/models/user_group.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=nd>@staticmethod</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=k>def</span> <span class=nf>fetch_usergroup</span><span class=p>(</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>group_slack_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>group_handle</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>UserGroup</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Import a &quot;usergroup&quot; from Slack and return its UserGroup model.</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=sd>    Either group_slack_id or group_handle must be provided.</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>
<a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=sd>    Args:</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=sd>        group_slack_id (str | None, optional): The Slack usergroup id of the usergroup to import. Usually starts with `S`. Defaults to None.</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=sd>        group_handle (str | None, optional): Handle (@xxx) of the usergroup to import. Defaults to None.</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=sd>        client (WebClient, optional): Slack client. Defaults to DefaultWebClient.</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=sd>        **kwargs: Additional keyword arguments to pass to created UserGroup model.</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>
<a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=sd>        UserGroup | None: UserGroup model or None if not found</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>    <span class=n>slack_response_usergroups</span> <span class=o>=</span> <span class=n>UserGroupManager</span><span class=o>.</span><span class=n>fetch_all_usergroups_data</span><span class=p>(</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=n>client</span><span class=o>=</span><span class=n>client</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>    <span class=p>)</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=n>usergroup</span> <span class=o>=</span> <span class=n>UserGroupManager</span><span class=o>.</span><span class=n>get_usergroup_data_from_list</span><span class=p>(</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=n>usergroups</span><span class=o>=</span><span class=n>slack_response_usergroups</span><span class=p>,</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=n>group_slack_id</span><span class=o>=</span><span class=n>group_slack_id</span><span class=p>,</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=n>group_handle</span><span class=o>=</span><span class=n>group_handle</span><span class=p>,</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=p>)</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>usergroup</span><span class=p>:</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>            <span class=sa>f</span><span class=s2>&quot;Could not find matching group! group_slack_id: </span><span class=si>{</span><span class=n>group_slack_id</span><span class=si>}</span><span class=s2>; group_handle: </span><span class=si>{</span><span class=n>group_handle</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>        <span class=p>)</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>usergroup</span><span class=p>)</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=k>return</span> <span class=n>UserGroup</span><span class=p>(</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=o>**</span><span class=n>UserGroupManager</span><span class=o>.</span><span class=n>parse_slack_response</span><span class=p>(</span><span class=n>usergroup</span><span class=p>),</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.rules class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">rules</span> <a href=#firefighter.slack.rules class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <p>Rules for publishing incidents in channels.</p> <p>This module may be removed in a future version.</p> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.signals class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">signals</span> <a href=#firefighter.slack.signals class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.create_incident_conversation class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">create_incident_conversation</span> <a href=#firefighter.slack.signals.create_incident_conversation class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <p>This module contains the logic to open an incident channel and invite responders.</p> <p>XXX It might be divided into two signals/tasks, one for creating, one for inviting. XXX Sending the end signal should be done by this signal's caller, not by this signal receiver directly.</p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.signals.create_incident_conversation.create_incident_slack_conversation class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">create_incident_slack_conversation</span> <a href=#firefighter.slack.signals.create_incident_conversation.create_incident_slack_conversation class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>create_incident_slack_conversation</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>,</span> <span class=o>**</span><span class=n>_kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#int>int</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Main process to open an incident channel, set it up and invite responders. It MUST be called when an incident is created.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>incident</code></b> (<code><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></code>) – <div class=doc-md-description> <p>The incident to open. It should be saved before calling this function, and have its first incident update created.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/signals/create_incident_conversation.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=nd>@receiver</span><span class=p>(</span><span class=n>signal</span><span class=o>=</span><span class=n>create_incident_conversation</span><span class=p>)</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=k>def</span> <span class=nf>create_incident_slack_conversation</span><span class=p>(</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=o>**</span><span class=n>_kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span> <span class=o>|</span> <span class=nb>int</span><span class=p>:</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Main process to open an incident channel, set it up and invite responders. It MUST be called when an incident is created.</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>
<a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=sd>    Args:</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>        incident (Incident): The incident to open. It should be saved before calling this function, and have its first incident update created.</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>
<a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=n>channel</span><span class=p>:</span> <span class=n>IncidentChannel</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=n>IncidentChannel</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create_incident_channel</span><span class=p>(</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=n>incident</span><span class=o>=</span><span class=n>incident</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=p>)</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>channel</span><span class=p>:</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Giving up on Slack channel creation for </span><span class=si>%s</span><span class=s2>.&quot;</span><span class=p>,</span> <span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>    <span class=n>new_channel_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>channel</span><span class=o>.</span><span class=n>channel_id</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>new_channel_id</span><span class=p>:</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Missing channel id for </span><span class=si>%s</span><span class=s2>.&quot;</span><span class=p>,</span> <span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=n>incident</span><span class=o>.</span><span class=n>created_by</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=p>,</span> <span class=s2>&quot;slack_user&quot;</span><span class=p>)</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>        <span class=ow>and</span> <span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=o>.</span><span class=n>slack_user</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=p>):</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=p>,</span> <span class=s2>&quot;slack_user&quot;</span><span class=p>):</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>            <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>add_slack_id_to_user</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=p>)</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=p>)</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=c1># Join the channel. We are already in the channel if it is a private channel.</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>incident</span><span class=o>.</span><span class=n>private</span><span class=p>:</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>        <span class=n>channel</span><span class=o>.</span><span class=n>conversations_join</span><span class=p>()</span>
<a id=__codelineno-0-72 name=__codelineno-0-72></a>
<a id=__codelineno-0-73 name=__codelineno-0-73></a>    <span class=n>channel</span><span class=o>.</span><span class=n>set_incident_channel_topic</span><span class=p>()</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>    <span class=c1># Add the person that opened the incident in the channel</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>    <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>        <span class=n>incident</span><span class=o>.</span><span class=n>created_by</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>        <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=p>,</span> <span class=s2>&quot;slack_user&quot;</span><span class=p>)</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=ow>and</span> <span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=o>.</span><span class=n>slack_user</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>        <span class=ow>and</span> <span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=o>.</span><span class=n>slack_user</span><span class=o>.</span><span class=n>slack_id</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>    <span class=p>):</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>            <span class=n>channel</span><span class=o>.</span><span class=n>invite_users</span><span class=p>([</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=p>])</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=k>except</span> <span class=n>SlackApiError</span><span class=p>:</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>                <span class=sa>f</span><span class=s2>&quot;Could not import Slack opener user! Slack ID: </span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=o>.</span><span class=n>slack_user</span><span class=o>.</span><span class=n>slack_id</span><span class=si>}</span><span class=s2>, User </span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>created_by</span><span class=si>}</span><span class=s2>, Channel ID </span><span class=si>{</span><span class=n>new_channel_id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>            <span class=p>)</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Could not find user Slack ID for opener_user!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=c1># Send message in the created channel</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>    <span class=n>channel</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>        <span class=n>SlackMessageIncidentDeclaredAnnouncement</span><span class=p>(</span><span class=n>incident</span><span class=p>),</span> <span class=n>pin</span><span class=o>=</span><span class=kc>True</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=p>)</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>    <span class=c1># Post in general channel #tech-incidents if needed</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=k>if</span> <span class=n>should_publish_in_general_channel</span><span class=p>(</span><span class=n>incident</span><span class=p>,</span> <span class=n>incident_update</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>        <span class=n>announcement_general</span> <span class=o>=</span> <span class=n>SlackMessageIncidentDeclaredAnnouncementGeneral</span><span class=p>(</span><span class=n>incident</span><span class=p>)</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>        <span class=n>tech_incidents_conversation</span> <span class=o>=</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_none</span><span class=p>(</span>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>            <span class=n>tag</span><span class=o>=</span><span class=s2>&quot;tech_incidents&quot;</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>        <span class=p>)</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>        <span class=k>if</span> <span class=n>tech_incidents_conversation</span><span class=p>:</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>            <span class=n>tech_incidents_conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span><span class=n>announcement_general</span><span class=p>)</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>                <span class=s2>&quot;Could not find tech_incidents conversation! Is there a channel with tag tech_incidents?&quot;</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a>            <span class=p>)</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=c1># Create a response team</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=n>users_list</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>User</span><span class=p>]</span> <span class=o>=</span> <span class=n>incident</span><span class=o>.</span><span class=n>build_invite_list</span><span class=p>()</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=c1># Invite all users</span>
<a id=__codelineno-0-115 name=__codelineno-0-115></a>    <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=o>.</span><span class=n>invite_users</span><span class=p>(</span><span class=n>users_list</span><span class=p>)</span>
<a id=__codelineno-0-116 name=__codelineno-0-116></a>
<a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=c1># Post in #it-deploy if needed</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a>    <span class=k>if</span> <span class=n>should_publish_in_it_deploy_channel</span><span class=p>(</span><span class=n>incident</span><span class=p>):</span>
<a id=__codelineno-0-119 name=__codelineno-0-119></a>        <span class=n>announcement_it_deploy</span> <span class=o>=</span> <span class=n>SlackMessageDeployWarning</span><span class=p>(</span><span class=n>incident</span><span class=p>)</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a>        <span class=n>announcement_it_deploy</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>announcement_it_deploy</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-121 name=__codelineno-0-121></a>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=n>it_deploy_conversation</span> <span class=o>=</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_none</span><span class=p>(</span><span class=n>tag</span><span class=o>=</span><span class=s2>&quot;it_deploy&quot;</span><span class=p>)</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>        <span class=k>if</span> <span class=n>it_deploy_conversation</span><span class=p>:</span>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>            <span class=n>it_deploy_conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span><span class=n>announcement_it_deploy</span><span class=p>)</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>                <span class=s2>&quot;Could not find it_deploy conversation! Is there a channel with tag it_deploy?&quot;</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>            <span class=p>)</span>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>    <span class=n>incident_channel_done</span><span class=o>.</span><span class=n>send_robust</span><span class=p>(</span>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=n>sender</span><span class=o>=</span><span class=vm>__name__</span><span class=p>,</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>,</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>        <span class=n>channel</span><span class=o>=</span><span class=n>channel</span><span class=p>,</span>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=p>)</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.get_users class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">get_users</span> <a href=#firefighter.slack.signals.get_users class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.signals.get_users.get_invites_from_slack class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_invites_from_slack</span> <a href=#firefighter.slack.signals.get_users.get_invites_from_slack class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_invites_from_slack</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=o>**</span><span class=n>_kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>New version using cached users instead of querying Slack API.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/signals/get_users.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=nd>@receiver</span><span class=p>(</span><span class=n>signal</span><span class=o>=</span><span class=n>signals</span><span class=o>.</span><span class=n>get_invites</span><span class=p>)</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=k>def</span> <span class=nf>get_invites_from_slack</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span> <span class=o>**</span><span class=n>_kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;New version using cached users instead of querying Slack API.&quot;&quot;&quot;</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=c1># Prepare sub-queries</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>slack_usergroups</span><span class=p>:</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>UserGroup</span><span class=p>]</span> <span class=o>=</span> <span class=n>incident</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>usergroups</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=n>slack_conversations</span><span class=p>:</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]</span> <span class=o>=</span> <span class=n>incident</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>conversations</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=c1># We make sure to exclude the bot user, and avoid duplicates with distinct()</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=c1># Also make sure that all users have related SlackUser and a slack_id</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>        <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>slack_user__isnull</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=o>.</span><span class=n>exclude</span><span class=p>(</span><span class=n>slack_user__slack_id</span><span class=o>=</span><span class=n>SlackApp</span><span class=p>()</span><span class=o>.</span><span class=n>details</span><span class=p>[</span><span class=s2>&quot;user_id&quot;</span><span class=p>])</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>        <span class=o>.</span><span class=n>exclude</span><span class=p>(</span><span class=n>slack_user__slack_id</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=o>.</span><span class=n>exclude</span><span class=p>(</span><span class=n>slack_user__slack_id__isnull</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=o>.</span><span class=n>filter</span><span class=p>(</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>            <span class=n>Q</span><span class=p>(</span><span class=n>conversation__in</span><span class=o>=</span><span class=n>slack_conversations</span><span class=p>)</span> <span class=o>|</span> <span class=n>Q</span><span class=p>(</span><span class=n>usergroup__in</span><span class=o>=</span><span class=n>slack_usergroups</span><span class=p>)</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=p>)</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>        <span class=o>.</span><span class=n>distinct</span><span class=p>()</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=p>)</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>queryset</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.handle_incident_channel_done class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">handle_incident_channel_done</span> <a href=#firefighter.slack.signals.handle_incident_channel_done class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.incident_closed class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">incident_closed</span> <a href=#firefighter.slack.signals.incident_closed class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.incident_updated class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">incident_updated</span> <a href=#firefighter.slack.signals.incident_updated class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.signals.incident_updated.publish_status_update class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">publish_status_update</span> <a href=#firefighter.slack.signals.incident_updated.publish_status_update class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>publish_status_update</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=n>incident_update</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident_update.IncidentUpdate href=../incidents/#firefighter.incidents.models.incident_update.IncidentUpdate>IncidentUpdate</a></span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>status_changed</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=n>old_priority</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.priority.Priority href=../incidents/#firefighter.incidents.models.priority.Priority>Priority</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Publishes an update to the incident status.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/signals/incident_updated.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=k>def</span> <span class=nf>publish_status_update</span><span class=p>(</span>
<a id=__codelineno-0-171 name=__codelineno-0-171></a>    <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span>
<a id=__codelineno-0-172 name=__codelineno-0-172></a>    <span class=n>incident_update</span><span class=p>:</span> <span class=n>IncidentUpdate</span><span class=p>,</span>
<a id=__codelineno-0-173 name=__codelineno-0-173></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-174 name=__codelineno-0-174></a>    <span class=n>status_changed</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-175 name=__codelineno-0-175></a>    <span class=n>old_priority</span><span class=p>:</span> <span class=n>Priority</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Publishes an update to the incident status.&quot;&quot;&quot;</span>
<a id=__codelineno-0-178 name=__codelineno-0-178></a>    <span class=n>message</span> <span class=o>=</span> <span class=n>SlackMessageIncidentStatusUpdated</span><span class=p>(</span>
<a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>,</span>
<a id=__codelineno-0-180 name=__codelineno-0-180></a>        <span class=n>incident_update</span><span class=o>=</span><span class=n>incident_update</span><span class=p>,</span>
<a id=__codelineno-0-181 name=__codelineno-0-181></a>        <span class=n>in_channel</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-0-182 name=__codelineno-0-182></a>    <span class=p>)</span>
<a id=__codelineno-0-183 name=__codelineno-0-183></a>    <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
<a id=__codelineno-0-184 name=__codelineno-0-184></a>
<a id=__codelineno-0-185 name=__codelineno-0-185></a>    <span class=c1># Post to #tech-incidents</span>
<a id=__codelineno-0-186 name=__codelineno-0-186></a>    <span class=k>if</span> <span class=n>should_publish_in_general_channel</span><span class=p>(</span>
<a id=__codelineno-0-187 name=__codelineno-0-187></a>        <span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>,</span> <span class=n>incident_update</span><span class=o>=</span><span class=n>incident_update</span><span class=p>,</span> <span class=n>old_priority</span><span class=o>=</span><span class=n>old_priority</span>
<a id=__codelineno-0-188 name=__codelineno-0-188></a>    <span class=p>):</span>
<a id=__codelineno-0-189 name=__codelineno-0-189></a>        <span class=n>publish_update_in_general_channel</span><span class=p>(</span>
<a id=__codelineno-0-190 name=__codelineno-0-190></a>            <span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>,</span>
<a id=__codelineno-0-191 name=__codelineno-0-191></a>            <span class=n>incident_update</span><span class=o>=</span><span class=n>incident_update</span><span class=p>,</span>
<a id=__codelineno-0-192 name=__codelineno-0-192></a>            <span class=n>status_changed</span><span class=o>=</span><span class=n>status_changed</span><span class=p>,</span>
<a id=__codelineno-0-193 name=__codelineno-0-193></a>            <span class=n>old_priority</span><span class=o>=</span><span class=n>old_priority</span><span class=p>,</span>
<a id=__codelineno-0-194 name=__codelineno-0-194></a>        <span class=p>)</span>
<a id=__codelineno-0-195 name=__codelineno-0-195></a>
<a id=__codelineno-0-196 name=__codelineno-0-196></a>    <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-197 name=__codelineno-0-197></a>        <span class=n>incident</span><span class=o>.</span><span class=n>ask_for_milestones</span>
<a id=__codelineno-0-198 name=__codelineno-0-198></a>        <span class=ow>and</span> <span class=n>status_changed</span>
<a id=__codelineno-0-199 name=__codelineno-0-199></a>        <span class=ow>and</span> <span class=n>incident</span><span class=o>.</span><span class=n>status</span> <span class=o>&gt;=</span> <span class=n>IncidentStatus</span><span class=o>.</span><span class=n>FIXED</span>
<a id=__codelineno-0-200 name=__codelineno-0-200></a>    <span class=p>):</span>
<a id=__codelineno-0-201 name=__codelineno-0-201></a>        <span class=kn>from</span> <span class=nn>firefighter.slack.views.modals.key_event_message</span> <span class=kn>import</span> <span class=p>(</span>  <span class=c1># noqa: PLC0415</span>
<a id=__codelineno-0-202 name=__codelineno-0-202></a>            <span class=n>SlackMessageKeyEvents</span><span class=p>,</span>
<a id=__codelineno-0-203 name=__codelineno-0-203></a>        <span class=p>)</span>
<a id=__codelineno-0-204 name=__codelineno-0-204></a>
<a id=__codelineno-0-205 name=__codelineno-0-205></a>        <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-206 name=__codelineno-0-206></a>            <span class=n>SlackMessageKeyEvents</span><span class=p>(</span><span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>)</span>
<a id=__codelineno-0-207 name=__codelineno-0-207></a>        <span class=p>)</span>
<a id=__codelineno-0-208 name=__codelineno-0-208></a>
<a id=__codelineno-0-209 name=__codelineno-0-209></a>    <span class=k>if</span> <span class=n>should_publish_in_it_deploy_channel</span><span class=p>(</span><span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>):</span>
<a id=__codelineno-0-210 name=__codelineno-0-210></a>        <span class=n>announcement_it_deploy</span> <span class=o>=</span> <span class=n>SlackMessageDeployWarning</span><span class=p>(</span><span class=n>incident</span><span class=p>)</span>
<a id=__codelineno-0-211 name=__codelineno-0-211></a>        <span class=n>announcement_it_deploy</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>announcement_it_deploy</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-212 name=__codelineno-0-212></a>
<a id=__codelineno-0-213 name=__codelineno-0-213></a>        <span class=n>it_deploy_conversation</span> <span class=o>=</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_none</span><span class=p>(</span><span class=n>tag</span><span class=o>=</span><span class=s2>&quot;it_deploy&quot;</span><span class=p>)</span>
<a id=__codelineno-0-214 name=__codelineno-0-214></a>        <span class=k>if</span> <span class=n>it_deploy_conversation</span><span class=p>:</span>
<a id=__codelineno-0-215 name=__codelineno-0-215></a>            <span class=n>it_deploy_conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span><span class=n>announcement_it_deploy</span><span class=p>)</span>
<a id=__codelineno-0-216 name=__codelineno-0-216></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-217 name=__codelineno-0-217></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-218 name=__codelineno-0-218></a>                <span class=s2>&quot;Could not find it_deploy conversation! Is there a channel with tag it_deploy?&quot;</span>
<a id=__codelineno-0-219 name=__codelineno-0-219></a>            <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.postmortem_created class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">postmortem_created</span> <a href=#firefighter.slack.signals.postmortem_created class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.signals.roles_reminders class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">roles_reminders</span> <a href=#firefighter.slack.signals.roles_reminders class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.slack_app class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">slack_app</span> <a href=#firefighter.slack.slack_app class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h3 id=firefighter.slack.slack_app.SlackApp class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackApp</span> <a href=#firefighter.slack.slack_app.SlackApp class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=slack_bolt.app.app.App>App</span></code></p> <p>Subclass of the Slack App, as a singleton.</p> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_app.slack_client class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">slack_client</span> <a href=#firefighter.slack.slack_app.slack_client class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>slack_client</span><span class=p>(</span><span class=n>function</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=collections.abc.Callable href=https://docs.python.org/3.11/library/collections.abc.html#collections.abc.Callable>Callable</a></span><span class=p>[</span><span class=n><span title=firefighter.slack.slack_app.P>P</span></span><span class=p>,</span> <span class=n><span title=firefighter.slack.slack_app.R>R</span></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" title=collections.abc.Callable href=https://docs.python.org/3.11/library/collections.abc.html#collections.abc.Callable>Callable</a></span><span class=p>[</span><span class=n><span title=firefighter.slack.slack_app.P>P</span></span><span class=p>,</span> <span class=n><span title=firefighter.slack.slack_app.R>R</span></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Adds a Slack client in <code>client</code> kwargs, if none is provided.</p> <p>Can be used as a decorator with <code>@slack_client</code> or as a function with <code>slack_client(function)</code>.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_app.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span>
<span class=normal><a href=#__codelineno-0-93>93</a></span>
<span class=normal><a href=#__codelineno-0-94>94</a></span>
<span class=normal><a href=#__codelineno-0-95>95</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=k>def</span> <span class=nf>slack_client</span><span class=p>(</span><span class=n>function</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[</span><span class=n>P</span><span class=p>,</span> <span class=n>R</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Callable</span><span class=p>[</span><span class=n>P</span><span class=p>,</span> <span class=n>R</span><span class=p>]:</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Adds a Slack client in `client` kwargs, if none is provided.</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>
<a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=sd>    Can be used as a decorator with `@slack_client` or as a function with `slack_client(function)`.</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=k>def</span> <span class=nf>wrap_function</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>P</span><span class=o>.</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>P</span><span class=o>.</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>R</span><span class=p>:</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>        <span class=k>if</span> <span class=s2>&quot;client&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kwargs</span><span class=p>:</span>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>            <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;client&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>SlackApp</span><span class=p>()</span><span class=o>.</span><span class=n>client</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=k>return</span> <span class=n>function</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=k>return</span> <span class=n>wrap_function</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.slack_incident_context class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">slack_incident_context</span> <a href=#firefighter.slack.slack_incident_context class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_app_home_element class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_app_home_element</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_app_home_element class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_app_home_element</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get an incident from an action, found in app home accessory.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=k>def</span> <span class=nf>get_incident_from_app_home_element</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get an incident from an action, found in app home accessory.&quot;&quot;&quot;</span>
<a id=__codelineno-0-178 name=__codelineno-0-178></a>    <span class=n>action</span> <span class=o>=</span> <span class=n>get_first_in</span><span class=p>(</span>
<a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;actions&quot;</span><span class=p>,</span> <span class=p>[]),</span> <span class=s2>&quot;selected_option.value&quot;</span><span class=p>,</span> <span class=p>(</span><span class=s2>&quot;update_status&quot;</span><span class=p>,</span> <span class=s2>&quot;open_link&quot;</span><span class=p>)</span>
<a id=__codelineno-0-180 name=__codelineno-0-180></a>    <span class=p>)</span>
<a id=__codelineno-0-181 name=__codelineno-0-181></a>    <span class=k>if</span> <span class=n>action</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-182 name=__codelineno-0-182></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-183 name=__codelineno-0-183></a>    <span class=n>incident_id</span> <span class=o>=</span> <span class=n>action</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;block_id&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span>  <span class=c1># noqa: B005</span>
<a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=s2>&quot;app_home_incident_element_&quot;</span>
<a id=__codelineno-0-185 name=__codelineno-0-185></a>    <span class=p>)</span>
<a id=__codelineno-0-186 name=__codelineno-0-186></a>
<a id=__codelineno-0-187 name=__codelineno-0-187></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-188 name=__codelineno-0-188></a>        <span class=n>incident_id</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>incident_id</span><span class=p>)</span>
<a id=__codelineno-0-189 name=__codelineno-0-189></a>    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
<a id=__codelineno-0-190 name=__codelineno-0-190></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-191 name=__codelineno-0-191></a>            <span class=sa>f</span><span class=s2>&quot;Select incident (&#39;</span><span class=si>{</span><span class=n>incident_id</span><span class=si>}</span><span class=s2>&#39;) was not a valid incident ID!&quot;</span>
<a id=__codelineno-0-192 name=__codelineno-0-192></a>        <span class=p>)</span>
<a id=__codelineno-0-193 name=__codelineno-0-193></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-194 name=__codelineno-0-194></a>    <span class=k>return</span> <span class=n>Incident</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>incident_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_command class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_body_channel_id_in_command</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_command class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_body_channel_id_in_command</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get an incident from a channel_id, found in commands.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=k>def</span> <span class=nf>get_incident_from_body_channel_id_in_command</span><span class=p>(</span>
<a id=__codelineno-0-151 name=__codelineno-0-151></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get an incident from a channel_id, found in commands.&quot;&quot;&quot;</span>
<a id=__codelineno-0-154 name=__codelineno-0-154></a>    <span class=n>channel_id</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;channel_id&quot;</span><span class=p>)</span>
<a id=__codelineno-0-155 name=__codelineno-0-155></a>    <span class=k>if</span> <span class=n>channel_id</span><span class=p>:</span>
<a id=__codelineno-0-156 name=__codelineno-0-156></a>        <span class=n>channel</span> <span class=o>=</span> <span class=n>IncidentChannel</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>channel_id</span><span class=o>=</span><span class=n>channel_id</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
<a id=__codelineno-0-157 name=__codelineno-0-157></a>        <span class=k>if</span> <span class=n>channel</span> <span class=ow>and</span> <span class=n>channel</span><span class=o>.</span><span class=n>incident</span><span class=p>:</span>
<a id=__codelineno-0-158 name=__codelineno-0-158></a>            <span class=k>return</span> <span class=n>channel</span><span class=o>.</span><span class=n>incident</span>
<a id=__codelineno-0-159 name=__codelineno-0-159></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_message_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_body_channel_id_in_message_shortcut</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_body_channel_id_in_message_shortcut class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_body_channel_id_in_message_shortcut</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get an incident from a channel.id, found in message shortcut.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-163 name=__codelineno-0-163></a><span class=k>def</span> <span class=nf>get_incident_from_body_channel_id_in_message_shortcut</span><span class=p>(</span>
<a id=__codelineno-0-164 name=__codelineno-0-164></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get an incident from a channel.id, found in message shortcut.&quot;&quot;&quot;</span>
<a id=__codelineno-0-167 name=__codelineno-0-167></a>    <span class=n>channel_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=s2>&quot;channel.id&quot;</span><span class=p>)</span>
<a id=__codelineno-0-168 name=__codelineno-0-168></a>    <span class=k>if</span> <span class=n>channel_id</span><span class=p>:</span>
<a id=__codelineno-0-169 name=__codelineno-0-169></a>        <span class=n>channel</span> <span class=o>=</span> <span class=n>IncidentChannel</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>channel_id</span><span class=o>=</span><span class=n>channel_id</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
<a id=__codelineno-0-170 name=__codelineno-0-170></a>        <span class=k>if</span> <span class=n>channel</span> <span class=ow>and</span> <span class=n>channel</span><span class=o>.</span><span class=n>incident</span><span class=p>:</span>
<a id=__codelineno-0-171 name=__codelineno-0-171></a>            <span class=k>return</span> <span class=n>channel</span><span class=o>.</span><span class=n>incident</span>
<a id=__codelineno-0-172 name=__codelineno-0-172></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_button_value class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_button_value</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_button_value class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_button_value</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=typing.Literal href=https://docs.python.org/3.11/library/typing.html#typing.Literal>Literal</a></span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Try to get the incident ID from button value.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=k>def</span> <span class=nf>get_incident_from_button_value</span><span class=p>(</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=n>Literal</span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Try to get the incident ID from button value.&quot;&quot;&quot;</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=n>actions</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;actions&quot;</span><span class=p>)</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>actions</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=c1># XXX(dugab): this should not use an allow-list, but loop over values or use a specific prefix/suffix/pattern</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=n>action</span> <span class=o>=</span> <span class=n>get_first_in</span><span class=p>(</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>        <span class=n>actions</span><span class=p>,</span>
<a id=__codelineno-0-72 name=__codelineno-0-72></a>        <span class=n>key</span><span class=o>=</span><span class=s2>&quot;action_id&quot;</span><span class=p>,</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a>        <span class=n>matches</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>            <span class=s2>&quot;open_modal_incident_update_roles&quot;</span><span class=p>,</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>            <span class=s2>&quot;open_modal_incident_update_status&quot;</span><span class=p>,</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>            <span class=s2>&quot;open_modal_downgrade_workflow&quot;</span><span class=p>,</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>        <span class=p>},</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>    <span class=p>)</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>action</span><span class=p>:</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=n>value</span> <span class=o>=</span> <span class=n>action</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;value&quot;</span><span class=p>)</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>value</span><span class=p>:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>        <span class=n>incident_id</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=k>except</span> <span class=p>(</span><span class=ne>ValueError</span><span class=p>,</span> <span class=ne>TypeError</span><span class=p>):</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Response.actions.action_id.value was not a valid incident ID!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=k>return</span> <span class=n>Incident</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>incident_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_context class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_context</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_context class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_context</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns an Incident or None, from a Slack body.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-211 name=__codelineno-0-211></a><span class=k>def</span> <span class=nf>get_incident_from_context</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-212 name=__codelineno-0-212></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns an Incident or None, from a Slack body.&quot;&quot;&quot;</span>
<a id=__codelineno-0-213 name=__codelineno-0-213></a>    <span class=k>for</span> <span class=n>strat</span> <span class=ow>in</span> <span class=n>INCIDENT_RESOLVING_STRATEGIES</span><span class=p>:</span>
<a id=__codelineno-0-214 name=__codelineno-0-214></a>        <span class=n>incident</span> <span class=o>=</span> <span class=n>strat</span><span class=p>(</span><span class=n>body</span><span class=p>)</span>
<a id=__codelineno-0-215 name=__codelineno-0-215></a>        <span class=k>if</span> <span class=n>incident</span><span class=p>:</span>
<a id=__codelineno-0-216 name=__codelineno-0-216></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Found incident </span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> using </span><span class=si>{</span><span class=n>strat</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-217 name=__codelineno-0-217></a>            <span class=k>return</span> <span class=n>incident</span>
<a id=__codelineno-0-218 name=__codelineno-0-218></a>
<a id=__codelineno-0-219 name=__codelineno-0-219></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Incident could not be inferred from Slack body context: </span><span class=si>{</span><span class=n>body</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-220 name=__codelineno-0-220></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_view_action class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_view_action</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_action class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_view_action</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" title=typing.Literal href=https://docs.python.org/3.11/library/typing.html#typing.Literal>Literal</a></span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Get incident id from select incident in modal.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=k>def</span> <span class=nf>get_incident_from_view_action</span><span class=p>(</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Literal</span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>|</span> <span class=n>Incident</span><span class=p>:</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get incident id from select incident in modal.&quot;&quot;&quot;</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=n>view_type</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=k>if</span> <span class=n>view_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;view_submission&quot;</span><span class=p>,</span> <span class=s2>&quot;block_actions&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>    <span class=n>actions</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;actions&quot;</span><span class=p>)</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>actions</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=n>action</span> <span class=o>=</span> <span class=n>get_first_in</span><span class=p>(</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=n>actions</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=s2>&quot;action_id&quot;</span><span class=p>,</span> <span class=n>matches</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;incident_update_select_incident&quot;</span><span class=p>}</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=p>)</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>action</span><span class=p>:</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>    <span class=n>select_incident_value</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>action</span><span class=p>,</span> <span class=s2>&quot;selected_option.value&quot;</span><span class=p>)</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>action</span><span class=p>)</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>select_incident_value</span><span class=p>)</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>select_incident_value</span><span class=p>:</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=n>incident_id</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>select_incident_value</span><span class=p>)</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>            <span class=sa>f</span><span class=s2>&quot;Select incident (&#39;</span><span class=si>{</span><span class=n>select_incident_value</span><span class=si>}</span><span class=s2>&#39;) was not a valid incident ID!&quot;</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>        <span class=p>)</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=k>return</span> <span class=n>Incident</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>incident_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_view_submission_metadata class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_view_submission_metadata</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_submission_metadata class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_view_submission_metadata</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=typing.Literal href=https://docs.python.org/3.11/library/typing.html#typing.Literal>Literal</a></span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get incident id from view modal metadata.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a><span class=k>def</span> <span class=nf>get_incident_from_view_submission_metadata</span><span class=p>(</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=n>Literal</span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get incident id from view modal metadata.&quot;&quot;&quot;</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=n>view_type</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=n>private_metadata</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=p>[</span><span class=s2>&quot;view&quot;</span><span class=p>,</span> <span class=s2>&quot;private_metadata&quot;</span><span class=p>])</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>private_metadata</span><span class=p>:</span>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>    <span class=k>if</span> <span class=n>view_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;view_submission&quot;</span><span class=p>,</span> <span class=s2>&quot;block_actions&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>        <span class=n>incident_id</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>private_metadata</span><span class=p>)</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a>    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>            <span class=sa>f</span><span class=s2>&quot;Response.view.private_metadata (&#39;</span><span class=si>{</span><span class=n>private_metadata</span><span class=si>}</span><span class=s2>&#39;) was not a valid incident ID!&quot;</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>        <span class=p>)</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=k>return</span> <span class=n>Incident</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>incident_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_incident_from_view_submission_selected class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_incident_from_view_submission_selected</span> <a href=#firefighter.slack.slack_incident_context.get_incident_from_view_submission_selected class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_incident_from_view_submission_selected</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=typing.Literal href=https://docs.python.org/3.11/library/typing.html#typing.Literal>Literal</a></span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get incident id from select incident in modal.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=nd>@incident_resolve_strategy</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=k>def</span> <span class=nf>get_incident_from_view_submission_selected</span><span class=p>(</span>
<a id=__codelineno-0-119 name=__codelineno-0-119></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Incident</span> <span class=o>|</span> <span class=n>Literal</span><span class=p>[</span><span class=kc>False</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-121 name=__codelineno-0-121></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get incident id from select incident in modal.&quot;&quot;&quot;</span>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>    <span class=n>view_type</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=k>if</span> <span class=n>view_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;view_submission&quot;</span><span class=p>,</span> <span class=s2>&quot;block_actions&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=n>select_incident_value</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=n>body</span><span class=p>,</span>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=s2>&quot;view.state.values.incident_update_select_incident.incident_update_select_incident.selected_option.value&quot;</span><span class=p>,</span>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>    <span class=p>)</span>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>select_incident_value</span><span class=p>:</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=c1># Check the default value (appears selected to the user)</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>        <span class=n>select_incident_value</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>            <span class=n>body</span><span class=p>,</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>            <span class=s2>&quot;view.state.values.incident_update_select_incident.incident_update_select_incident.initial_option.value&quot;</span><span class=p>,</span>
<a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=p>)</span>
<a id=__codelineno-0-137 name=__codelineno-0-137></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>select_incident_value</span><span class=p>:</span>
<a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-139 name=__codelineno-0-139></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=n>incident_id</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>select_incident_value</span><span class=p>)</span>
<a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
<a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-143 name=__codelineno-0-143></a>            <span class=sa>f</span><span class=s2>&quot;Select incident (&#39;</span><span class=si>{</span><span class=n>select_incident_value</span><span class=si>}</span><span class=s2>&#39;) was not a valid incident ID!&quot;</span>
<a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=p>)</span>
<a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-146 name=__codelineno-0-146></a>    <span class=k>return</span> <span class=n>Incident</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>incident_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_incident_context.get_user_from_context class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_user_from_context</span> <a href=#firefighter.slack.slack_incident_context.get_user_from_context class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_user_from_context</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns a User or None, from a Slack body.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_incident_context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-223 name=__codelineno-0-223></a><span class=k>def</span> <span class=nf>get_user_from_context</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>User</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns a User or None, from a Slack body.&quot;&quot;&quot;</span>
<a id=__codelineno-0-225 name=__codelineno-0-225></a>    <span class=n>sender_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=s2>&quot;user.id&quot;</span><span class=p>,</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user_id&quot;</span><span class=p>))</span>
<a id=__codelineno-0-226 name=__codelineno-0-226></a>
<a id=__codelineno-0-227 name=__codelineno-0-227></a>    <span class=k>return</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>sender_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.slack_templating class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">slack_templating</span> <a href=#firefighter.slack.slack_templating class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_templating.date_time class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">date_time</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-cached"><code>cached</code></small> </span> <a href=#firefighter.slack.slack_templating.date_time class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>date_time</span><span class=p>(</span><span class=n>date</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=datetime.datetime href=https://docs.python.org/3.11/library/datetime.html#datetime.datetime>datetime</a></span> <span class=o>|</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Common format for datetime.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>date</code></b> (<code><a class="autorefs autorefs-external" title=datetime.datetime href=https://docs.python.org/3.11/library/datetime.html#datetime.datetime>datetime</a> | None</code>) – <div class=doc-md-description> <p>your datetime</p> </div> </li> </ul> <p>Returns:</p> <ul> <li class=field-body> <b><code>str</code></b> ( <code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></code> ) – <div class=doc-md-description> <p>datetime in format <code>YYYY-MM-DD HH:MM</code></p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_templating.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=nd>@cache</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=k>def</span> <span class=nf>date_time</span><span class=p>(</span><span class=n>date</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Common format for datetime.</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>
<a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>    Args:</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>        date (datetime | None): your datetime</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>
<a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>        str: datetime in format `YYYY-MM-DD HH:MM`</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=k>return</span> <span class=n>localtime</span><span class=p>(</span><span class=n>date</span><span class=p>)</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%Y-%m-</span><span class=si>%d</span><span class=s2> %H:%M&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_templating.md_quote_filter class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">md_quote_filter</span> <a href=#firefighter.slack.slack_templating.md_quote_filter class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>md_quote_filter</span><span class=p>(</span><span class=n>val</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><span title=firefighter.slack.slack_templating.T>T</span></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><span title=firefighter.slack.slack_templating.T>T</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>Add &gt; on newlines for MD quotes.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_templating.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=k>def</span> <span class=nf>md_quote_filter</span><span class=p>(</span><span class=n>val</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>T</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>T</span><span class=p>:</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Add &gt; on newlines for MD quotes.&quot;&quot;&quot;</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>        <span class=k>return</span> <span class=n>val</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&gt; &quot;</span><span class=p>)</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>    <span class=k>return</span> <span class=n>val</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_templating.shorten_long class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">shorten_long</span> <a href=#firefighter.slack.slack_templating.shorten_long class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>shorten_long</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n>width</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#int>int</a></span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Shorten text while keeping newlines and most formatting.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_templating.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=k>def</span> <span class=nf>shorten_long</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>width</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Shorten text while keeping newlines and most formatting.&quot;&quot;&quot;</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=n>kwargs</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;placeholder&quot;</span><span class=p>,</span> <span class=s2>&quot; [...]&quot;</span><span class=p>)</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>    <span class=n>kwargs</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;tabsize&quot;</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=n>kwargs</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;max_lines&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=n>kwargs</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;drop_whitespace&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>    <span class=n>kwargs</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;replace_whitespace&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=n>kwargs</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;break_long_words&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>    <span class=n>w</span> <span class=o>=</span> <span class=n>TextWrapper</span><span class=p>(</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>        <span class=n>width</span><span class=o>=</span><span class=n>width</span><span class=p>,</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>,</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>    <span class=p>)</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=k>return</span> <span class=n>w</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.slack_templating.user_slack_handle_or_name class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">user_slack_handle_or_name</span> <a href=#firefighter.slack.slack_templating.user_slack_handle_or_name class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>user_slack_handle_or_name</span><span class=p>(</span><span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span> <span class=o>|</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the Slack handle of the user in Slack MD format (<code>&lt;@SLACK_ID&gt;</code>) or the user full name.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/slack_templating.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=k>def</span> <span class=nf>user_slack_handle_or_name</span><span class=p>(</span><span class=n>user</span><span class=p>:</span> <span class=n>User</span> <span class=o>|</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the Slack handle of the user in Slack MD format (`&lt;@SLACK_ID&gt;`) or the user full name.&quot;&quot;&quot;</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=k>return</span> <span class=s2>&quot;∅&quot;</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>user</span><span class=p>,</span> <span class=s2>&quot;slack_user&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>user</span><span class=o>.</span><span class=n>slack_user</span><span class=p>:</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;&lt;@</span><span class=si>{</span><span class=n>user</span><span class=o>.</span><span class=n>slack_user</span><span class=o>.</span><span class=n>slack_id</span><span class=si>}</span><span class=s2>&gt;&quot;</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>    <span class=k>return</span> <span class=n>user</span><span class=o>.</span><span class=n>full_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.tasks class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">tasks</span> <a href=#firefighter.slack.tasks class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.fetch_conversations_members class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">fetch_conversations_members</span> <a href=#firefighter.slack.tasks.fetch_conversations_members class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">fetch_conversations_members_from_slack</span> <a href=#firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>fetch_conversations_members_from_slack</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=n>queryset</span><span class=p>:</span> <span class=n><span title=django.db.models.QuerySet>QuerySet</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Update the members and metadata of Slack Conversations in DB, from Slack API.</p> <p>Only fetches conversations that are not IncidentChannels.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>client</code></b> (<code><span title=slack_sdk.web.client.WebClient>WebClient</span></code>, default: <code><span title=firefighter.slack.slack_app.DefaultWebClient>DefaultWebClient</span></code> ) – <div class=doc-md-description> <p>Slack SDK client. Defaults to DefaultWebClient.</p> </div> </li> <li class=field-body> <b><code>queryset</code></b> (<code>Optional[<span title=django.db.models.QuerySet>QuerySet</span>[<a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a>]]</code>, default: <code>None</code> ) – <div class=doc-md-description> <p>Conversation to update. Defaults to None. If None, all applicable</p> </div> </li> </ul> <p>Returns:</p> <ul> <li class=field-body> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a>[<a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a>]</code> – <div class=doc-md-description> <p>list[Conversation]: List of conversations that could not be updated.</p> </div> </li> </ul> <p>Raises:</p> <ul> <li class=field-body> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/exceptions.html#TypeError>TypeError</a></code> – <div class=doc-md-description> <p>If the members list is not a list.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/fetch_conversations_members.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=k>def</span> <span class=nf>fetch_conversations_members_from_slack</span><span class=p>(</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>    <span class=n>queryset</span><span class=p>:</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]:</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Update the members and metadata of Slack Conversations in DB, from Slack API.</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>
<a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=sd>    Only fetches conversations that are not IncidentChannels.</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>
<a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=sd>    Args:</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=sd>        client (WebClient, optional): Slack SDK client. Defaults to DefaultWebClient.</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=sd>        queryset (Optional[QuerySet[Conversation]], optional): Conversation to update. Defaults to None. If None, all applicable</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>
<a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>        list[Conversation]: List of conversations that could not be updated.</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>
<a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>    Raises:</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>        TypeError: If the members list is not a list.</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=n>conversations</span><span class=p>:</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=n>queryset</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=k>if</span> <span class=n>queryset</span> <span class=ow>and</span> <span class=n>queryset</span><span class=o>.</span><span class=n>model</span> <span class=o>!=</span> <span class=n>Conversation</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>        <span class=k>else</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>not_incident_channel</span><span class=p>(</span><span class=n>queryset</span><span class=p>)</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=p>)</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=n>fails</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=n>fails</span> <span class=o>=</span> <span class=n>fails</span> <span class=o>+</span> <span class=nb>list</span><span class=p>(</span><span class=n>conversations</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>channel_id__isnull</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=n>conversations_members</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=n>conversations_info</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>
<a id=__codelineno-0-72 name=__codelineno-0-72></a>    <span class=k>for</span> <span class=n>conversation</span> <span class=ow>in</span> <span class=n>conversations</span><span class=p>:</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a>        <span class=c1># Fetch members IDs</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>            <span class=n>conversation_members</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>conversations_members</span><span class=p>(</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>                <span class=n>channel</span><span class=o>=</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;members&quot;</span><span class=p>,</span> <span class=p>[])</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>        <span class=k>except</span> <span class=n>SlackApiError</span><span class=p>:</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Could not fetch members for </span><span class=si>{</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=k>continue</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>conversation_members</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>            <span class=n>err_msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;conversation_members is not a list: </span><span class=si>{</span><span class=n>conversation_members</span><span class=si>}</span><span class=s2>&quot;</span>  <span class=c1># type: ignore[unreachable]</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=n>err_msg</span><span class=p>)</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>        <span class=c1># Fetch conversation info</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>        <span class=n>conversation_info</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>conversations_info</span><span class=p>(</span><span class=n>channel</span><span class=o>=</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>)</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>        <span class=c1># Save members</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=n>members_slack_ids</span> <span class=o>=</span> <span class=n>conversation_members</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=n>conversations_members</span><span class=p>[</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>members_slack_ids</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=c1># Save info (channel_id, channel_name, channel_type, status)</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=n>conversation_data_kwargs_tup</span> <span class=o>=</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>parse_slack_response</span><span class=p>(</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>            <span class=n>conversation_info</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>        <span class=p>)</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>        <span class=n>conversation_data_kwargs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>conversation_data_kwargs_tup</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>            <span class=s2>&quot;_type&quot;</span><span class=p>:</span> <span class=n>conversation_data_kwargs_tup</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>            <span class=s2>&quot;_status&quot;</span><span class=p>:</span> <span class=n>conversation_data_kwargs_tup</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>        <span class=p>}</span>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>        <span class=n>conversations_info</span><span class=p>[</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>conversation_data_kwargs</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>    <span class=c1># Get all usergroups members</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=n>all_members_usergroups</span><span class=p>:</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>        <span class=n>functools</span><span class=o>.</span><span class=n>reduce</span><span class=p>(</span><span class=n>operator</span><span class=o>.</span><span class=n>iadd</span><span class=p>,</span> <span class=n>conversations_members</span><span class=o>.</span><span class=n>values</span><span class=p>(),</span> <span class=p>[])</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=p>)</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>
<a id=__codelineno-0-109 name=__codelineno-0-109></a>    <span class=n>all_members_mapping</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>User</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=c1># Get all users from their Slack IDs</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=k>for</span> <span class=n>member_slack_id</span> <span class=ow>in</span> <span class=n>all_members_usergroups</span><span class=p>:</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=n>user</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>member_slack_id</span><span class=p>)</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>        <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-115 name=__codelineno-0-115></a>            <span class=n>all_members_mapping</span><span class=p>[</span><span class=n>member_slack_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>user</span>
<a id=__codelineno-0-116 name=__codelineno-0-116></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<a id=__codelineno-0-117 name=__codelineno-0-117></a>            <span class=k>continue</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a>
<a id=__codelineno-0-119 name=__codelineno-0-119></a>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Could not retrieve user for Slack ID </span><span class=si>{</span><span class=n>member_slack_id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a>
<a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=c1># Usergroups users mapping</span>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>    <span class=n>usergroups_members_users</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>list</span><span class=p>[</span><span class=n>User</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>        <span class=n>k</span><span class=p>:</span> <span class=p>[</span><span class=n>all_members_mapping</span><span class=p>[</span><span class=n>y</span><span class=p>]</span> <span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=n>v</span><span class=p>]</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>conversations_members</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=p>}</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>usergroups_members_users</span><span class=p>)</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=c1># Save all usergroups members</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>    <span class=k>with</span> <span class=n>transaction</span><span class=o>.</span><span class=n>atomic</span><span class=p>():</span>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=k>for</span> <span class=n>conversation</span> <span class=ow>in</span> <span class=n>conversations</span><span class=p>:</span>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>                <span class=n>err_msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;Conversation </span><span class=si>{</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=si>}</span><span class=s2> has no channel_id&quot;</span>  <span class=c1># type: ignore[unreachable]</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>                <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=n>err_msg</span><span class=p>)</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>            <span class=k>if</span> <span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span> <span class=ow>in</span> <span class=n>usergroups_members_users</span><span class=p>:</span>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>                <span class=n>conversation</span><span class=o>.</span><span class=n>members</span><span class=o>.</span><span class=n>set</span><span class=p>(</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>                    <span class=n>usergroups_members_users</span><span class=p>[</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>]</span>
<a id=__codelineno-0-136 name=__codelineno-0-136></a>                <span class=p>)</span>
<a id=__codelineno-0-137 name=__codelineno-0-137></a>                <span class=n>conversation</span><span class=o>.</span><span class=vm>__dict__</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<a id=__codelineno-0-138 name=__codelineno-0-138></a>                    <span class=n>conversations_info</span><span class=p>[</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>]</span>
<a id=__codelineno-0-139 name=__codelineno-0-139></a>                <span class=p>)</span>
<a id=__codelineno-0-140 name=__codelineno-0-140></a>                <span class=n>conversation</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-141 name=__codelineno-0-141></a>                <span class=k>continue</span>
<a id=__codelineno-0-142 name=__codelineno-0-142></a>            <span class=n>fails</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>conversation</span><span class=p>)</span>
<a id=__codelineno-0-143 name=__codelineno-0-143></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-144 name=__codelineno-0-144></a>                <span class=sa>f</span><span class=s2>&quot;Could not save members and info for non existent conversation </span><span class=si>{</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-145 name=__codelineno-0-145></a>            <span class=p>)</span>
<a id=__codelineno-0-146 name=__codelineno-0-146></a>    <span class=k>return</span> <span class=n>fails</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack_celery class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">fetch_conversations_members_from_slack_celery</span> <a href=#firefighter.slack.tasks.fetch_conversations_members.fetch_conversations_members_from_slack_celery class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>fetch_conversations_members_from_slack_celery</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>,</span> <span class=n>queryset</span><span class=p>:</span> <span class=n><span title=django.db.models.QuerySet>QuerySet</span></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.models.conversation.Conversation href=#firefighter.slack.models.conversation.Conversation>Conversation</a></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>_options</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>]]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Wrapper around the actual task, as Celery doesn't support passing Django models.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/fetch_conversations_members.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=nd>@shared_task</span><span class=p>(</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;slack.fetch_conversations_members_from_slack&quot;</span><span class=p>,</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>retry_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;max_retries&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>},</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>default_retry_delay</span><span class=o>=</span><span class=mi>90</span><span class=p>,</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=p>)</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a><span class=k>def</span> <span class=nf>fetch_conversations_members_from_slack_celery</span><span class=p>(</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=n>queryset</span><span class=p>:</span> <span class=n>QuerySet</span><span class=p>[</span><span class=n>Conversation</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>    <span class=o>**</span><span class=n>_options</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]]:</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Wrapper around the actual task, as Celery doesn&#39;t support passing Django models.&quot;&quot;&quot;</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>    <span class=n>failed_conversations</span> <span class=o>=</span> <span class=n>fetch_conversations_members_from_slack</span><span class=p>(</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=n>queryset</span><span class=o>=</span><span class=n>queryset</span><span class=p>,</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>    <span class=p>)</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;failed_conversations&quot;</span><span class=p>:</span> <span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>channel_id</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>failed_conversations</span><span class=p>]}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.reminder_postmortem class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">reminder_postmortem</span> <a href=#firefighter.slack.tasks.reminder_postmortem class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.reminder_postmortem.publish_postmortem_reminder class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">publish_postmortem_reminder</span> <a href=#firefighter.slack.tasks.reminder_postmortem.publish_postmortem_reminder class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>publish_postmortem_reminder</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>XXX Should return a message object, not send it.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/reminder_postmortem.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=k>def</span> <span class=nf>publish_postmortem_reminder</span><span class=p>(</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a>    <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;XXX Should return a message object, not send it.&quot;&quot;&quot;</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=p>,</span> <span class=s2>&quot;postmortem_for&quot;</span><span class=p>):</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>            <span class=s2>&quot;Trying to send PostMortem reminder for incident #</span><span class=si>%s</span><span class=s2> with no PostMortem!&quot;</span><span class=p>,</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>            <span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>        <span class=p>)</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>        <span class=k>return</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=p>,</span> <span class=s2>&quot;conversation&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=o>.</span><span class=n>channel_id</span><span class=p>):</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>            <span class=s2>&quot;No conversation to post PM reminder for incident </span><span class=si>{incident.id}</span><span class=s2>.&quot;</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=p>)</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>        <span class=k>return</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=n>update_status_message</span> <span class=o>=</span> <span class=n>SlackMessageIncidentPostMortemReminder</span><span class=p>(</span><span class=n>incident</span><span class=p>)</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=n>incident</span><span class=o>.</span><span class=n>conversation</span><span class=o>.</span><span class=n>send_message_and_save</span><span class=p>(</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>        <span class=n>update_status_message</span><span class=p>,</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>        <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=n>strategy</span><span class=o>=</span><span class=n>SlackMessageStrategy</span><span class=o>.</span><span class=n>REPLACE</span><span class=p>,</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=n>strategy_args</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>            <span class=s2>&quot;replace&quot;</span><span class=p>:</span> <span class=p>(</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>                <span class=n>SlackMessageIncidentFixedNextActions</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>                <span class=n>SlackMessageIncidentPostMortemReminder</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>            <span class=p>)</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=p>},</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.send_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">send_message</span> <a href=#firefighter.slack.tasks.send_message class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.send_message.send_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">send_message</span> <a href=#firefighter.slack.tasks.send_message.send_message class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>send_message</span><span class=p>(</span><span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#bytes>bytes</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Sends a message to a channel. All arguments are passed to the Slack API.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/send_message.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=nd>@shared_task</span><span class=p>(</span>
<a id=__codelineno-0-18 name=__codelineno-0-18></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;slack.send_message&quot;</span><span class=p>,</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a>    <span class=n>autoretry_for</span><span class=o>=</span><span class=p>(</span><span class=n>SlackClientError</span><span class=p>,),</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a>    <span class=n>retry_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;max_retries&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>},</span>
<a id=__codelineno-0-21 name=__codelineno-0-21></a>    <span class=n>default_retry_delay</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=p>)</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=k>def</span> <span class=nf>send_message</span><span class=p>(</span>  <span class=c1># pylint: disable=keyword-arg-before-vararg</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=nb>bytes</span><span class=p>:</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sends a message to a channel. All arguments are passed to the Slack API.&quot;&quot;&quot;</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=k>return</span> <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span><span class=o>.</span><span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.send_reminders class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">send_reminders</span> <a href=#firefighter.slack.tasks.send_reminders class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.send_reminders.slack_save_reminder_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">slack_save_reminder_message</span> <a href=#firefighter.slack.tasks.send_reminders.slack_save_reminder_message class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>slack_save_reminder_message</span><span class=p>(</span><span class=n>message_response_data</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.slack_response.SlackResponse>SlackResponse</span></span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#int>int</a></span><span class=p>,</span> <span class=o>**</span><span class=n>_kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Save the <a class="autorefs autorefs-internal" href=#firefighter.slack.models.message.Message>firefighter.slack.models.Message</a> from a Slack response. First <code>args</code> is an <a class="autorefs autorefs-internal" href=../incidents/#firefighter.incidents.models.incident.Incident>firefighter.incidents.models.Incident</a> ID.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>message_response_data</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></code>) – <div class=doc-md-description> <p>SlackResponse data.</p> </div> </li> <li class=field-body> <b><code>*args</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#int>int</a></code>, default: <code>()</code> ) – <div class=doc-md-description> <p>Expect one value, the <a class="autorefs autorefs-internal" href=../incidents/#firefighter.incidents.models.incident.Incident>firefighter.incidents.models.Incident</a> ID.</p> </div> </li> <li class=field-body> <b><code>**_kwargs</code></b> (<code><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></code>, default: <code>{}</code> ) – <div class=doc-md-description> <p>Ignored.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/send_reminders.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=nd>@shared_task</span><span class=p>(</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;slack.slack_save_reminder_message&quot;</span><span class=p>,</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>    <span class=n>retry_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;max_retries&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>},</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>    <span class=n>default_retry_delay</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=p>)</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=k>def</span> <span class=nf>slack_save_reminder_message</span><span class=p>(</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=n>message_response_data</span><span class=p>:</span> <span class=n>SlackResponse</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=o>**</span><span class=n>_kwargs</span><span class=p>:</span> <span class=n>Any</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Save the [firefighter.slack.models.Message][] from a Slack response. First `args` is an [firefighter.incidents.models.Incident][] ID.</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>
<a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=sd>    Args:</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=sd>        message_response_data (dict): SlackResponse data.</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=sd>        *args: Expect one value, the [firefighter.incidents.models.Incident][] ID.</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=sd>        **_kwargs: Ignored.</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=n>user</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=n>slack_id</span><span class=o>=</span><span class=n>message_response_data</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>][</span><span class=s2>&quot;user&quot;</span><span class=p>]</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=p>)</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=n>conversation</span> <span class=o>=</span> <span class=n>IncidentChannel</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>        <span class=n>channel_id</span><span class=o>=</span><span class=n>message_response_data</span><span class=p>[</span><span class=s2>&quot;channel&quot;</span><span class=p>]</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>    <span class=p>)</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>    <span class=n>ts</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>fromtimestamp</span><span class=p>(</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=nb>float</span><span class=p>(</span><span class=n>message_response_data</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>][</span><span class=s2>&quot;ts&quot;</span><span class=p>]),</span> <span class=n>tz</span><span class=o>=</span><span class=n>timezone</span><span class=o>.</span><span class=n>utc</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>    <span class=p>)</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>    <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>user</span><span class=p>,</span> <span class=s2>&quot;slack_user&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>user</span><span class=o>.</span><span class=n>slack_user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;User not found for slack_id </span><span class=si>{</span><span class=n>message_response_data</span><span class=p>[</span><span class=s1>&#39;message&#39;</span><span class=p>][</span><span class=s1>&#39;user&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=n>Message</span><span class=p>(</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=n>conversation</span><span class=o>=</span><span class=n>conversation</span><span class=p>,</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=n>ts</span><span class=o>=</span><span class=n>ts</span><span class=p>,</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=nb>type</span><span class=o>=</span><span class=n>message_response_data</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>][</span><span class=s2>&quot;type&quot;</span><span class=p>],</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>        <span class=n>ff_type</span><span class=o>=</span><span class=n>message_response_data</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>][</span><span class=s2>&quot;metadata&quot;</span><span class=p>][</span><span class=s2>&quot;event_type&quot;</span><span class=p>],</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>        <span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=o>.</span><span class=n>slack_user</span><span class=p>,</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=n>incident_id</span><span class=o>=</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.sync_users class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">sync_users</span> <a href=#firefighter.slack.tasks.sync_users class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.sync_users.sync_users class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">sync_users</span> <a href=#firefighter.slack.tasks.sync_users.sync_users class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>sync_users</span><span class=p>(</span><span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>,</span> <span class=o>**</span><span class=n>_options</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves users from Slack and updates the database (e.g. name, new profile picture, email, active status...).</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/sync_users.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=nd>@shared_task</span><span class=p>(</span>
<a id=__codelineno-0-18 name=__codelineno-0-18></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;slack.sync_users&quot;</span><span class=p>,</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a>    <span class=n>retry_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;max_retries&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>},</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a>    <span class=n>default_retry_delay</span><span class=o>=</span><span class=mi>90</span><span class=p>,</span>
<a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=p>)</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=k>def</span> <span class=nf>sync_users</span><span class=p>(</span><span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=o>**</span><span class=n>_options</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves users from Slack and updates the database (e.g. name, new profile picture, email, active status...).&quot;&quot;&quot;</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>task</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.update_usergroups_members class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">update_usergroups_members</span> <a href=#firefighter.slack.tasks.update_usergroups_members class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.update_usergroups_members.update_usergroups_members_from_slack_celery class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">update_usergroups_members_from_slack_celery</span> <a href=#firefighter.slack.tasks.update_usergroups_members.update_usergroups_members_from_slack_celery class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>update_usergroups_members_from_slack_celery</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span><span class=p>]]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Wrapper around the actual task, as Celery doesn't support passing Django models.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/update_usergroups_members.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=nd>@shared_task</span><span class=p>(</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;slack.update_usergroups_members_from_slack&quot;</span><span class=p>,</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>retry_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;max_retries&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>},</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>default_retry_delay</span><span class=o>=</span><span class=mi>90</span><span class=p>,</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=p>)</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=k>def</span> <span class=nf>update_usergroups_members_from_slack_celery</span><span class=p>(</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>    <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=o>**</span><span class=n>options</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>]]:</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Wrapper around the actual task, as Celery doesn&#39;t support passing Django models.&quot;&quot;&quot;</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=n>fails</span> <span class=o>=</span> <span class=n>update_usergroups_members_from_slack</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>)</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>    <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;failed_groups&quot;</span><span class=p>:</span> <span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>usergroup_id</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>fails</span><span class=p>]}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.tasks.update_users class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">update_users</span> <a href=#firefighter.slack.tasks.update_users class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.tasks.update_users.update_users_from_slack class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">update_users_from_slack</span> <a href=#firefighter.slack.tasks.update_users.update_users_from_slack class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>update_users_from_slack</span><span class=p>(</span><span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>,</span> <span class=o>**</span><span class=n>_options</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves users from Slack and updates the database (e.g. name, new profile picture, email, active status...).</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/tasks/update_users.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=nd>@shared_task</span><span class=p>(</span>
<a id=__codelineno-0-14 name=__codelineno-0-14></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;slack.update_users_from_slack&quot;</span><span class=p>,</span>
<a id=__codelineno-0-15 name=__codelineno-0-15></a>    <span class=n>retry_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;max_retries&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>},</span>
<a id=__codelineno-0-16 name=__codelineno-0-16></a>    <span class=n>default_retry_delay</span><span class=o>=</span><span class=mi>90</span><span class=p>,</span>
<a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=p>)</span>
<a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=k>def</span> <span class=nf>update_users_from_slack</span><span class=p>(</span><span class=o>*</span><span class=n>_args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=o>**</span><span class=n>_options</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves users from Slack and updates the database (e.g. name, new profile picture, email, active status...).&quot;&quot;&quot;</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a>    <span class=n>queryset</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span><span class=o>.</span><span class=n>order_by</span><span class=p>(</span><span class=s2>&quot;user__updated_at&quot;</span><span class=p>)[:</span><span class=mi>100</span><span class=p>]</span>
<a id=__codelineno-0-21 name=__codelineno-0-21></a>    <span class=k>for</span> <span class=n>slack_user</span> <span class=ow>in</span> <span class=n>queryset</span><span class=p>:</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a>        <span class=n>slack_user</span><span class=o>.</span><span class=n>update_user_info</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.urls class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">urls</span> <a href=#firefighter.slack.urls class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.utils class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">utils</span> <a href=#firefighter.slack.utils class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.utils.channel_name_from_incident class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">channel_name_from_incident</span> <a href=#firefighter.slack.utils.channel_name_from_incident class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>channel_name_from_incident</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Lowercase, truncated at 80 chars, this is obviously the channel #name.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=k>def</span> <span class=nf>channel_name_from_incident</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Lowercase, truncated at 80 chars, this is obviously the channel #name.&quot;&quot;&quot;</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=p>,</span> <span class=s2>&quot;created_at&quot;</span><span class=p>)</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>        <span class=ow>or</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>incident</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>)</span>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=ow>or</span> <span class=ow>not</span> <span class=n>incident</span><span class=o>.</span><span class=n>created_at</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=ow>or</span> <span class=ow>not</span> <span class=n>incident</span><span class=o>.</span><span class=n>id</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=p>):</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>            <span class=s2>&quot;Incident must be saved before slack_channel_name can be computed&quot;</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>        <span class=p>)</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=n>date_formatted</span> <span class=o>=</span> <span class=n>localtime</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>created_at</span><span class=p>)</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%Y%m</span><span class=si>%d</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=k>if</span> <span class=n>incident</span><span class=o>.</span><span class=n>environment</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>incident</span><span class=o>.</span><span class=n>environment</span><span class=o>.</span><span class=n>value</span> <span class=o>!=</span> <span class=s2>&quot;PRD&quot;</span><span class=p>:</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>        <span class=n>topic</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>date_formatted</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>)[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>environment</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>        <span class=n>topic</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>date_formatted</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>)[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>    <span class=c1># Strip non-alphanumeric characters, cut at 80 chars</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=c1># XXX django.utils.text.slugify should be used instead</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=n>topic</span> <span class=o>=</span> <span class=n>topic</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>,</span> <span class=s2>&quot;-&quot;</span><span class=p>)</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=n>topic</span> <span class=o>=</span> <span class=n>NON_ALPHANUMERIC_CHARACTERS</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s2>&quot;-&quot;</span><span class=p>,</span> <span class=n>topic</span><span class=p>)</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=k>return</span> <span class=n>topic</span><span class=o>.</span><span class=n>lower</span><span class=p>()[:</span><span class=mi>80</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.utils.get_slack_user_id_from_body class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">get_slack_user_id_from_body</span> <a href=#firefighter.slack.utils.get_slack_user_id_from_body class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_slack_user_id_from_body</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get the slack user id from the body of a Slack request, in <code>user_id</code> or <code>user.id</code>.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-82 name=__codelineno-0-82></a><span class=k>def</span> <span class=nf>get_slack_user_id_from_body</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the slack user id from the body of a Slack request, in `user_id` or `user.id`.&quot;&quot;&quot;</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=k>return</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user_id&quot;</span><span class=p>,</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=firefighter.slack.utils.respond class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">respond</span> <a href=#firefighter.slack.utils.respond class=headerlink title="Permanent link">¤</a></h3> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>respond</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>],</span> <span class=n>text</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>blocks</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=collections.abc.Sequence href=https://docs.python.org/3.11/library/collections.abc.html#collections.abc.Sequence>Sequence</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=n><span title=slack_sdk.models.blocks.Block>Block</span></span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>client</span><span class=p>:</span> <span class=n><span title=slack_sdk.web.client.WebClient>WebClient</span></span> <span class=o>=</span> <span class=n>DefaultWebClient</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Respond to the user, depending on where the message was coming from.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=nd>@slack_client</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=k>def</span> <span class=nf>respond</span><span class=p>(</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=n>text</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>    <span class=n>blocks</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Sequence</span><span class=p>[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=n>Block</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>    <span class=n>client</span><span class=p>:</span> <span class=n>WebClient</span> <span class=o>=</span> <span class=n>DefaultWebClient</span><span class=p>,</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Respond to the user, depending on where the message was coming from.&quot;&quot;&quot;</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user_id&quot;</span><span class=p>,</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>))</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>    <span class=n>channel_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;channel_id&quot;</span><span class=p>,</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;channel&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>))</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>user_id</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>channel_id</span><span class=p>:</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>            <span class=s2>&quot;Cannot find user_id (or user.id) or channel_id (or channel.id) in the body. At least one is required.&quot;</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=p>)</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=c1># From Direct Message =&gt; Always respond on the conv between the user and the bot.</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=k>if</span> <span class=p>(</span><span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;channel_name&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;directmessage&quot;</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>channel_id</span><span class=p>)</span> <span class=ow>and</span> <span class=n>user_id</span><span class=p>:</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=c1># We should always be able to respond in this conversation...</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span><span class=n>channel</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=n>text</span><span class=p>,</span> <span class=n>blocks</span><span class=o>=</span><span class=n>blocks</span><span class=p>)</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>        <span class=k>return</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>user_id</span><span class=p>:</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Cannot find user_id (or user.id) in the body.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=c1># From channel =&gt; post as ephemeral in the channel</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>        <span class=n>_send_ephemeral</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>blocks</span><span class=p>,</span> <span class=n>client</span><span class=p>,</span> <span class=n>user_id</span><span class=p>,</span> <span class=n>channel_id</span><span class=p>)</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>    <span class=k>except</span> <span class=p>(</span><span class=n>SlackApiError</span><span class=p>,</span> <span class=ne>ValueError</span><span class=p>):</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>            <span class=s2>&quot;Failed to send ephemeral chat message to user! Body: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>            <span class=n>body</span><span class=p>,</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>            <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>        <span class=p>)</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>        <span class=c1># Fallback to DM</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=k>if</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=s2>&quot;view_submission&quot;</span><span class=p>:</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>            <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>                <span class=n>channel</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>                <span class=n>text</span><span class=o>=</span><span class=s2>&quot;:warning: The bot could not respond in the channel you invoked it. Please add it to this channel or conversation if you want to interact with the bot there. If you believe this is a bug, please tell @pulse.&quot;</span><span class=p>,</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>            <span class=p>)</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=n>client</span><span class=o>.</span><span class=n>chat_postMessage</span><span class=p>(</span><span class=n>channel</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=n>text</span><span class=p>,</span> <span class=n>blocks</span><span class=o>=</span><span class=n>blocks</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h2 id=firefighter.slack.views class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">views</span> <a href=#firefighter.slack.views class=headerlink title="Permanent link">¤</a></h2> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.views.events class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">events</span> <a href=#firefighter.slack.views.events class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h4 id=firefighter.slack.views.events.handle_message_events_ignore class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">handle_message_events_ignore</span> <a href=#firefighter.slack.views.events.handle_message_events_ignore class=headerlink title="Permanent link">¤</a></h4> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>handle_message_events_ignore</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Ignore other message events. Must be the last event handler for message.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/__init__.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=nd>@app</span><span class=o>.</span><span class=n>event</span><span class=p>(</span><span class=s2>&quot;message&quot;</span><span class=p>)</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=k>def</span> <span class=nf>handle_message_events_ignore</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Ignore other message events.</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=sd>    Must be the last event handler for message.</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.actions_and_shortcuts class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">actions_and_shortcuts</span> <a href=#firefighter.slack.views.events.actions_and_shortcuts class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.actions_and_shortcuts.open_link class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">open_link</span> <a href=#firefighter.slack.views.events.actions_and_shortcuts.open_link class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_link</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n><span title=slack_bolt.context.ack.ack.Ack>Ack</span></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Does nothing. ack() is mandatory, even on buttons that open a URL.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/actions_and_shortcuts.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=nd>@app</span><span class=o>.</span><span class=n>action</span><span class=p>(</span><span class=s2>&quot;open_link&quot;</span><span class=p>)</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a><span class=k>def</span> <span class=nf>open_link</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n>Ack</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Does nothing. ack() is mandatory, even on buttons that open a URL.&quot;&quot;&quot;</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=n>ack</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.actions_and_shortcuts.update_update_modal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">update_update_modal</span> <a href=#firefighter.slack.views.events.actions_and_shortcuts.update_update_modal class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>update_update_modal</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n><span title=slack_bolt.context.ack.ack.Ack>Ack</span></span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reacts to the selection of an incident, in the select modal.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/actions_and_shortcuts.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=nd>@app</span><span class=o>.</span><span class=n>action</span><span class=p>(</span><span class=s2>&quot;incident_update_select_incident&quot;</span><span class=p>)</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=k>def</span> <span class=nf>update_update_modal</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n>Ack</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reacts to the selection of an incident, in the select modal.&quot;&quot;&quot;</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>    <span class=n>ack</span><span class=p>()</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>body</span><span class=p>)</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=n>callback_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=s2>&quot;view.callback_id&quot;</span><span class=p>)</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=k>if</span> <span class=n>callback_id</span> <span class=ow>in</span> <span class=n>selectable</span><span class=p>:</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>        <span class=n>view</span> <span class=o>=</span> <span class=n>selectable</span><span class=p>[</span><span class=n>callback_id</span><span class=p>]</span><span class=o>.</span><span class=n>build_modal_with_context</span><span class=p>(</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>            <span class=n>body</span><span class=p>,</span> <span class=n>callback_id</span><span class=o>=</span><span class=n>callback_id</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=p>)</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>        <span class=n>update_modal</span><span class=p>(</span><span class=n>body</span><span class=o>=</span><span class=n>body</span><span class=p>,</span> <span class=n>view</span><span class=o>=</span><span class=n>view</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.channel_archive class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">channel_archive</span> <a href=#firefighter.slack.views.events.channel_archive class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.channel_id_changed class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">channel_id_changed</span> <a href=#firefighter.slack.views.events.channel_id_changed class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.channel_rename class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">channel_rename</span> <a href=#firefighter.slack.views.events.channel_rename class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.channel_shared class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">channel_shared</span> <a href=#firefighter.slack.views.events.channel_shared class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.channel_unarchive class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">channel_unarchive</span> <a href=#firefighter.slack.views.events.channel_unarchive class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.channel_unshared class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">channel_unshared</span> <a href=#firefighter.slack.views.events.channel_unshared class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.commands class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">commands</span> <a href=#firefighter.slack.views.events.commands class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=firefighter.slack.views.events.commands.SLACK_BUILTIN_COMMANDS class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">SLACK_BUILTIN_COMMANDS</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a href=#firefighter.slack.views.events.commands.SLACK_BUILTIN_COMMANDS class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SLACK_BUILTIN_COMMANDS</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=s2>&quot;/archive&quot;</span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=s2>&quot;/call&quot;</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=s2>&quot;/collapse&quot;</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=s2>&quot;/dm&quot;</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=s2>&quot;/expand&quot;</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=s2>&quot;/feed&quot;</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=s2>&quot;/invite&quot;</span><span class=p>,</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    <span class=s2>&quot;/leave&quot;</span><span class=p>,</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=s2>&quot;/msg&quot;</span><span class=p>,</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=s2>&quot;/remind&quot;</span><span class=p>,</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=s2>&quot;/remove&quot;</span><span class=p>,</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>    <span class=s2>&quot;/rename&quot;</span><span class=p>,</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=s2>&quot;/search&quot;</span><span class=p>,</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>    <span class=s2>&quot;/shrug&quot;</span><span class=p>,</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>    <span class=s2>&quot;/status&quot;</span><span class=p>,</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>    <span class=s2>&quot;/topic&quot;</span><span class=p>,</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>List of all Slack built-in commands (<a href=https://slack.com/help/articles/201259356>https://slack.com/help/articles/201259356</a> checked August 2022)</p> </div> </div> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.commands.register_commands class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">register_commands</span> <a href=#firefighter.slack.views.events.commands.register_commands class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>register_commands</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Register the command with its aliases. Commands are checked: - Fix commands that does not start with a slash, contain spaces, uppercase characters or are longer than 32 characters. - Ignore commands which names are built-in Slack commands.</p> <p>⚠️ Don't forget to add the command and its aliases on your Slack App settings.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/commands.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span>
<span class=normal><a href=#__codelineno-0-93>93</a></span>
<span class=normal><a href=#__codelineno-0-94>94</a></span>
<span class=normal><a href=#__codelineno-0-95>95</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=k>def</span> <span class=nf>register_commands</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Register the command with its aliases.</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>    Commands are checked:</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>    - Fix commands that does not start with a slash, contain spaces, uppercase characters or are longer than 32 characters.</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>    - Ignore commands which names are built-in Slack commands.</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>
<a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>    ⚠️ Don&#39;t forget to add the command and its aliases on your Slack App settings.</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=n>command_main</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>settings</span><span class=o>.</span><span class=n>SLACK_INCIDENT_COMMAND</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>    <span class=n>command_aliases</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>settings</span><span class=o>.</span><span class=n>SLACK_INCIDENT_COMMAND_ALIASES</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=n>commands</span> <span class=o>=</span> <span class=p>[</span><span class=n>command_main</span><span class=p>,</span> <span class=o>*</span><span class=n>command_aliases</span><span class=p>]</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Registered commands: </span><span class=si>{</span><span class=n>commands</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=k>for</span> <span class=n>command</span> <span class=ow>in</span> <span class=n>commands</span><span class=p>:</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>command</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>            <span class=n>command</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;/</span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&quot;</span>  <span class=c1># noqa: PLW2901</span>
<a id=__codelineno-0-72 name=__codelineno-0-72></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a>                <span class=sa>f</span><span class=s2>&quot;Command &#39;</span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&#39; does not start with a slash. We added one but please fix your configuration.&quot;</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>            <span class=p>)</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=k>if</span> <span class=s2>&quot; &quot;</span> <span class=ow>in</span> <span class=n>command</span><span class=p>:</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>            <span class=n>command</span> <span class=o>=</span> <span class=n>command</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span>  <span class=c1># noqa: PLW2901</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>                <span class=sa>f</span><span class=s2>&quot;Command &#39;</span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&#39; contained spaces. We removed them but please fix your configuration.&quot;</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>            <span class=p>)</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>command</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>32</span><span class=p>:</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>            <span class=n>command</span> <span class=o>=</span> <span class=n>command</span><span class=p>[:</span><span class=mi>32</span><span class=p>]</span>  <span class=c1># noqa: PLW2901</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>                <span class=sa>f</span><span class=s2>&quot;Command &#39;</span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&#39; was longer than 32 characters. We truncated it but please fix your configuration.&quot;</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>            <span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>        <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>char</span><span class=o>.</span><span class=n>isupper</span><span class=p>()</span> <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>command</span><span class=p>):</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>            <span class=n>command</span> <span class=o>=</span> <span class=n>command</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>  <span class=c1># noqa: PLW2901</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>                <span class=sa>f</span><span class=s2>&quot;Command &#39;</span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&#39; contained uppercase characters. We lower-cased them but please fix your configuration.&quot;</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>            <span class=p>)</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=k>if</span> <span class=n>command</span> <span class=ow>in</span> <span class=n>SLACK_BUILTIN_COMMANDS</span><span class=p>:</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>                <span class=sa>f</span><span class=s2>&quot;Command &#39;</span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&#39; is a built-in command, skipping registration. This command will not work.&quot;</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>            <span class=p>)</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>            <span class=k>continue</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>        <span class=n>app</span><span class=o>.</span><span class=n>command</span><span class=p>(</span><span class=n>command</span><span class=p>)(</span><span class=n>manage_incident</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.home class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">home</span> <a href=#firefighter.slack.views.events.home class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.member_joined_channel class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">member_joined_channel</span> <a href=#firefighter.slack.views.events.member_joined_channel class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.member_joined_channel.member_joined_channel class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">member_joined_channel</span> <a href=#firefighter.slack.views.events.member_joined_channel.member_joined_channel class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>member_joined_channel</span><span class=p>(</span><span class=n>event</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>When a user joins a channel, we add it to the list of conversations.</p> <p>API Reference: <a href=https://api.slack.com/events/member_joined_channel>https://api.slack.com/events/member_joined_channel</a></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/member_joined_channel.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=nd>@app</span><span class=o>.</span><span class=n>event</span><span class=p>(</span><span class=s2>&quot;member_joined_channel&quot;</span><span class=p>)</span>
<a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=k>def</span> <span class=nf>member_joined_channel</span><span class=p>(</span><span class=n>event</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;When a user joins a channel, we add it to the list of conversations.</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a>
<a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=sd>    API Reference: https://api.slack.com/events/member_joined_channel</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>channel_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;channel&quot;</span><span class=p>)</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>channel_type</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;channel_type&quot;</span><span class=p>)</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;user&quot;</span><span class=p>)</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=n>inviter</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;inviter&quot;</span><span class=p>)</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>channel_id</span><span class=p>:</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Invalid event! </span><span class=si>{</span><span class=n>event</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>        <span class=k>return</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>    <span class=n>conversation</span> <span class=o>=</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_none</span><span class=p>(</span><span class=n>channel_id</span><span class=o>=</span><span class=n>channel_id</span><span class=p>)</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>conversation</span><span class=p>:</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Conversation </span><span class=si>{</span><span class=n>channel_id</span><span class=si>}</span><span class=s2> does not exist!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>        <span class=k>return</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>    <span class=k>if</span> <span class=n>channel_type</span> <span class=o>==</span> <span class=s2>&quot;C&quot;</span> <span class=ow>and</span> <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>!=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PUBLIC_CHANNEL</span><span class=p>:</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PUBLIC_CHANNEL</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=k>elif</span> <span class=n>channel_type</span> <span class=o>==</span> <span class=s2>&quot;G&quot;</span> <span class=ow>and</span> <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>!=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PRIVATE_CHANNEL</span><span class=p>:</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PRIVATE_CHANNEL</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>    <span class=k>if</span> <span class=n>user_id</span><span class=p>:</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=n>user</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>        <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;User </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2> does not exist!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>            <span class=k>return</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>members</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=c1># Check if Conversation is also IncidentChannel</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>            <span class=n>incident_channel</span><span class=p>:</span> <span class=n>IncidentChannel</span> <span class=o>=</span> <span class=n>conversation</span><span class=o>.</span><span class=n>incidentchannel</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>        <span class=k>except</span> <span class=n>IncidentChannel</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>            <span class=k>return</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>        <span class=k>if</span> <span class=n>inviter</span> <span class=ow>and</span> <span class=n>incident_channel</span><span class=p>:</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>            <span class=n>inviter_user</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>inviter</span><span class=p>)</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>            <span class=k>if</span> <span class=n>inviter_user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Inviter </span><span class=si>{</span><span class=n>inviter</span><span class=si>}</span><span class=s2> does not exist!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>                <span class=k>return</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;User </span><span class=si>{</span><span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> joined </span><span class=si>{</span><span class=n>conversation</span><span class=si>}</span><span class=s2> by </span><span class=si>{</span><span class=n>inviter_user</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>            <span class=n>inviter_user</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>        <span class=n>incident_channel</span><span class=o>.</span><span class=n>members</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.member_left_channel class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">member_left_channel</span> <a href=#firefighter.slack.views.events.member_left_channel class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.member_left_channel.member_left_channel class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">member_left_channel</span> <a href=#firefighter.slack.views.events.member_left_channel.member_left_channel class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>member_left_channel</span><span class=p>(</span><span class=n>event</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>When a user leaves a channel, we remove it from the list of conversations.</p> <p>API Reference: <a href=https://api.slack.com/events/member_left_channel>https://api.slack.com/events/member_left_channel</a></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/member_left_channel.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=nd>@app</span><span class=o>.</span><span class=n>event</span><span class=p>(</span><span class=s2>&quot;member_left_channel&quot;</span><span class=p>)</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a><span class=k>def</span> <span class=nf>member_left_channel</span><span class=p>(</span><span class=n>event</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;When a user leaves a channel, we remove it from the list of conversations.</span>
<a id=__codelineno-0-21 name=__codelineno-0-21></a>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=sd>    API Reference: https://api.slack.com/events/member_left_channel</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>channel_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;channel&quot;</span><span class=p>)</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>channel_type</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;channel_type&quot;</span><span class=p>)</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=s2>&quot;user&quot;</span><span class=p>)</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>channel_id</span><span class=p>:</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Invalid event! </span><span class=si>{</span><span class=n>event</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a>        <span class=k>return</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a>
<a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=n>conversation</span> <span class=o>=</span> <span class=n>Conversation</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_or_none</span><span class=p>(</span><span class=n>channel_id</span><span class=o>=</span><span class=n>channel_id</span><span class=p>)</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>conversation</span><span class=p>:</span>
<a id=__codelineno-0-33 name=__codelineno-0-33></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Conversation </span><span class=si>{</span><span class=n>channel_id</span><span class=si>}</span><span class=s2> does not exist!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a>        <span class=k>return</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>    <span class=k>if</span> <span class=n>channel_type</span> <span class=o>==</span> <span class=s2>&quot;C&quot;</span> <span class=ow>and</span> <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>!=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PUBLIC_CHANNEL</span><span class=p>:</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PUBLIC_CHANNEL</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=k>elif</span> <span class=n>channel_type</span> <span class=o>==</span> <span class=s2>&quot;G&quot;</span> <span class=ow>and</span> <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>!=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PRIVATE_CHANNEL</span><span class=p>:</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>type</span> <span class=o>=</span> <span class=n>ConversationType</span><span class=o>.</span><span class=n>PRIVATE_CHANNEL</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=k>if</span> <span class=n>user_id</span><span class=p>:</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=n>user</span> <span class=o>=</span> <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>        <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;User </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2> does not exist!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>            <span class=k>return</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>        <span class=n>conversation</span><span class=o>.</span><span class=n>members</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=c1># Check if Conversation is also IncidentChannel</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>            <span class=n>incident_channel</span><span class=p>:</span> <span class=n>IncidentChannel</span> <span class=o>=</span> <span class=n>conversation</span><span class=o>.</span><span class=n>incidentchannel</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=k>except</span> <span class=n>IncidentChannel</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>:</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>            <span class=k>return</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=k>if</span> <span class=n>incident_channel</span><span class=p>:</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;User </span><span class=si>{</span><span class=n>user</span><span class=si>}</span><span class=s2> left </span><span class=si>{</span><span class=n>conversation</span><span class=si>}</span><span class=s2> &quot;</span><span class=p>)</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>            <span class=n>incident</span> <span class=o>=</span> <span class=n>incident_channel</span><span class=o>.</span><span class=n>incident</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>            <span class=n>IncidentMembership</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>incident</span><span class=o>=</span><span class=n>incident</span><span class=p>,</span> <span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=p>)</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">message</span> <a href=#firefighter.slack.views.events.message class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.message.handle_message_events_ignore class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">handle_message_events_ignore</span> <a href=#firefighter.slack.views.events.message.handle_message_events_ignore class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>handle_message_events_ignore</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Ignore other message events. Must be the last event handler for message.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/message.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-39 name=__codelineno-0-39></a><span class=nd>@app</span><span class=o>.</span><span class=n>event</span><span class=p>({</span><span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;message&quot;</span><span class=p>,</span> <span class=s2>&quot;subtype&quot;</span><span class=p>:</span> <span class=s2>&quot;channel_topic&quot;</span><span class=p>})</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=k>def</span> <span class=nf>handle_message_events_ignore</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Ignore other message events.</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=sd>    Must be the last event handler for message.</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>    <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.message_deleted class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">message_deleted</span> <a href=#firefighter.slack.views.events.message_deleted class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.events.reaction_added class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">reaction_added</span> <a href=#firefighter.slack.views.events.reaction_added class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h5 id=firefighter.slack.views.events.reaction_added.reaction_added_ignore class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">reaction_added_ignore</span> <a href=#firefighter.slack.views.events.reaction_added.reaction_added_ignore class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>reaction_added_ignore</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Ignore other reaction_added events. Must be the last event handler for reaction_added.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/events/reaction_added.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=nd>@app</span><span class=o>.</span><span class=n>event</span><span class=p>(</span><span class=s2>&quot;reaction_added&quot;</span><span class=p>)</span>
<a id=__codelineno-0-124 name=__codelineno-0-124></a><span class=k>def</span> <span class=nf>reaction_added_ignore</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Ignore other reaction_added events.</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a><span class=sd>    Must be the last event handler for reaction_added.</span>
<a id=__codelineno-0-127 name=__codelineno-0-127></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>    <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.views.modals class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">modals</span> <a href=#firefighter.slack.views.modals class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.base_modal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">base_modal</span> <a href=#firefighter.slack.views.modals.base_modal class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.base_modal.base class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">base</span> <a href=#firefighter.slack.views.modals.base_modal.base class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.base_modal.base.MessageForm class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">MessageForm</span> <a href=#firefighter.slack.views.modals.base_modal.base.MessageForm class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>MessageForm</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.SlackModal href=#firefighter.slack.views.modals.base_modal.base.SlackModal>SlackModal</a></code>, <code><a class="autorefs autorefs-external" title=typing.Generic href=https://docs.python.org/3.11/library/typing.html#typing.Generic>Generic</a>[<span title=firefighter.slack.views.modals.base_modal.base.T>T</span>]</code></p> <p>Form wrapper to use a Django form in a Slack message.</p> <p>Provided a Django form in form_class, it will handle: - generation of Slack Blocks - validation and submission of the form</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.base_modal.base.MessageForm.callback_id class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">callback_id</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.base_modal.base.MessageForm.callback_id class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>callback_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=re.Pattern href=https://docs.python.org/3.11/library/re.html#re.Pattern>Pattern</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Callback ID for the Slack View</p> </div> </div> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.base_modal.base.MessageForm.open_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">open_shortcut</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.base_modal.base.MessageForm.open_shortcut class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_shortcut</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p><a href=https://api.slack.com/interactivity/shortcuts>Slack shortcut</a> to open the modal.</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.base_modal.base.ModalForm class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">ModalForm</span> <a href=#firefighter.slack.views.modals.base_modal.base.ModalForm class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>ModalForm</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.SlackModal href=#firefighter.slack.views.modals.base_modal.base.SlackModal>SlackModal</a></code>, <code><a class="autorefs autorefs-external" title=typing.Generic href=https://docs.python.org/3.11/library/typing.html#typing.Generic>Generic</a>[<span title=firefighter.slack.views.modals.base_modal.base.T>T</span>]</code></p> <p>Specific SlackModal to handle a Django form.</p> <p>Provided a Django form in form_class, it will handle: - generation of Slack Blocks - validation and submission of the form</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.base_modal.base.ModalForm.callback_id class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">callback_id</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.base_modal.base.ModalForm.callback_id class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>callback_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=re.Pattern href=https://docs.python.org/3.11/library/re.html#re.Pattern>Pattern</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Callback ID for the Slack View</p> </div> </div> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.base_modal.base.ModalForm.open_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">open_shortcut</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.base_modal.base.ModalForm.open_shortcut class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_shortcut</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p><a href=https://api.slack.com/interactivity/shortcuts>Slack shortcut</a> to open the modal.</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.base_modal.base.SlackModal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackModal</span> <a href=#firefighter.slack.views.modals.base_modal.base.SlackModal class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SlackModal</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Two main responsibilities: - Register the modal on Slack to open it with shortcuts or actions - Provide useful context for <code>build_modal_fn</code> and <code>handle_modal_fn</code>, such as body, incident, user, etc.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.base_modal.base.SlackModal.callback_id class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">callback_id</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.base_modal.base.SlackModal.callback_id class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>callback_id</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=re.Pattern href=https://docs.python.org/3.11/library/re.html#re.Pattern>Pattern</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Callback ID for the Slack View</p> </div> </div> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.base_modal.base.SlackModal.open_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">open_shortcut</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.base_modal.base.SlackModal.open_shortcut class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_shortcut</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p><a href=https://api.slack.com/interactivity/shortcuts>Slack shortcut</a> to open the modal.</p> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.base_modal.form_utils class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">form_utils</span> <a href=#firefighter.slack.views.modals.base_modal.form_utils class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.base_modal.form_utils.SafeOption class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SafeOption</span> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SafeOption class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SafeOption</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>value</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>label</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>text</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=n><span title=slack_sdk.models.blocks.basic_components.TextObject>TextObject</span></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>description</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span> <span class=o>|</span> <span class=n><span title=slack_sdk.models.blocks.basic_components.TextObject>TextObject</span></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>url</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=o>**</span><span class=n>others</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=slack_sdk.models.blocks.basic_components.Option>Option</span></code></p> <p>Make sure we are creating valid Option, warn otherwise.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/form_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-551>551</a></span>
<span class=normal><a href=#__codelineno-0-552>552</a></span>
<span class=normal><a href=#__codelineno-0-553>553</a></span>
<span class=normal><a href=#__codelineno-0-554>554</a></span>
<span class=normal><a href=#__codelineno-0-555>555</a></span>
<span class=normal><a href=#__codelineno-0-556>556</a></span>
<span class=normal><a href=#__codelineno-0-557>557</a></span>
<span class=normal><a href=#__codelineno-0-558>558</a></span>
<span class=normal><a href=#__codelineno-0-559>559</a></span>
<span class=normal><a href=#__codelineno-0-560>560</a></span>
<span class=normal><a href=#__codelineno-0-561>561</a></span>
<span class=normal><a href=#__codelineno-0-562>562</a></span>
<span class=normal><a href=#__codelineno-0-563>563</a></span>
<span class=normal><a href=#__codelineno-0-564>564</a></span>
<span class=normal><a href=#__codelineno-0-565>565</a></span>
<span class=normal><a href=#__codelineno-0-566>566</a></span>
<span class=normal><a href=#__codelineno-0-567>567</a></span>
<span class=normal><a href=#__codelineno-0-568>568</a></span>
<span class=normal><a href=#__codelineno-0-569>569</a></span>
<span class=normal><a href=#__codelineno-0-570>570</a></span>
<span class=normal><a href=#__codelineno-0-571>571</a></span>
<span class=normal><a href=#__codelineno-0-572>572</a></span>
<span class=normal><a href=#__codelineno-0-573>573</a></span>
<span class=normal><a href=#__codelineno-0-574>574</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-551 name=__codelineno-0-551></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
<a id=__codelineno-0-552 name=__codelineno-0-552></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-553 name=__codelineno-0-553></a>    <span class=o>*</span><span class=p>,</span>
<a id=__codelineno-0-554 name=__codelineno-0-554></a>    <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<a id=__codelineno-0-555 name=__codelineno-0-555></a>    <span class=n>label</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-556 name=__codelineno-0-556></a>    <span class=n>text</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=n>TextObject</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>  <span class=c1># Block Kit</span>
<a id=__codelineno-0-557 name=__codelineno-0-557></a>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=n>TextObject</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-558 name=__codelineno-0-558></a>    <span class=n>url</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-559 name=__codelineno-0-559></a>    <span class=o>**</span><span class=n>others</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
<a id=__codelineno-0-560 name=__codelineno-0-560></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-561 name=__codelineno-0-561></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>75</span><span class=p>:</span>
<a id=__codelineno-0-562 name=__codelineno-0-562></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Option value is too long: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
<a id=__codelineno-0-563 name=__codelineno-0-563></a>        <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=p>[:</span><span class=mi>75</span><span class=p>]</span>
<a id=__codelineno-0-564 name=__codelineno-0-564></a>    <span class=k>if</span> <span class=n>label</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>label</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>75</span><span class=p>:</span>
<a id=__codelineno-0-565 name=__codelineno-0-565></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Option label is too long: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>label</span><span class=p>)</span>
<a id=__codelineno-0-566 name=__codelineno-0-566></a>        <span class=n>label</span> <span class=o>=</span> <span class=n>label</span><span class=p>[:</span><span class=mi>74</span><span class=p>]</span> <span class=o>+</span> <span class=s2>&quot;…&quot;</span>
<a id=__codelineno-0-567 name=__codelineno-0-567></a>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
<a id=__codelineno-0-568 name=__codelineno-0-568></a>        <span class=n>value</span><span class=o>=</span><span class=n>value</span><span class=p>,</span>
<a id=__codelineno-0-569 name=__codelineno-0-569></a>        <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span>
<a id=__codelineno-0-570 name=__codelineno-0-570></a>        <span class=n>text</span><span class=o>=</span><span class=n>text</span><span class=p>,</span>
<a id=__codelineno-0-571 name=__codelineno-0-571></a>        <span class=n>description</span><span class=o>=</span><span class=n>description</span><span class=p>,</span>
<a id=__codelineno-0-572 name=__codelineno-0-572></a>        <span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span>
<a id=__codelineno-0-573 name=__codelineno-0-573></a>        <span class=o>**</span><span class=n>others</span><span class=p>,</span>
<a id=__codelineno-0-574 name=__codelineno-0-574></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.base_modal.form_utils.SlackForm class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackForm</span> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackForm class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SlackForm</span><span class=p>(</span><span class=n>form</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#type>type</a></span><span class=p>[</span><span class=n><span title=firefighter.slack.views.modals.base_modal.form_utils.T>T</span></span><span class=p>],</span> <span class=n>slack_fields</span><span class=p>:</span> <span class=n><span title=firefighter.slack.views.modals.base_modal.form_utils.SlackFormAttributesDict>SlackFormAttributesDict</span></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=typing.Generic href=https://docs.python.org/3.11/library/typing.html#typing.Generic>Generic</a>[<span title=firefighter.slack.views.modals.base_modal.form_utils.T>T</span>]</code></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/form_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>    <span class=n>form</span><span class=p>:</span> <span class=nb>type</span><span class=p>[</span><span class=n>T</span><span class=p>],</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>    <span class=n>slack_fields</span><span class=p>:</span> <span class=n>SlackFormAttributesDict</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=p>):</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>form_class</span> <span class=o>=</span> <span class=n>form</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>form</span><span class=p>,</span> <span class=s2>&quot;slack_fields&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>form</span><span class=o>.</span><span class=n>slack_fields</span><span class=p>:</span>  <span class=c1># type: ignore</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>        <span class=bp>self</span><span class=o>.</span><span class=n>slack_fields</span> <span class=o>=</span> <span class=n>form</span><span class=o>.</span><span class=n>slack_fields</span>  <span class=c1># type: ignore</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>        <span class=bp>self</span><span class=o>.</span><span class=n>slack_fields</span> <span class=o>=</span> <span class=n>slack_fields</span> <span class=ow>or</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h7 id=firefighter.slack.views.modals.base_modal.form_utils.SlackForm.slack_blocks class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">slack_blocks</span> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackForm.slack_blocks class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>slack_blocks</span><span class=p>(</span><span class=n>block_wrapper</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Literal href=https://docs.python.org/3.11/library/typing.html#typing.Literal>Literal</a></span><span class=p>[</span><span class=s1>&#39;section_accessory&#39;</span><span class=p>,</span> <span class=s1>&#39;input&#39;</span><span class=p>,</span> <span class=s1>&#39;action&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;input&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a></span><span class=p>[</span><span class=n><span title=slack_sdk.models.blocks.blocks.Block>Block</span></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Return the list of blocks from a SlackForm.</p> <p>Parameters:</p> <ul> <li class=field-body> <b><code>block_wrapper</code></b> (<code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></code>, default: <code>&#39;input&#39;</code> ) – <div class=doc-md-description> <p>Type of blocks destination. Defaults to "input".</p> </div> </li> </ul> <p>Raises:</p> <ul> <li class=field-body> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/exceptions.html#ValueError>ValueError</a></code> – <div class=doc-md-description> <p>Raised if one of the initial value does not match the field type.</p> </div> </li> </ul> <p>Returns:</p> <ul> <li class=field-body> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#list>list</a>[<span title=slack_sdk.models.blocks.blocks.Block>Block</span>]</code> – <div class=doc-md-description> <p>list[Block]: The List of Slack Blocks.</p> </div> </li> </ul> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/form_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=k>def</span> <span class=nf>slack_blocks</span><span class=p>(</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=n>block_wrapper</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;section_accessory&quot;</span><span class=p>,</span> <span class=s2>&quot;input&quot;</span><span class=p>,</span> <span class=s2>&quot;action&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;input&quot;</span><span class=p>,</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Block</span><span class=p>]:</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Return the list of blocks from a SlackForm.</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>
<a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>    Args:</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>        block_wrapper (str, optional): Type of blocks destination. Defaults to &quot;input&quot;.</span>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>
<a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>    Raises:</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>        ValueError: Raised if one of the initial value does not match the field type.</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>
<a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>    Returns:</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>        list[Block]: The List of Slack Blocks.</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=n>blocks</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a>    <span class=k>for</span> <span class=n>field_name</span><span class=p>,</span> <span class=n>f</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>form</span><span class=o>.</span><span class=n>fields</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>        <span class=c1># Get the default data, from the form data, the field.initial or the form.initial</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>        <span class=n>f</span><span class=o>.</span><span class=n>initial</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_field_initial</span><span class=p>(</span><span class=n>field_name</span><span class=p>,</span> <span class=n>f</span><span class=p>)</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=n>slack_input_kwargs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>        <span class=n>slack_block_kwargs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-115 name=__codelineno-0-115></a>
<a id=__codelineno-0-116 name=__codelineno-0-116></a>        <span class=c1># Set Field common args</span>
<a id=__codelineno-0-117 name=__codelineno-0-117></a>        <span class=n>slack_block_kwargs</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=n>field_name</span><span class=o>.</span><span class=n>title</span><span class=p>())[:</span><span class=mi>2000</span><span class=p>]</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a>        <span class=n>slack_block_kwargs</span><span class=p>[</span><span class=s2>&quot;hint&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>help_text</span><span class=p>[:</span><span class=mi>2000</span><span class=p>]</span>
<a id=__codelineno-0-119 name=__codelineno-0-119></a>        <span class=n>slack_block_kwargs</span><span class=p>[</span><span class=s2>&quot;optional&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=ow>not</span> <span class=n>f</span><span class=o>.</span><span class=n>required</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a>
<a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=c1># Set custom Slack SDK fields</span>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=n>post_block</span><span class=p>,</span> <span class=n>pre_block</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parse_field_slack_args</span><span class=p>(</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>            <span class=n>field_name</span><span class=p>,</span> <span class=n>f</span><span class=p>,</span> <span class=n>slack_input_kwargs</span><span class=p>,</span> <span class=n>slack_block_kwargs</span>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=p>)</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=n>slack_input_element</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_input_element</span><span class=p>(</span>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>            <span class=n>f</span><span class=p>,</span> <span class=n>field_name</span><span class=p>,</span> <span class=n>slack_input_kwargs</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=p>)</span>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=k>if</span> <span class=n>slack_input_element</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>            <span class=k>continue</span>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=n>blocks</span> <span class=o>+=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_wrap_field_in_block</span><span class=p>(</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>            <span class=n>block_wrapper</span><span class=p>,</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>            <span class=n>field_name</span><span class=p>,</span>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>            <span class=n>f</span><span class=p>,</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>            <span class=n>slack_block_kwargs</span><span class=p>,</span>
<a id=__codelineno-0-136 name=__codelineno-0-136></a>            <span class=n>slack_input_element</span><span class=p>,</span>
<a id=__codelineno-0-137 name=__codelineno-0-137></a>            <span class=n>post_block</span><span class=p>,</span>
<a id=__codelineno-0-138 name=__codelineno-0-138></a>            <span class=n>pre_block</span><span class=p>,</span>
<a id=__codelineno-0-139 name=__codelineno-0-139></a>        <span class=p>)</span>
<a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=k>return</span> <span class=n>blocks</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.base_modal.form_utils.SlackFormJSONEncoder class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackFormJSONEncoder</span> <a href=#firefighter.slack.views.modals.base_modal.form_utils.SlackFormJSONEncoder class=headerlink title="Permanent link">¤</a></h6> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=json.JSONEncoder href=https://docs.python.org/3.11/library/json.html#json.JSONEncoder>JSONEncoder</a></code></p> <p>JSON encoder that can handle UUIDs and Django models. Used to serialize the form data to JSON for Slack modal private_metadata.</p> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h6 id=firefighter.slack.views.modals.base_modal.form_utils.slack_view_submission_to_dict class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <span class="doc doc-object-name doc-function-name">slack_view_submission_to_dict</span> <a href=#firefighter.slack.views.modals.base_modal.form_utils.slack_view_submission_to_dict class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>slack_view_submission_to_dict</span><span class=p>(</span><span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns a dict of the form data from a Slack view submission.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/form_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-476>476</a></span>
<span class=normal><a href=#__codelineno-0-477>477</a></span>
<span class=normal><a href=#__codelineno-0-478>478</a></span>
<span class=normal><a href=#__codelineno-0-479>479</a></span>
<span class=normal><a href=#__codelineno-0-480>480</a></span>
<span class=normal><a href=#__codelineno-0-481>481</a></span>
<span class=normal><a href=#__codelineno-0-482>482</a></span>
<span class=normal><a href=#__codelineno-0-483>483</a></span>
<span class=normal><a href=#__codelineno-0-484>484</a></span>
<span class=normal><a href=#__codelineno-0-485>485</a></span>
<span class=normal><a href=#__codelineno-0-486>486</a></span>
<span class=normal><a href=#__codelineno-0-487>487</a></span>
<span class=normal><a href=#__codelineno-0-488>488</a></span>
<span class=normal><a href=#__codelineno-0-489>489</a></span>
<span class=normal><a href=#__codelineno-0-490>490</a></span>
<span class=normal><a href=#__codelineno-0-491>491</a></span>
<span class=normal><a href=#__codelineno-0-492>492</a></span>
<span class=normal><a href=#__codelineno-0-493>493</a></span>
<span class=normal><a href=#__codelineno-0-494>494</a></span>
<span class=normal><a href=#__codelineno-0-495>495</a></span>
<span class=normal><a href=#__codelineno-0-496>496</a></span>
<span class=normal><a href=#__codelineno-0-497>497</a></span>
<span class=normal><a href=#__codelineno-0-498>498</a></span>
<span class=normal><a href=#__codelineno-0-499>499</a></span>
<span class=normal><a href=#__codelineno-0-500>500</a></span>
<span class=normal><a href=#__codelineno-0-501>501</a></span>
<span class=normal><a href=#__codelineno-0-502>502</a></span>
<span class=normal><a href=#__codelineno-0-503>503</a></span>
<span class=normal><a href=#__codelineno-0-504>504</a></span>
<span class=normal><a href=#__codelineno-0-505>505</a></span>
<span class=normal><a href=#__codelineno-0-506>506</a></span>
<span class=normal><a href=#__codelineno-0-507>507</a></span>
<span class=normal><a href=#__codelineno-0-508>508</a></span>
<span class=normal><a href=#__codelineno-0-509>509</a></span>
<span class=normal><a href=#__codelineno-0-510>510</a></span>
<span class=normal><a href=#__codelineno-0-511>511</a></span>
<span class=normal><a href=#__codelineno-0-512>512</a></span>
<span class=normal><a href=#__codelineno-0-513>513</a></span>
<span class=normal><a href=#__codelineno-0-514>514</a></span>
<span class=normal><a href=#__codelineno-0-515>515</a></span>
<span class=normal><a href=#__codelineno-0-516>516</a></span>
<span class=normal><a href=#__codelineno-0-517>517</a></span>
<span class=normal><a href=#__codelineno-0-518>518</a></span>
<span class=normal><a href=#__codelineno-0-519>519</a></span>
<span class=normal><a href=#__codelineno-0-520>520</a></span>
<span class=normal><a href=#__codelineno-0-521>521</a></span>
<span class=normal><a href=#__codelineno-0-522>522</a></span>
<span class=normal><a href=#__codelineno-0-523>523</a></span>
<span class=normal><a href=#__codelineno-0-524>524</a></span>
<span class=normal><a href=#__codelineno-0-525>525</a></span>
<span class=normal><a href=#__codelineno-0-526>526</a></span>
<span class=normal><a href=#__codelineno-0-527>527</a></span>
<span class=normal><a href=#__codelineno-0-528>528</a></span>
<span class=normal><a href=#__codelineno-0-529>529</a></span>
<span class=normal><a href=#__codelineno-0-530>530</a></span>
<span class=normal><a href=#__codelineno-0-531>531</a></span>
<span class=normal><a href=#__codelineno-0-532>532</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-476 name=__codelineno-0-476></a><span class=k>def</span> <span class=nf>slack_view_submission_to_dict</span><span class=p>(</span>
<a id=__codelineno-0-477 name=__codelineno-0-477></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span> <span class=o>|</span> <span class=nb>str</span><span class=p>],</span>
<a id=__codelineno-0-478 name=__codelineno-0-478></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Any</span><span class=p>]:</span>
<a id=__codelineno-0-479 name=__codelineno-0-479></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns a dict of the form data from a Slack view submission.&quot;&quot;&quot;</span>
<a id=__codelineno-0-480 name=__codelineno-0-480></a>    <span class=k>if</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;view&quot;</span><span class=p>):</span>
<a id=__codelineno-0-481 name=__codelineno-0-481></a>        <span class=n>path</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;view&quot;</span><span class=p>,</span> <span class=s2>&quot;state&quot;</span><span class=p>,</span> <span class=s2>&quot;values&quot;</span><span class=p>]</span>
<a id=__codelineno-0-482 name=__codelineno-0-482></a>    <span class=k>elif</span> <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;block_actions&quot;</span><span class=p>:</span>
<a id=__codelineno-0-483 name=__codelineno-0-483></a>        <span class=n>path</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;state&quot;</span><span class=p>,</span> <span class=s2>&quot;values&quot;</span><span class=p>]</span>
<a id=__codelineno-0-484 name=__codelineno-0-484></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-485 name=__codelineno-0-485></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Unknown Slack view submission format: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>body</span><span class=p>)</span>
<a id=__codelineno-0-486 name=__codelineno-0-486></a>        <span class=n>path</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;view&quot;</span><span class=p>,</span> <span class=s2>&quot;state&quot;</span><span class=p>,</span> <span class=s2>&quot;values&quot;</span><span class=p>]</span>
<a id=__codelineno-0-487 name=__codelineno-0-487></a>
<a id=__codelineno-0-488 name=__codelineno-0-488></a>    <span class=n>values</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=n>path</span><span class=p>)</span>
<a id=__codelineno-0-489 name=__codelineno-0-489></a>    <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-490 name=__codelineno-0-490></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>values</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
<a id=__codelineno-0-491 name=__codelineno-0-491></a>        <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s2>&quot;Expected a values dict in the body&quot;</span><span class=p>)</span>
<a id=__codelineno-0-492 name=__codelineno-0-492></a>
<a id=__codelineno-0-493 name=__codelineno-0-493></a>    <span class=c1># We expect only one action per input</span>
<a id=__codelineno-0-494 name=__codelineno-0-494></a>    <span class=c1># The action_id must be block_id or block_id___{whatever}</span>
<a id=__codelineno-0-495 name=__codelineno-0-495></a>    <span class=c1># We support block_id and block_id___{whatever} because SLack won&#39;t update the value in the user&#39;s form if the action_id is the same</span>
<a id=__codelineno-0-496 name=__codelineno-0-496></a>    <span class=c1># Hence, we need to add a unique identifier to the action_id to force Slack to update the value, replacing the input by another one</span>
<a id=__codelineno-0-497 name=__codelineno-0-497></a>    <span class=k>for</span> <span class=n>block</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
<a id=__codelineno-0-498 name=__codelineno-0-498></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>block</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-499 name=__codelineno-0-499></a>            <span class=k>continue</span>
<a id=__codelineno-0-500 name=__codelineno-0-500></a>        <span class=n>action_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=n>block</span><span class=o>.</span><span class=n>keys</span><span class=p>()))</span>
<a id=__codelineno-0-501 name=__codelineno-0-501></a>        <span class=n>action_id_stripped</span> <span class=o>=</span> <span class=n>action_id</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;___&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
<a id=__codelineno-0-502 name=__codelineno-0-502></a>        <span class=n>input_field</span> <span class=o>=</span> <span class=n>block</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>action_id</span><span class=p>)</span>
<a id=__codelineno-0-503 name=__codelineno-0-503></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>input_field</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
<a id=__codelineno-0-504 name=__codelineno-0-504></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s2>&quot;Expected input_field to be a dict&quot;</span><span class=p>)</span>
<a id=__codelineno-0-505 name=__codelineno-0-505></a>
<a id=__codelineno-0-506 name=__codelineno-0-506></a>        <span class=k>if</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;plain_text_input&quot;</span><span class=p>:</span>
<a id=__codelineno-0-507 name=__codelineno-0-507></a>            <span class=n>data</span><span class=p>[</span><span class=n>action_id_stripped</span><span class=p>]</span> <span class=o>=</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;value&quot;</span><span class=p>)</span>
<a id=__codelineno-0-508 name=__codelineno-0-508></a>        <span class=k>elif</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;datetimepicker&quot;</span><span class=p>:</span>
<a id=__codelineno-0-509 name=__codelineno-0-509></a>            <span class=n>data</span><span class=p>[</span><span class=n>action_id_stripped</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-510 name=__codelineno-0-510></a>                <span class=n>datetime</span><span class=o>.</span><span class=n>fromtimestamp</span><span class=p>(</span>
<a id=__codelineno-0-511 name=__codelineno-0-511></a>                    <span class=n>cast</span><span class=p>(</span><span class=s2>&quot;float&quot;</span><span class=p>,</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;selected_date_time&quot;</span><span class=p>)),</span>
<a id=__codelineno-0-512 name=__codelineno-0-512></a>                    <span class=n>tz</span><span class=o>=</span><span class=n>TZ</span><span class=p>,</span>
<a id=__codelineno-0-513 name=__codelineno-0-513></a>                <span class=p>)</span>
<a id=__codelineno-0-514 name=__codelineno-0-514></a>                <span class=k>if</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;selected_date_time&quot;</span><span class=p>)</span>
<a id=__codelineno-0-515 name=__codelineno-0-515></a>                <span class=k>else</span> <span class=kc>None</span>
<a id=__codelineno-0-516 name=__codelineno-0-516></a>            <span class=p>)</span>
<a id=__codelineno-0-517 name=__codelineno-0-517></a>        <span class=k>elif</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;static_select&quot;</span><span class=p>:</span>
<a id=__codelineno-0-518 name=__codelineno-0-518></a>            <span class=n>data</span><span class=p>[</span><span class=n>action_id_stripped</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span><span class=n>input_field</span><span class=p>,</span> <span class=p>[</span><span class=s2>&quot;selected_option&quot;</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>])</span>
<a id=__codelineno-0-519 name=__codelineno-0-519></a>        <span class=k>elif</span> <span class=n>input_field</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;users_select&quot;</span><span class=p>:</span>
<a id=__codelineno-0-520 name=__codelineno-0-520></a>            <span class=n>user_id</span> <span class=o>=</span> <span class=n>get_in</span><span class=p>(</span>
<a id=__codelineno-0-521 name=__codelineno-0-521></a>                <span class=n>input_field</span><span class=p>,</span>
<a id=__codelineno-0-522 name=__codelineno-0-522></a>                <span class=p>[</span>
<a id=__codelineno-0-523 name=__codelineno-0-523></a>                    <span class=s2>&quot;selected_user&quot;</span><span class=p>,</span>
<a id=__codelineno-0-524 name=__codelineno-0-524></a>                <span class=p>],</span>
<a id=__codelineno-0-525 name=__codelineno-0-525></a>            <span class=p>)</span>
<a id=__codelineno-0-526 name=__codelineno-0-526></a>            <span class=n>user_obj</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-527 name=__codelineno-0-527></a>                <span class=n>SlackUser</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get_user_by_slack_id</span><span class=p>(</span><span class=n>slack_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
<a id=__codelineno-0-528 name=__codelineno-0-528></a>                <span class=k>if</span> <span class=n>user_id</span>
<a id=__codelineno-0-529 name=__codelineno-0-529></a>                <span class=k>else</span> <span class=kc>None</span>
<a id=__codelineno-0-530 name=__codelineno-0-530></a>            <span class=p>)</span>
<a id=__codelineno-0-531 name=__codelineno-0-531></a>            <span class=n>data</span><span class=p>[</span><span class=n>action_id_stripped</span><span class=p>]</span> <span class=o>=</span> <span class=n>user_obj</span><span class=o>.</span><span class=n>id</span> <span class=k>if</span> <span class=n>user_obj</span> <span class=k>else</span> <span class=kc>None</span>
<a id=__codelineno-0-532 name=__codelineno-0-532></a>    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.base_modal.mixins class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">mixins</span> <a href=#firefighter.slack.views.modals.base_modal.mixins class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.base_modal.modal_utils class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">modal_utils</span> <a href=#firefighter.slack.views.modals.base_modal.modal_utils class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.close class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">close</span> <a href=#firefighter.slack.views.modals.close class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h5 id=firefighter.slack.views.modals.close.CloseModal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">CloseModal</span> <a href=#firefighter.slack.views.modals.close.CloseModal class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>CloseModal</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=firefighter.slack.views.modals.base_modal.mixins.IncidentSelectableModalMixin>IncidentSelectableModalMixin</span></code>, <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.ModalForm href=#firefighter.slack.views.modals.base_modal.base.ModalForm>ModalForm</a>[<span title=firefighter.slack.views.modals.close.CloseIncidentFormSlack>CloseIncidentFormSlack</span>]</code></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h6 id=firefighter.slack.views.modals.close.CloseModal.handle_modal_fn class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">handle_modal_fn</span> <a href=#firefighter.slack.views.modals.close.CloseModal.handle_modal_fn class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>handle_modal_fn</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n><span title=slack_bolt.context.ack.ack.Ack>Ack</span></span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>],</span> <span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span> <span class=o>|</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#bool>bool</a></span>
</code></pre></div> <div class="doc doc-contents "> <p>Handle response from /incident close modal.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/close.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-219 name=__codelineno-0-219></a><span class=k>def</span> <span class=nf>handle_modal_fn</span><span class=p>(</span>  <span class=c1># type: ignore[override]</span>
<a id=__codelineno-0-220 name=__codelineno-0-220></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>ack</span><span class=p>:</span> <span class=n>Ack</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span>
<a id=__codelineno-0-221 name=__codelineno-0-221></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span> <span class=o>|</span> <span class=nb>bool</span><span class=p>:</span>
<a id=__codelineno-0-222 name=__codelineno-0-222></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle response from /incident close modal.&quot;&quot;&quot;</span>
<a id=__codelineno-0-223 name=__codelineno-0-223></a>    <span class=n>slack_form</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_form_errors</span><span class=p>(</span>
<a id=__codelineno-0-224 name=__codelineno-0-224></a>        <span class=n>ack</span><span class=p>,</span> <span class=n>body</span><span class=p>,</span> <span class=n>forms_kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;initial&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_initial_form_values</span><span class=p>(</span><span class=n>incident</span><span class=p>)}</span>
<a id=__codelineno-0-225 name=__codelineno-0-225></a>    <span class=p>)</span>
<a id=__codelineno-0-226 name=__codelineno-0-226></a>    <span class=k>if</span> <span class=n>slack_form</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-227 name=__codelineno-0-227></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-228 name=__codelineno-0-228></a>    <span class=n>form</span> <span class=o>=</span> <span class=n>slack_form</span><span class=o>.</span><span class=n>form</span>
<a id=__codelineno-0-229 name=__codelineno-0-229></a>    <span class=c1># If fields haven&#39;t changed, don&#39;t include them in the update.</span>
<a id=__codelineno-0-230 name=__codelineno-0-230></a>    <span class=n>update_kwargs</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-231 name=__codelineno-0-231></a>    <span class=k>for</span> <span class=n>changed_key</span> <span class=ow>in</span> <span class=n>form</span><span class=o>.</span><span class=n>changed_data</span><span class=p>:</span>
<a id=__codelineno-0-232 name=__codelineno-0-232></a>        <span class=k>if</span> <span class=n>changed_key</span> <span class=o>==</span> <span class=s2>&quot;component&quot;</span><span class=p>:</span>
<a id=__codelineno-0-233 name=__codelineno-0-233></a>            <span class=n>update_kwargs</span><span class=p>[</span><span class=s2>&quot;component_id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>form</span><span class=o>.</span><span class=n>cleaned_data</span><span class=p>[</span><span class=n>changed_key</span><span class=p>]</span><span class=o>.</span><span class=n>id</span>
<a id=__codelineno-0-234 name=__codelineno-0-234></a>        <span class=k>if</span> <span class=n>changed_key</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;description&quot;</span><span class=p>,</span> <span class=s2>&quot;title&quot;</span><span class=p>,</span> <span class=s2>&quot;message&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-235 name=__codelineno-0-235></a>            <span class=n>update_kwargs</span><span class=p>[</span><span class=n>changed_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>form</span><span class=o>.</span><span class=n>cleaned_data</span><span class=p>[</span><span class=n>changed_key</span><span class=p>]</span>
<a id=__codelineno-0-236 name=__codelineno-0-236></a>    <span class=c1># Check can close</span>
<a id=__codelineno-0-237 name=__codelineno-0-237></a>    <span class=n>can_close</span><span class=p>,</span> <span class=n>reasons</span> <span class=o>=</span> <span class=n>incident</span><span class=o>.</span><span class=n>can_be_closed</span>
<a id=__codelineno-0-238 name=__codelineno-0-238></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>can_close</span><span class=p>:</span>
<a id=__codelineno-0-239 name=__codelineno-0-239></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-240 name=__codelineno-0-240></a>            <span class=sa>f</span><span class=s2>&quot;Tried to close an incident that can&#39;t be closed yet! Aborting. Incident #</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>. Reasons: </span><span class=si>{</span><span class=n>reasons</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-241 name=__codelineno-0-241></a>        <span class=p>)</span>
<a id=__codelineno-0-242 name=__codelineno-0-242></a>        <span class=n>respond</span><span class=p>(</span>
<a id=__codelineno-0-243 name=__codelineno-0-243></a>            <span class=n>body</span><span class=o>=</span><span class=n>body</span><span class=p>,</span>
<a id=__codelineno-0-244 name=__codelineno-0-244></a>            <span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;It looks like this incident #</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> could not be closed.</span><span class=se>\n</span><span class=s2>Reasons: </span><span class=si>{</span><span class=n>reasons</span><span class=si>}</span><span class=s2>.</span><span class=se>\n</span><span class=s2>Please tell @pulse (#tech-pe-pulse) if you think this is an error.&quot;</span><span class=p>,</span>
<a id=__codelineno-0-245 name=__codelineno-0-245></a>        <span class=p>)</span>
<a id=__codelineno-0-246 name=__codelineno-0-246></a>        <span class=k>return</span> <span class=kc>False</span>
<a id=__codelineno-0-247 name=__codelineno-0-247></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_trigger_incident_workflow</span><span class=p>(</span><span class=n>incident</span><span class=p>,</span> <span class=n>user</span><span class=p>,</span> <span class=n>update_kwargs</span><span class=p>)</span>
<a id=__codelineno-0-248 name=__codelineno-0-248></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.downgrade_workflow class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">downgrade_workflow</span> <a href=#firefighter.slack.views.modals.downgrade_workflow class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.key_event_message class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">key_event_message</span> <a href=#firefighter.slack.views.modals.key_event_message class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h5 id=firefighter.slack.views.modals.key_event_message.KeyEvents class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">KeyEvents</span> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>KeyEvents</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.MessageForm href=#firefighter.slack.views.modals.base_modal.base.MessageForm>MessageForm</a>[<a class="autorefs autorefs-internal" title=firefighter.incidents.forms.update_key_events.IncidentUpdateKeyEventsForm href=../incidents/#firefighter.incidents.forms.update_key_events.IncidentUpdateKeyEventsForm>IncidentUpdateKeyEventsForm</a>]</code></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h6 id=firefighter.slack.views.modals.key_event_message.KeyEvents.open_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">open_shortcut</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents.open_shortcut class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_shortcut</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p><a href=https://api.slack.com/interactivity/shortcuts>Slack shortcut</a> to open the modal.</p> </div> </div> <div class="doc doc-object doc-function"> <h6 id=firefighter.slack.views.modals.key_event_message.KeyEvents.handle_modal_fn class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">handle_modal_fn</span> <a href=#firefighter.slack.views.modals.key_event_message.KeyEvents.handle_modal_fn class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>handle_modal_fn</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n><span title=slack_bolt.context.ack.ack.Ack>Ack</span></span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>],</span> <span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span><span class=p>,</span> <span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Handle the time and date inputs for the key events.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/key_event_message.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=k>def</span> <span class=nf>handle_modal_fn</span><span class=p>(</span>  <span class=c1># type: ignore[override]</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>ack</span><span class=p>:</span> <span class=n>Ack</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span> <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle the time and date inputs for the key events.&quot;&quot;&quot;</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>body</span><span class=p>)</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a>
<a id=__codelineno-0-91 name=__codelineno-0-91></a>    <span class=n>slack_form</span><span class=p>:</span> <span class=n>SlackForm</span><span class=p>[</span><span class=n>IncidentUpdateKeyEventsForm</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handle_form_errors</span><span class=p>(</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>            <span class=n>ack</span><span class=p>,</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>            <span class=n>body</span><span class=p>,</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>            <span class=n>forms_kwargs</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>                <span class=s2>&quot;incident&quot;</span><span class=p>:</span> <span class=n>incident</span><span class=p>,</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>                <span class=s2>&quot;user&quot;</span><span class=p>:</span> <span class=n>user</span><span class=p>,</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>            <span class=p>},</span>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>        <span class=p>)</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>    <span class=p>)</span>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=n>form</span> <span class=o>=</span> <span class=n>slack_form</span><span class=o>.</span><span class=n>form</span> <span class=k>if</span> <span class=n>slack_form</span> <span class=k>else</span> <span class=kc>None</span>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>    <span class=k>if</span> <span class=n>form</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Form is None, skipping save&quot;</span><span class=p>)</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>        <span class=k>return</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>form</span><span class=o>.</span><span class=n>errors</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>        <span class=bp>self</span><span class=o>.</span><span class=n>update_with_form</span><span class=p>()</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>        <span class=k>return</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a>    <span class=bp>self</span><span class=o>.</span><span class=n>form</span> <span class=o>=</span> <span class=n>form</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>    <span class=bp>self</span><span class=o>.</span><span class=n>form</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=n>incident</span><span class=o>.</span><span class=n>compute_metrics</span><span class=p>()</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>    <span class=bp>self</span><span class=o>.</span><span class=n>update_with_form</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.open class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">open</span> <a href=#firefighter.slack.views.modals.open class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h5 id=firefighter.slack.views.modals.open.OpenModal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">OpenModal</span> <a href=#firefighter.slack.views.modals.open.OpenModal class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>OpenModal</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.SlackModal href=#firefighter.slack.views.modals.base_modal.base.SlackModal>SlackModal</a></code></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h6 id=firefighter.slack.views.modals.open.OpenModal.get_details_modal_form_class class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_details_modal_form_class</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> <a href=#firefighter.slack.views.modals.open.OpenModal.get_details_modal_form_class class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>get_details_modal_form_class</span><span class=p>(</span><span class=n>open_incident_context</span><span class=p>:</span> <span class=n><span title=firefighter.slack.views.modals.opening.types.OpeningData>OpeningData</span></span><span class=p>,</span> <span class=n>incident_type_value</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/functions.html#type>type</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.opening.set_details.SetIncidentDetails href=#firefighter.slack.views.modals.opening.set_details.SetIncidentDetails>SetIncidentDetails</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>]]</span> <span class=o>|</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p>Get the details modal form class based on the incident type.</p> <p>Returns None if no incident type is selected.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/open.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-446>446</a></span>
<span class=normal><a href=#__codelineno-0-447>447</a></span>
<span class=normal><a href=#__codelineno-0-448>448</a></span>
<span class=normal><a href=#__codelineno-0-449>449</a></span>
<span class=normal><a href=#__codelineno-0-450>450</a></span>
<span class=normal><a href=#__codelineno-0-451>451</a></span>
<span class=normal><a href=#__codelineno-0-452>452</a></span>
<span class=normal><a href=#__codelineno-0-453>453</a></span>
<span class=normal><a href=#__codelineno-0-454>454</a></span>
<span class=normal><a href=#__codelineno-0-455>455</a></span>
<span class=normal><a href=#__codelineno-0-456>456</a></span>
<span class=normal><a href=#__codelineno-0-457>457</a></span>
<span class=normal><a href=#__codelineno-0-458>458</a></span>
<span class=normal><a href=#__codelineno-0-459>459</a></span>
<span class=normal><a href=#__codelineno-0-460>460</a></span>
<span class=normal><a href=#__codelineno-0-461>461</a></span>
<span class=normal><a href=#__codelineno-0-462>462</a></span>
<span class=normal><a href=#__codelineno-0-463>463</a></span>
<span class=normal><a href=#__codelineno-0-464>464</a></span>
<span class=normal><a href=#__codelineno-0-465>465</a></span>
<span class=normal><a href=#__codelineno-0-466>466</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-446 name=__codelineno-0-446></a><span class=nd>@staticmethod</span>
<a id=__codelineno-0-447 name=__codelineno-0-447></a><span class=k>def</span> <span class=nf>get_details_modal_form_class</span><span class=p>(</span>
<a id=__codelineno-0-448 name=__codelineno-0-448></a>    <span class=n>open_incident_context</span><span class=p>:</span> <span class=n>OpeningData</span><span class=p>,</span>
<a id=__codelineno-0-449 name=__codelineno-0-449></a>    <span class=n>incident_type_value</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-450 name=__codelineno-0-450></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>type</span><span class=p>[</span><span class=n>SetIncidentDetails</span><span class=p>[</span><span class=n>Any</span><span class=p>]]</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-451 name=__codelineno-0-451></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the details modal form class based on the incident type.</span>
<a id=__codelineno-0-452 name=__codelineno-0-452></a>
<a id=__codelineno-0-453 name=__codelineno-0-453></a><span class=sd>    Returns None if no incident type is selected.</span>
<a id=__codelineno-0-454 name=__codelineno-0-454></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-455 name=__codelineno-0-455></a>    <span class=n>response_type</span> <span class=o>=</span> <span class=n>open_incident_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;response_type&quot;</span><span class=p>)</span>
<a id=__codelineno-0-456 name=__codelineno-0-456></a>    <span class=k>if</span> <span class=n>response_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-457 name=__codelineno-0-457></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-458 name=__codelineno-0-458></a>    <span class=n>incident_types</span> <span class=o>=</span> <span class=n>INCIDENT_TYPES</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>response_type</span><span class=p>)</span>
<a id=__codelineno-0-459 name=__codelineno-0-459></a>    <span class=k>if</span> <span class=n>incident_types</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>incident_types</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a id=__codelineno-0-460 name=__codelineno-0-460></a>        <span class=k>return</span> <span class=n>incident_types</span><span class=p>[</span><span class=nb>next</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=n>incident_types</span><span class=o>.</span><span class=n>keys</span><span class=p>()))]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;slack_form&quot;</span><span class=p>)</span>
<a id=__codelineno-0-461 name=__codelineno-0-461></a>    <span class=k>if</span> <span class=n>incident_types</span> <span class=ow>and</span> <span class=n>incident_type_value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-462 name=__codelineno-0-462></a>        <span class=k>return</span> <span class=n>incident_types</span><span class=p>[</span><span class=n>incident_type_value</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;slack_form&quot;</span><span class=p>)</span>
<a id=__codelineno-0-463 name=__codelineno-0-463></a>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-464 name=__codelineno-0-464></a>        <span class=sa>f</span><span class=s2>&quot;No incident type found for </span><span class=si>{</span><span class=n>open_incident_context</span><span class=si>}</span><span class=s2>. No fallback.&quot;</span>
<a id=__codelineno-0-465 name=__codelineno-0-465></a>    <span class=p>)</span>
<a id=__codelineno-0-466 name=__codelineno-0-466></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h6 id=firefighter.slack.views.modals.open.OpenModal.handle_modal_fn class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">handle_modal_fn</span> <a href=#firefighter.slack.views.modals.open.OpenModal.handle_modal_fn class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>handle_modal_fn</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n><span title=slack_bolt.context.ack.ack.Ack>Ack</span></span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>],</span> <span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Handle response from /incident open modal.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/open.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-468>468</a></span>
<span class=normal><a href=#__codelineno-0-469>469</a></span>
<span class=normal><a href=#__codelineno-0-470>470</a></span>
<span class=normal><a href=#__codelineno-0-471>471</a></span>
<span class=normal><a href=#__codelineno-0-472>472</a></span>
<span class=normal><a href=#__codelineno-0-473>473</a></span>
<span class=normal><a href=#__codelineno-0-474>474</a></span>
<span class=normal><a href=#__codelineno-0-475>475</a></span>
<span class=normal><a href=#__codelineno-0-476>476</a></span>
<span class=normal><a href=#__codelineno-0-477>477</a></span>
<span class=normal><a href=#__codelineno-0-478>478</a></span>
<span class=normal><a href=#__codelineno-0-479>479</a></span>
<span class=normal><a href=#__codelineno-0-480>480</a></span>
<span class=normal><a href=#__codelineno-0-481>481</a></span>
<span class=normal><a href=#__codelineno-0-482>482</a></span>
<span class=normal><a href=#__codelineno-0-483>483</a></span>
<span class=normal><a href=#__codelineno-0-484>484</a></span>
<span class=normal><a href=#__codelineno-0-485>485</a></span>
<span class=normal><a href=#__codelineno-0-486>486</a></span>
<span class=normal><a href=#__codelineno-0-487>487</a></span>
<span class=normal><a href=#__codelineno-0-488>488</a></span>
<span class=normal><a href=#__codelineno-0-489>489</a></span>
<span class=normal><a href=#__codelineno-0-490>490</a></span>
<span class=normal><a href=#__codelineno-0-491>491</a></span>
<span class=normal><a href=#__codelineno-0-492>492</a></span>
<span class=normal><a href=#__codelineno-0-493>493</a></span>
<span class=normal><a href=#__codelineno-0-494>494</a></span>
<span class=normal><a href=#__codelineno-0-495>495</a></span>
<span class=normal><a href=#__codelineno-0-496>496</a></span>
<span class=normal><a href=#__codelineno-0-497>497</a></span>
<span class=normal><a href=#__codelineno-0-498>498</a></span>
<span class=normal><a href=#__codelineno-0-499>499</a></span>
<span class=normal><a href=#__codelineno-0-500>500</a></span>
<span class=normal><a href=#__codelineno-0-501>501</a></span>
<span class=normal><a href=#__codelineno-0-502>502</a></span>
<span class=normal><a href=#__codelineno-0-503>503</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-468 name=__codelineno-0-468></a><span class=k>def</span> <span class=nf>handle_modal_fn</span><span class=p>(</span>  <span class=c1># type: ignore</span>
<a id=__codelineno-0-469 name=__codelineno-0-469></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-470 name=__codelineno-0-470></a>    <span class=n>ack</span><span class=p>:</span> <span class=n>Ack</span><span class=p>,</span>
<a id=__codelineno-0-471 name=__codelineno-0-471></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
<a id=__codelineno-0-472 name=__codelineno-0-472></a>    <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>,</span>
<a id=__codelineno-0-473 name=__codelineno-0-473></a><span class=p>):</span>
<a id=__codelineno-0-474 name=__codelineno-0-474></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle response from /incident open modal.&quot;&quot;&quot;</span>
<a id=__codelineno-0-475 name=__codelineno-0-475></a>    <span class=n>data</span><span class=p>:</span> <span class=n>OpeningData</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>body</span><span class=p>[</span><span class=s2>&quot;view&quot;</span><span class=p>][</span><span class=s2>&quot;private_metadata&quot;</span><span class=p>])</span>
<a id=__codelineno-0-476 name=__codelineno-0-476></a>
<a id=__codelineno-0-477 name=__codelineno-0-477></a>    <span class=n>details_form_data_raw</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;details_form_data&quot;</span><span class=p>,</span> <span class=p>{})</span>
<a id=__codelineno-0-478 name=__codelineno-0-478></a>
<a id=__codelineno-0-479 name=__codelineno-0-479></a>    <span class=n>incident_type_value</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;incident_type&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<a id=__codelineno-0-480 name=__codelineno-0-480></a>
<a id=__codelineno-0-481 name=__codelineno-0-481></a>    <span class=n>details_form_modal_class</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_details_modal_form_class</span><span class=p>(</span>
<a id=__codelineno-0-482 name=__codelineno-0-482></a>        <span class=n>data</span><span class=p>,</span> <span class=n>incident_type_value</span>
<a id=__codelineno-0-483 name=__codelineno-0-483></a>    <span class=p>)</span>
<a id=__codelineno-0-484 name=__codelineno-0-484></a>    <span class=k>if</span> <span class=n>details_form_modal_class</span><span class=p>:</span>
<a id=__codelineno-0-485 name=__codelineno-0-485></a>        <span class=n>details_form_class</span><span class=p>:</span> <span class=nb>type</span><span class=p>[</span><span class=n>CreateIncidentFormBase</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-486 name=__codelineno-0-486></a>            <span class=n>details_form_modal_class</span><span class=o>.</span><span class=n>form_class</span>
<a id=__codelineno-0-487 name=__codelineno-0-487></a>        <span class=p>)</span>
<a id=__codelineno-0-488 name=__codelineno-0-488></a>        <span class=k>if</span> <span class=n>details_form_class</span><span class=p>:</span>
<a id=__codelineno-0-489 name=__codelineno-0-489></a>            <span class=n>details_form</span><span class=p>:</span> <span class=n>CreateIncidentFormBase</span> <span class=o>=</span> <span class=n>details_form_class</span><span class=p>(</span>
<a id=__codelineno-0-490 name=__codelineno-0-490></a>                <span class=n>details_form_data_raw</span>
<a id=__codelineno-0-491 name=__codelineno-0-491></a>            <span class=p>)</span>
<a id=__codelineno-0-492 name=__codelineno-0-492></a>            <span class=n>details_form</span><span class=o>.</span><span class=n>is_valid</span><span class=p>()</span>
<a id=__codelineno-0-493 name=__codelineno-0-493></a>            <span class=n>ack</span><span class=p>()</span>
<a id=__codelineno-0-494 name=__codelineno-0-494></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-495 name=__codelineno-0-495></a>                <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>details_form</span><span class=p>,</span> <span class=s2>&quot;trigger_incident_workflow&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>callable</span><span class=p>(</span>
<a id=__codelineno-0-496 name=__codelineno-0-496></a>                    <span class=n>details_form</span><span class=o>.</span><span class=n>trigger_incident_workflow</span>
<a id=__codelineno-0-497 name=__codelineno-0-497></a>                <span class=p>):</span>
<a id=__codelineno-0-498 name=__codelineno-0-498></a>                    <span class=n>details_form</span><span class=o>.</span><span class=n>trigger_incident_workflow</span><span class=p>(</span>
<a id=__codelineno-0-499 name=__codelineno-0-499></a>                        <span class=n>creator</span><span class=o>=</span><span class=n>user</span><span class=p>,</span>
<a id=__codelineno-0-500 name=__codelineno-0-500></a>                        <span class=n>impacts_data</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;impact_form_data&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{},</span>
<a id=__codelineno-0-501 name=__codelineno-0-501></a>                    <span class=p>)</span>
<a id=__codelineno-0-502 name=__codelineno-0-502></a>            <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
<a id=__codelineno-0-503 name=__codelineno-0-503></a>                <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;Error triggering incident workflow&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.opening class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">opening</span> <a href=#firefighter.slack.views.modals.opening class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.opening.check_current_incidents class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">check_current_incidents</span> <a href=#firefighter.slack.views.modals.opening.check_current_incidents class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.opening.details class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">details</span> <a href=#firefighter.slack.views.modals.opening.details class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-module"> <h6 id=firefighter.slack.views.modals.opening.details.critical class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">critical</span> <a href=#firefighter.slack.views.modals.opening.details.critical class=headerlink title="Permanent link">¤</a></h6> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.opening.select_impact class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">select_impact</span> <a href=#firefighter.slack.views.modals.opening.select_impact class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.opening.select_impact.SelectImpactModal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SelectImpactModal</span> <a href=#firefighter.slack.views.modals.opening.select_impact.SelectImpactModal class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SelectImpactModal</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=firefighter.slack.views.modals.base_modal.mixins.IncidentSelectableModalMixin>IncidentSelectableModalMixin</span></code>, <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.ModalForm href=#firefighter.slack.views.modals.base_modal.base.ModalForm>ModalForm</a>[<span title=firefighter.slack.views.modals.opening.select_impact.SelectImpactFormSlack>SelectImpactFormSlack</span>]</code></p> <p>TODO: The detailed impacts selected should be saved on the incident.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.opening.set_details class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">set_details</span> <a href=#firefighter.slack.views.modals.opening.set_details class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h6 id=firefighter.slack.views.modals.opening.set_details.SetIncidentDetails class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SetIncidentDetails</span> <a href=#firefighter.slack.views.modals.opening.set_details.SetIncidentDetails class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>SetIncidentDetails</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.ModalForm href=#firefighter.slack.views.modals.base_modal.base.ModalForm>ModalForm</a>[<span title=firefighter.slack.views.modals.opening.set_details.T>T</span>]</code>, <code><a class="autorefs autorefs-external" title=typing.Generic href=https://docs.python.org/3.11/library/typing.html#typing.Generic>Generic</a>[<span title=firefighter.slack.views.modals.opening.set_details.T>T</span>]</code></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/opening/set_details.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;id&quot;</span><span class=p>):</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=bp>self</span><span class=o>.</span><span class=n>push_action</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;push_</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h7 id=firefighter.slack.views.modals.opening.set_details.SetIncidentDetails.open_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">open_shortcut</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.opening.set_details.SetIncidentDetails.open_shortcut class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_shortcut</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p><a href=https://api.slack.com/interactivity/shortcuts>Slack shortcut</a> to open the modal.</p> </div> </div> <div class="doc doc-object doc-function"> <h7 id=firefighter.slack.views.modals.opening.set_details.SetIncidentDetails.handle_modal_fn class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">handle_modal_fn</span> <a href=#firefighter.slack.views.modals.opening.set_details.SetIncidentDetails.handle_modal_fn class=headerlink title="Permanent link">¤</a></h7> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>handle_modal_fn</span><span class=p>(</span><span class=n>ack</span><span class=p>:</span> <span class=n><span title=slack_bolt.context.ack.ack.Ack>Ack</span></span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#dict>dict</a></span><span class=p>[</span><span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span><span class=p>,</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>],</span> <span class=n>user</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.user.User href=../incidents/#firefighter.incidents.models.user.User>User</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Handle response from /incident open modal.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/opening/set_details.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=k>def</span> <span class=nf>handle_modal_fn</span><span class=p>(</span>  <span class=c1># type: ignore</span>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=n>ack</span><span class=p>:</span> <span class=n>Ack</span><span class=p>,</span>
<a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
<a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=n>user</span><span class=p>:</span> <span class=n>User</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=p>):</span>
<a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle response from /incident open modal.&quot;&quot;&quot;</span>
<a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=n>private_metadata</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span>
<a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=n>body</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;view&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;private_metadata&quot;</span><span class=p>,</span> <span class=p>{})</span>
<a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=p>)</span>
<a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=n>priority</span> <span class=o>=</span> <span class=n>private_metadata</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;details_form_data&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;priority&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<a id=__codelineno-0-96 name=__codelineno-0-96></a>    <span class=k>if</span> <span class=n>priority</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-97 name=__codelineno-0-97></a>        <span class=n>priority</span> <span class=o>=</span> <span class=n>Priority</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pk</span><span class=o>=</span><span class=n>priority</span><span class=p>)</span>
<a id=__codelineno-0-98 name=__codelineno-0-98></a>
<a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=n>slack_form</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_form_class</span><span class=p>()(</span>
<a id=__codelineno-0-100 name=__codelineno-0-100></a>        <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=o>**</span><span class=n>slack_view_submission_to_dict</span><span class=p>(</span><span class=n>body</span><span class=p>),</span> <span class=s2>&quot;priority&quot;</span><span class=p>:</span> <span class=n>priority</span><span class=p>}</span>
<a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=p>)</span>
<a id=__codelineno-0-102 name=__codelineno-0-102></a>    <span class=n>form</span><span class=p>:</span> <span class=n>T</span> <span class=o>=</span> <span class=n>slack_form</span><span class=o>.</span><span class=n>form</span>
<a id=__codelineno-0-103 name=__codelineno-0-103></a>    <span class=k>if</span> <span class=n>form</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
<a id=__codelineno-0-104 name=__codelineno-0-104></a>        <span class=n>ack</span><span class=p>()</span>
<a id=__codelineno-0-105 name=__codelineno-0-105></a>        <span class=n>skip_form</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-107 name=__codelineno-0-107></a>        <span class=n>ack</span><span class=p>(</span>
<a id=__codelineno-0-108 name=__codelineno-0-108></a>            <span class=n>response_action</span><span class=o>=</span><span class=s2>&quot;errors&quot;</span><span class=p>,</span>
<a id=__codelineno-0-109 name=__codelineno-0-109></a>            <span class=n>errors</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-110 name=__codelineno-0-110></a>                <span class=n>k</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_concat_validation_errors_msg</span><span class=p>(</span><span class=n>v</span><span class=p>)</span>
<a id=__codelineno-0-111 name=__codelineno-0-111></a>                <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>form</span><span class=o>.</span><span class=n>errors</span><span class=o>.</span><span class=n>as_data</span><span class=p>()</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
<a id=__codelineno-0-112 name=__codelineno-0-112></a>            <span class=p>},</span>
<a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=p>)</span>
<a id=__codelineno-0-114 name=__codelineno-0-114></a>        <span class=n>skip_form</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-115 name=__codelineno-0-115></a>
<a id=__codelineno-0-116 name=__codelineno-0-116></a>    <span class=k>if</span> <span class=n>skip_form</span><span class=p>:</span>
<a id=__codelineno-0-117 name=__codelineno-0-117></a>        <span class=k>return</span>
<a id=__codelineno-0-118 name=__codelineno-0-118></a>    <span class=c1># ruff: noqa: PLC0415</span>
<a id=__codelineno-0-119 name=__codelineno-0-119></a>    <span class=kn>from</span> <span class=nn>firefighter.slack.views.modals.open</span> <span class=kn>import</span> <span class=n>modal_open</span>
<a id=__codelineno-0-120 name=__codelineno-0-120></a>
<a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=k>if</span> <span class=s2>&quot;priority&quot;</span> <span class=ow>in</span> <span class=n>private_metadata</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span>
<a id=__codelineno-0-122 name=__codelineno-0-122></a>        <span class=n>private_metadata</span><span class=p>[</span><span class=s2>&quot;priority&quot;</span><span class=p>],</span> <span class=nb>str</span>
<a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=p>):</span>
<a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=n>private_metadata</span><span class=p>[</span><span class=s2>&quot;priority&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>Priority</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
<a id=__codelineno-0-125 name=__codelineno-0-125></a>            <span class=n>pk</span><span class=o>=</span><span class=n>private_metadata</span><span class=p>[</span><span class=s2>&quot;priority&quot;</span><span class=p>]</span>
<a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=p>)</span>
<a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=n>data</span> <span class=o>=</span> <span class=n>OpeningData</span><span class=p>(</span>
<a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=n>details_form_data</span><span class=o>=</span><span class=n>cast</span><span class=p>(</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>form</span><span class=o>.</span><span class=n>data</span><span class=p>),</span>
<a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=n>impact_form_data</span><span class=o>=</span><span class=n>private_metadata</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;impact_form_data&quot;</span><span class=p>),</span>
<a id=__codelineno-0-130 name=__codelineno-0-130></a>        <span class=n>incident_type</span><span class=o>=</span><span class=n>private_metadata</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;incident_type&quot;</span><span class=p>),</span>
<a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=n>response_type</span><span class=o>=</span><span class=n>private_metadata</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;response_type&quot;</span><span class=p>),</span>
<a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=n>priority</span><span class=o>=</span><span class=n>private_metadata</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;priority&quot;</span><span class=p>),</span>
<a id=__codelineno-0-133 name=__codelineno-0-133></a>    <span class=p>)</span>
<a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=n>view</span> <span class=o>=</span> <span class=n>modal_open</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>(</span><span class=n>open_incident_context</span><span class=o>=</span><span class=n>data</span><span class=p>,</span> <span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=p>)</span>
<a id=__codelineno-0-135 name=__codelineno-0-135></a>    <span class=n>view</span><span class=o>.</span><span class=n>private_metadata</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=bp>cls</span><span class=o>=</span><span class=n>SlackFormJSONEncoder</span><span class=p>)</span>
<a id=__codelineno-0-136 name=__codelineno-0-136></a>
<a id=__codelineno-0-137 name=__codelineno-0-137></a>    <span class=n>update_modal</span><span class=p>(</span>
<a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=n>view</span><span class=o>=</span><span class=n>view</span><span class=p>,</span>
<a id=__codelineno-0-139 name=__codelineno-0-139></a>        <span class=n>trigger_id</span><span class=o>=</span><span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=p>[</span><span class=s2>&quot;trigger_id&quot;</span><span class=p>]),</span>
<a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=n>view_id</span><span class=o>=</span><span class=n>get_in</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=p>[</span><span class=s2>&quot;view&quot;</span><span class=p>,</span> <span class=s2>&quot;root_view_id&quot;</span><span class=p>]),</span>
<a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h5 id=firefighter.slack.views.modals.opening.types class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">types</span> <a href=#firefighter.slack.views.modals.opening.types class=headerlink title="Permanent link">¤</a></h5> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.postmortem class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">postmortem</span> <a href=#firefighter.slack.views.modals.postmortem class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.select class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">select</span> <a href=#firefighter.slack.views.modals.select class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.send_sos class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">send_sos</span> <a href=#firefighter.slack.views.modals.send_sos class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.status class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">status</span> <a href=#firefighter.slack.views.modals.status class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.trigger_oncall class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">trigger_oncall</span> <a href=#firefighter.slack.views.modals.trigger_oncall class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h5 id=firefighter.slack.views.modals.trigger_oncall.OnCallModal class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">OnCallModal</span> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal class=headerlink title="Permanent link">¤</a></h5> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>OnCallModal</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=firefighter.slack.views.modals.base_modal.mixins.IncidentSelectableModalMixin>IncidentSelectableModalMixin</span></code>, <code><a class="autorefs autorefs-internal" title=firefighter.slack.views.modals.base_modal.base.SlackModal href=#firefighter.slack.views.modals.base_modal.base.SlackModal>SlackModal</a></code></p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/base_modal/base.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>        <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handle_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=s2>&quot;self&quot;</span><span class=p>,</span>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=s2>&quot;cls&quot;</span><span class=p>,</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=p>}:</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=bp>self</span><span class=o>.</span><span class=n>handler_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getfullargspec</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>build_modal_fn</span><span class=p>)</span><span class=o>.</span><span class=n>args</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>in</span> <span class=p>{</span><span class=s2>&quot;self&quot;</span><span class=p>,</span> <span class=s2>&quot;cls&quot;</span><span class=p>}:</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=bp>self</span><span class=o>.</span><span class=n>builder_fn_args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>
<a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_register_actions_shortcuts</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h6 id=firefighter.slack.views.modals.trigger_oncall.OnCallModal.open_shortcut class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">open_shortcut</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal.open_shortcut class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>open_shortcut</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" href=https://docs.python.org/3.11/library/stdtypes.html#str>str</a></span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> <p><a href=https://api.slack.com/interactivity/shortcuts>Slack shortcut</a> to open the modal.</p> </div> </div> <div class="doc doc-object doc-function"> <h6 id=firefighter.slack.views.modals.trigger_oncall.OnCallModal.build_modal_fn class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">build_modal_fn</span> <a href=#firefighter.slack.views.modals.trigger_oncall.OnCallModal.build_modal_fn class=headerlink title="Permanent link">¤</a></h6> <div class="doc-signature highlight"><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>build_modal_fn</span><span class=p>(</span><span class=n>incident</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-internal" title=firefighter.incidents.models.incident.Incident href=../incidents/#firefighter.incidents.models.incident.Incident>Incident</a></span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3.11/library/typing.html#typing.Any>Any</a></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n><span title=slack_sdk.models.views.View>View</span></span>
</code></pre></div> <div class="doc doc-contents "> <p>XXX Should get an incident ID instead of an incident.</p> <details class=quote> <summary>Source code in <code>src/firefighter/slack/views/modals/trigger_oncall.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-33 name=__codelineno-0-33></a><span class=k>def</span> <span class=nf>build_modal_fn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>incident</span><span class=p>:</span> <span class=n>Incident</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>View</span><span class=p>:</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;XXX Should get an incident ID instead of an incident.&quot;&quot;&quot;</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a>    <span class=n>previous_pd_incidents</span> <span class=o>=</span> <span class=n>PagerDutyIncident</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=n>incident_id</span><span class=o>=</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a>    <span class=p>)</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a>
<a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=n>pd_services</span> <span class=o>=</span> <span class=n>PagerDutyService</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>exclude</span><span class=p>(</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a>        <span class=n>pagerdutyincident__in</span><span class=o>=</span><span class=n>previous_pd_incidents</span><span class=p>,</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>ignore</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=n>pd_options</span> <span class=o>=</span> <span class=p>[</span><span class=n>Option</span><span class=p>(</span><span class=n>value</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>s</span><span class=o>.</span><span class=n>id</span><span class=p>),</span> <span class=n>label</span><span class=o>=</span><span class=n>s</span><span class=o>.</span><span class=n>summary</span><span class=p>)</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>pd_services</span><span class=p>]</span>
<a id=__codelineno-0-43 name=__codelineno-0-43></a>
<a id=__codelineno-0-44 name=__codelineno-0-44></a>    <span class=n>blocks</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Block</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-0-45 name=__codelineno-0-45></a>        <span class=n>SectionBlock</span><span class=p>(</span>
<a id=__codelineno-0-46 name=__codelineno-0-46></a>            <span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;You are about to trigger on-call for incident #</span><span class=si>{</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>. Please select the on-call line that you want to trigger.&quot;</span>
<a id=__codelineno-0-47 name=__codelineno-0-47></a>        <span class=p>),</span>
<a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=n>DividerBlock</span><span class=p>(),</span>
<a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=p>(</span>
<a id=__codelineno-0-50 name=__codelineno-0-50></a>            <span class=n>InputBlock</span><span class=p>(</span>
<a id=__codelineno-0-51 name=__codelineno-0-51></a>                <span class=n>block_id</span><span class=o>=</span><span class=s2>&quot;oncall_service&quot;</span><span class=p>,</span>
<a id=__codelineno-0-52 name=__codelineno-0-52></a>                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Select on-call line&quot;</span><span class=p>,</span>
<a id=__codelineno-0-53 name=__codelineno-0-53></a>                <span class=n>element</span><span class=o>=</span><span class=n>RadioButtonsElement</span><span class=p>(</span>
<a id=__codelineno-0-54 name=__codelineno-0-54></a>                    <span class=n>action_id</span><span class=o>=</span><span class=s2>&quot;select_oncall_service&quot;</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=n>pd_options</span>
<a id=__codelineno-0-55 name=__codelineno-0-55></a>                <span class=p>),</span>
<a id=__codelineno-0-56 name=__codelineno-0-56></a>            <span class=p>)</span>
<a id=__codelineno-0-57 name=__codelineno-0-57></a>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>pd_options</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span>
<a id=__codelineno-0-58 name=__codelineno-0-58></a>            <span class=k>else</span> <span class=n>SectionBlock</span><span class=p>(</span>
<a id=__codelineno-0-59 name=__codelineno-0-59></a>                <span class=n>text</span><span class=o>=</span><span class=s2>&quot;:warning: No PagerDuty services in the database! :warning:</span><span class=se>\n</span><span class=s2>Administrator action is needed.&quot;</span>
<a id=__codelineno-0-60 name=__codelineno-0-60></a>            <span class=p>)</span>
<a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=p>),</span>
<a id=__codelineno-0-62 name=__codelineno-0-62></a>    <span class=p>]</span>
<a id=__codelineno-0-63 name=__codelineno-0-63></a>
<a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>previous_pd_incidents</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=n>already_existing_text</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-0-66 name=__codelineno-0-66></a>            <span class=sa>f</span><span class=s2>&quot;- &lt;</span><span class=si>{</span><span class=n>s</span><span class=o>.</span><span class=n>service</span><span class=o>.</span><span class=n>web_url</span><span class=si>}</span><span class=s2>|</span><span class=si>{</span><span class=n>s</span><span class=o>.</span><span class=n>service</span><span class=o>.</span><span class=n>summary</span><span class=si>}</span><span class=s2>&gt;: &lt;</span><span class=si>{</span><span class=n>s</span><span class=o>.</span><span class=n>web_url</span><span class=si>}</span><span class=s2>|_</span><span class=si>{</span><span class=n>s</span><span class=o>.</span><span class=n>summary</span><span class=si>}</span><span class=s2>_&gt;</span><span class=se>\n</span><span class=s2>&quot;</span>
<a id=__codelineno-0-67 name=__codelineno-0-67></a>            <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>previous_pd_incidents</span>
<a id=__codelineno-0-68 name=__codelineno-0-68></a>        <span class=p>]</span>
<a id=__codelineno-0-69 name=__codelineno-0-69></a>        <span class=n>blocks</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
<a id=__codelineno-0-70 name=__codelineno-0-70></a>            <span class=p>(</span>
<a id=__codelineno-0-71 name=__codelineno-0-71></a>                <span class=n>DividerBlock</span><span class=p>(),</span>
<a id=__codelineno-0-72 name=__codelineno-0-72></a>                <span class=n>SectionBlock</span><span class=p>(</span>
<a id=__codelineno-0-73 name=__codelineno-0-73></a>                    <span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;:warning: There are already some on-call lines that have been triggered and can not be triggered again:</span><span class=se>\n</span><span class=s2> </span><span class=si>{</span><span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>already_existing_text</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-0-74 name=__codelineno-0-74></a>                <span class=p>),</span>
<a id=__codelineno-0-75 name=__codelineno-0-75></a>            <span class=p>)</span>
<a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=p>)</span>
<a id=__codelineno-0-77 name=__codelineno-0-77></a>
<a id=__codelineno-0-78 name=__codelineno-0-78></a>    <span class=k>return</span> <span class=n>View</span><span class=p>(</span>
<a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;modal&quot;</span><span class=p>,</span>
<a id=__codelineno-0-80 name=__codelineno-0-80></a>        <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Trigger on-call&quot;</span><span class=p>[:</span><span class=mi>24</span><span class=p>],</span>
<a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=n>submit</span><span class=o>=</span><span class=s2>&quot;Trigger on-call&quot;</span><span class=p>[:</span><span class=mi>24</span><span class=p>]</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>pd_options</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-82 name=__codelineno-0-82></a>        <span class=n>callback_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>callback_id</span><span class=p>,</span>
<a id=__codelineno-0-83 name=__codelineno-0-83></a>        <span class=n>private_metadata</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>incident</span><span class=o>.</span><span class=n>id</span><span class=p>),</span>
<a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=n>blocks</span><span class=o>=</span><span class=n>blocks</span><span class=p>,</span>
<a id=__codelineno-0-85 name=__codelineno-0-85></a>    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.update class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">update</span> <a href=#firefighter.slack.views.modals.update class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.update_roles class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">update_roles</span> <a href=#firefighter.slack.views.modals.update_roles class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-module"> <h4 id=firefighter.slack.views.modals.update_status class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">update_status</span> <a href=#firefighter.slack.views.modals.update_status class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <h3 id=firefighter.slack.views.views class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">views</span> <a href=#firefighter.slack.views.views class=headerlink title="Permanent link">¤</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h4 id=firefighter.slack.views.views.SlackEventsHandler class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">SlackEventsHandler</span> <a href=#firefighter.slack.views.views.SlackEventsHandler class=headerlink title="Permanent link">¤</a></h4> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=django.views.generic.View>View</span></code></p> <p>Handle all Slack events.</p> <div class="doc doc-children"> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 2, 2023</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"/></svg> </span> <nav> <a href=mailto:gabriel.dugny@manomano.com>Gabriel Dugny</a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021-2024 Colibri SAS </div> </div> <div class=md-social> <a href=https://github.com/ManoManoTech/firefighter-incident target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://pypi.org/project/firefighter-incident/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.tabs.link", "navigation.expand", "navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": ["latest", "dev"], "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.e1c3ead8.min.js></script> <script src=../../assets/_markdown_exec_pyodide.js></script> </body> </html>